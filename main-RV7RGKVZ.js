var G0=Object.defineProperty,W0=Object.defineProperties;var K0=Object.getOwnPropertyDescriptors;var Ja=Object.getOwnPropertySymbols;var rI=Object.prototype.hasOwnProperty,iI=Object.prototype.propertyIsEnumerable;var nI=(t,e,n)=>e in t?G0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})rI.call(e,n)&&nI(t,n,e[n]);if(Ja)for(var n of Ja(e))iI.call(e,n)&&nI(t,n,e[n]);return t},me=(t,e)=>W0(t,K0(e));var sI=(t,e)=>{var n={};for(var r in t)rI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ja)for(var r of Ja(t))e.indexOf(r)<0&&iI.call(t,r)&&(n[r]=t[r]);return n};var C=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(l){i(l)}},o=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())});function oI(t,e){return Object.is(t,e)}var Ue=null,Xa=!1,Za=1,$n=Symbol("SIGNAL");function he(t){let e=Ue;return Ue=t,e}var tc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kd(t){if(Xa)throw new Error("");if(Ue===null)return;Ue.consumerOnSignalRead(t);let e=Ue.nextProducerIndex++;if(yi(Ue),e<Ue.producerNode.length&&Ue.producerNode[e]!==t&&Js(Ue)){let n=Ue.producerNode[e];nc(n,Ue.producerIndexOfThis[e])}Ue.producerNode[e]!==t&&(Ue.producerNode[e]=t,Ue.producerIndexOfThis[e]=Js(Ue)?dI(t,Ue,e):0),Ue.producerLastReadVersion[e]=t.version}function Q0(){Za++}function aI(t){if(!(Js(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Za)){if(!t.producerMustRecompute(t)&&!Vd(t)){t.dirty=!1,t.lastCleanEpoch=Za;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Za}}function cI(t){if(t.liveConsumerNode===void 0)return;let e=Xa;Xa=!0;try{for(let n of t.liveConsumerNode)n.dirty||Y0(n)}finally{Xa=e}}function uI(){return Ue?.consumerAllowSignalWrites!==!1}function Y0(t){t.dirty=!0,cI(t),t.consumerMarkedDirty?.(t)}function Fd(t){return t&&(t.nextProducerIndex=0),he(t)}function Ld(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Js(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)nc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Vd(t){yi(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(aI(n),r!==n.version))return!0}return!1}function lI(t){if(yi(t),Js(t))for(let e=0;e<t.producerNode.length;e++)nc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function dI(t,e,n){if(hI(t),yi(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=dI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function nc(t,e){if(hI(t),yi(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)nc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];yi(i),i.producerIndexOfThis[r]=e}}function Js(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function yi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function hI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function fI(t){let e=Object.create(J0);e.computation=t;let n=()=>{if(aI(e),kd(e),e.value===ec)throw e.error;return e.value};return n[$n]=e,n}var Pd=Symbol("UNSET"),Od=Symbol("COMPUTING"),ec=Symbol("ERRORED"),J0=me(F({},tc),{value:Pd,dirty:!0,error:null,equal:oI,producerMustRecompute(t){return t.value===Pd||t.value===Od},producerRecomputeValue(t){if(t.value===Od)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Od;let n=Fd(t),r;try{r=t.computation()}catch(i){r=ec,t.error=i}finally{Ld(t,n)}if(e!==Pd&&e!==ec&&r!==ec&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function X0(){throw new Error}var pI=X0;function gI(){pI()}function mI(t){pI=t}var Z0=null;function yI(t){let e=Object.create(II);e.value=t;let n=()=>(kd(e),e.value);return n[$n]=e,n}function Ud(t,e){uI()||gI(),t.equal(t.value,e)||(t.value=e,eS(t))}function vI(t,e){uI()||gI(),Ud(t,e(t.value))}var II=me(F({},tc),{equal:oI,value:void 0});function eS(t){t.version++,Q0(),cI(t),Z0?.()}function W(t){return typeof t=="function"}function vi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var rc=vi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function br(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Me=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(W(r))try{r()}catch(s){e=s instanceof rc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{_I(s)}catch(o){e=e??[],o instanceof rc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new rc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_I(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&br(n,e)}remove(e){let{_finalizers:n}=this;n&&br(n,e),e instanceof t&&e._removeParent(this)}};Me.EMPTY=(()=>{let t=new Me;return t.closed=!0,t})();var jd=Me.EMPTY;function ic(t){return t instanceof Me||t&&"closed"in t&&W(t.remove)&&W(t.add)&&W(t.unsubscribe)}function _I(t){W(t)?t():t.unsubscribe()}var Ut={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ii={setTimeout(t,e,...n){let{delegate:r}=Ii;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ii;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function sc(t){Ii.setTimeout(()=>{let{onUnhandledError:e}=Ut;if(e)e(t);else throw t})}function Xs(){}var wI=Bd("C",void 0,void 0);function EI(t){return Bd("E",void 0,t)}function TI(t){return Bd("N",t,void 0)}function Bd(t,e,n){return{kind:t,value:e,error:n}}var Cr=null;function _i(t){if(Ut.useDeprecatedSynchronousErrorHandling){let e=!Cr;if(e&&(Cr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Cr;if(Cr=null,n)throw r}}else t()}function DI(t){Ut.useDeprecatedSynchronousErrorHandling&&Cr&&(Cr.errorThrown=!0,Cr.error=t)}var Sr=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ic(e)&&e.add(this)):this.destination=rS}static create(e,n,r){return new wi(e,n,r)}next(e){this.isStopped?qd(TI(e),this):this._next(e)}error(e){this.isStopped?qd(EI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qd(wI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},tS=Function.prototype.bind;function $d(t,e){return tS.call(t,e)}var Hd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){oc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){oc(r)}else oc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){oc(n)}}},wi=class extends Sr{constructor(e,n,r){super();let i;if(W(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ut.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$d(e.next,s),error:e.error&&$d(e.error,s),complete:e.complete&&$d(e.complete,s)}):i=e}this.destination=new Hd(i)}};function oc(t){Ut.useDeprecatedSynchronousErrorHandling?DI(t):sc(t)}function nS(t){throw t}function qd(t,e){let{onStoppedNotification:n}=Ut;n&&Ii.setTimeout(()=>n(t,e))}var rS={closed:!0,next:Xs,error:nS,complete:Xs};var Ei=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pt(t){return t}function ac(...t){return zd(t)}function zd(t){return t.length===0?pt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=sS(n)?n:new wi(n,r,i);return _i(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=bI(r),new r((i,s)=>{let o=new wi({next:c=>{try{n(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ei](){return this}pipe(...n){return zd(n)(this)}toPromise(n){return n=bI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function bI(t){var e;return(e=t??Ut.Promise)!==null&&e!==void 0?e:Promise}function iS(t){return t&&W(t.next)&&W(t.error)&&W(t.complete)}function sS(t){return t&&t instanceof Sr||iS(t)&&ic(t)}function Gd(t){return W(t?.lift)}function ue(t){return e=>{if(Gd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(t,e,n,r,i){return new Wd(t,e,n,r,i)}var Wd=class extends Sr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ti(){return ue((t,e)=>{let n=null;t._refCount++;let r=ie(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Di=class extends ne{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Gd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let n=this.getSubject();e.add(this.source.subscribe(ie(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return Ti()(this)}};var CI=vi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var it=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new cc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new CI}next(n){_i(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){_i(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){_i(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?jd:(this.currentObservers=null,s.push(n),new Me(()=>{this.currentObservers=null,br(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new cc(e,n),t})(),cc=class extends it{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:jd}};var ze=class extends it{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Kd={now(){return(Kd.delegate||Date).now()},delegate:void 0};var uc=class extends Me{constructor(e,n){super()}schedule(e,n=0){return this}};var Zs={setInterval(t,e,...n){let{delegate:r}=Zs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Zs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var bi=class extends uc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Zs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Zs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,br(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ci=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ci.now=Kd.now;var Si=class extends Ci{constructor(e,n=Ci.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Qd=new Si(bi);var lc=class extends bi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var dc=class extends Si{};var Yd=new dc(lc);var gt=new ne(t=>t.complete());function SI(t){return t&&W(t.schedule)}function AI(t){return t[t.length-1]}function hc(t){return W(AI(t))?t.pop():void 0}function qn(t){return SI(AI(t))?t.pop():void 0}function Jd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function NI(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(f){try{l(r.next(f))}catch(p){o(p)}}function u(f){try{l(r.throw(f))}catch(p){o(p)}}function l(f){f.done?s(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function RI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ar(t){return this instanceof Ar?(this.v=t,this):new Ar(t)}function MI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(A){return Promise.resolve(A).then(_,p)}}function c(_,A){r[_]&&(i[_]=function(N){return new Promise(function(R,k){s.push([_,N,R,k])>1||u(_,N)})},A&&(i[_]=A(i[_])))}function u(_,A){try{l(r[_](A))}catch(N){y(s[0][3],N)}}function l(_){_.value instanceof Ar?Promise.resolve(_.value.v).then(f,p):y(s[0][2],_)}function f(_){u("next",_)}function p(_){u("throw",_)}function y(_,A){_(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function xI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof RI=="function"?RI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(l){s({value:l,done:c})},o)}}var fc=t=>t&&typeof t.length=="number"&&typeof t!="function";function pc(t){return W(t?.then)}function gc(t){return W(t[Ei])}function mc(t){return Symbol.asyncIterator&&W(t?.[Symbol.asyncIterator])}function yc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function oS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vc=oS();function Ic(t){return W(t?.[vc])}function _c(t){return MI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ar(n.read());if(i)return yield Ar(void 0);yield yield Ar(r)}}finally{n.releaseLock()}})}function wc(t){return W(t?.getReader)}function Oe(t){if(t instanceof ne)return t;if(t!=null){if(gc(t))return aS(t);if(fc(t))return cS(t);if(pc(t))return uS(t);if(mc(t))return PI(t);if(Ic(t))return lS(t);if(wc(t))return dS(t)}throw yc(t)}function aS(t){return new ne(e=>{let n=t[Ei]();if(W(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cS(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function uS(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,sc)})}function lS(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function PI(t){return new ne(e=>{hS(t,e).catch(n=>e.error(n))})}function dS(t){return PI(_c(t))}function hS(t,e){var n,r,i,s;return NI(this,void 0,void 0,function*(){try{for(n=xI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ot(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Hn(t,e=0){return ue((n,r)=>{n.subscribe(ie(r,i=>ot(r,t,()=>r.next(i),e),()=>ot(r,t,()=>r.complete(),e),i=>ot(r,t,()=>r.error(i),e)))})}function zn(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function OI(t,e){return Oe(t).pipe(zn(e),Hn(e))}function kI(t,e){return Oe(t).pipe(zn(e),Hn(e))}function FI(t,e){return new ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function LI(t,e){return new ne(n=>{let r;return ot(n,e,()=>{r=t[vc](),ot(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>W(r?.return)&&r.return()})}function Ec(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{ot(n,e,()=>{let r=t[Symbol.asyncIterator]();ot(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function VI(t,e){return Ec(_c(t),e)}function UI(t,e){if(t!=null){if(gc(t))return OI(t,e);if(fc(t))return FI(t,e);if(pc(t))return kI(t,e);if(mc(t))return Ec(t,e);if(Ic(t))return LI(t,e);if(wc(t))return VI(t,e)}throw yc(t)}function Ee(t,e){return e?UI(t,e):Oe(t)}function G(...t){let e=qn(t);return Ee(t,e)}function Ai(t,e){let n=W(t)?t:()=>t,r=i=>i.error(n());return new ne(e?i=>e.schedule(r,0,i):r)}function Xd(t){return!!t&&(t instanceof ne||W(t.lift)&&W(t.subscribe))}var Tn=vi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(t,e){return ue((n,r)=>{let i=0;n.subscribe(ie(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:fS}=Array;function pS(t,e){return fS(e)?t(...e):t(e)}function Tc(t){return ee(e=>pS(t,e))}var{isArray:gS}=Array,{getPrototypeOf:mS,prototype:yS,keys:vS}=Object;function Dc(t){if(t.length===1){let e=t[0];if(gS(e))return{args:e,keys:null};if(IS(e)){let n=vS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function IS(t){return t&&typeof t=="object"&&mS(t)===yS}function bc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Cc(...t){let e=qn(t),n=hc(t),{args:r,keys:i}=Dc(t);if(r.length===0)return Ee([],e);let s=new ne(_S(r,e,i?o=>bc(i,o):pt));return n?s.pipe(Tc(n)):s}function _S(t,e,n=pt){return r=>{jI(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)jI(e,()=>{let l=Ee(t[u],e),f=!1;l.subscribe(ie(r,p=>{s[u]=p,f||(f=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function jI(t,e,n){t?ot(n,t,e):e()}function BI(t,e,n,r,i,s,o,c){let u=[],l=0,f=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},_=N=>l<r?A(N):u.push(N),A=N=>{s&&e.next(N),l++;let R=!1;Oe(n(N,f++)).subscribe(ie(e,k=>{i?.(k),s?_(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();o?ot(e,o,()=>A(k)):A(k)}y()}catch(k){e.error(k)}}))};return t.subscribe(ie(e,_,()=>{p=!0,y()})),()=>{c?.()}}function Le(t,e,n=1/0){return W(e)?Le((r,i)=>ee((s,o)=>e(r,s,i,o))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>BI(r,i,t,n)))}function Zd(t=1/0){return Le(pt,t)}function $I(){return Zd(1)}function Ri(...t){return $I()(Ee(t,qn(t)))}function Sc(t){return new ne(e=>{Oe(t()).subscribe(e)})}function eh(...t){let e=hc(t),{args:n,keys:r}=Dc(t),i=new ne(s=>{let{length:o}=n;if(!o){s.complete();return}let c=new Array(o),u=o,l=o;for(let f=0;f<o;f++){let p=!1;Oe(n[f]).subscribe(ie(s,y=>{p||(p=!0,l--),c[f]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?bc(r,c):c),s.complete())}))}});return e?i.pipe(Tc(e)):i}function mt(t,e){return ue((n,r)=>{let i=0;n.subscribe(ie(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Gn(t){return ue((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ie(n,void 0,void 0,o=>{s=Oe(t(o,Gn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function qI(t,e,n,r,i){return(s,o)=>{let c=n,u=e,l=0;s.subscribe(ie(o,f=>{let p=l++;u=c?t(u,f,p):(c=!0,f),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function Rr(t,e){return W(e)?Le(t,e,1):Le(t,1)}function Wn(t){return ue((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Dn(t){return t<=0?()=>gt:ue((e,n)=>{let r=0;e.subscribe(ie(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function th(t){return ee(()=>t)}function Ac(t=wS){return ue((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function wS(){return new Tn}function Ni(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function jt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?mt((i,s)=>t(i,s,r)):pt,Dn(1),n?Wn(e):Ac(()=>new Tn))}function Mi(t){return t<=0?()=>gt:ue((e,n)=>{let r=[];e.subscribe(ie(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function nh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?mt((i,s)=>t(i,s,r)):pt,Mi(1),n?Wn(e):Ac(()=>new Tn))}function Rc(t,e){return ue(qI(t,e,arguments.length>=2,!0))}function Nc(...t){let e=qn(t);return ue((n,r)=>{(e?Ri(t,n,e):Ri(t,n)).subscribe(r)})}function bt(t,e){return ue((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(ie(r,u=>{i?.unsubscribe();let l=0,f=s++;Oe(t(u,f)).subscribe(i=ie(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function rh(t){return ue((e,n)=>{Oe(t).subscribe(ie(n,()=>n.complete(),Xs)),!n.closed&&e.subscribe(n)})}function xe(t,e,n){let r=W(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(ie(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pt}var q=class extends Error{constructor(e,n){super(su(e,n)),this.code=e}};function su(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function mo(t){return{toString:t}.toString()}var Mc="__parameters__";function ES(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function C_(t,e,n){return mo(()=>{let r=ES(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,l,f){let p=u.hasOwnProperty(Mc)?u[Mc]:Object.defineProperty(u,Mc,{value:[]})[Mc];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var eo=globalThis;function Ie(t){for(let e in t)if(t[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function ct(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ct).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function HI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var TS=Ie({__forward_ref__:Ie});function S_(t){return t.__forward_ref__=S_,t.toString=function(){return ct(this())},t}function St(t){return A_(t)?t():t}function A_(t){return typeof t=="function"&&t.hasOwnProperty(TS)&&t.__forward_ref__===S_}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ou(t){return{providers:t.providers||[],imports:t.imports||[]}}function au(t){return zI(t,N_)||zI(t,M_)}function R_(t){return au(t)!==null}function zI(t,e){return t.hasOwnProperty(e)?t[e]:null}function DS(t){let e=t&&(t[N_]||t[M_]);return e||null}function GI(t){return t&&(t.hasOwnProperty(WI)||t.hasOwnProperty(bS))?t[WI]:null}var N_=Ie({\u0275prov:Ie}),WI=Ie({\u0275inj:Ie}),M_=Ie({ngInjectableDef:Ie}),bS=Ie({ngInjectorDef:Ie}),K=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function x_(t){return t&&!!t.\u0275providers}var CS=Ie({\u0275cmp:Ie}),SS=Ie({\u0275dir:Ie}),AS=Ie({\u0275pipe:Ie}),RS=Ie({\u0275mod:Ie}),Bc=Ie({\u0275fac:Ie}),to=Ie({__NG_ELEMENT_ID__:Ie}),KI=Ie({__NG_ENV_ID__:Ie});function P_(t){return typeof t=="string"?t:t==null?"":String(t)}function NS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():P_(t)}function MS(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new q(-200,t)}function af(t,e){throw new q(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),mh;function O_(){return mh}function Ct(t){let e=mh;return mh=t,e}function k_(t,e,n){let r=au(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;af(t,"Injector")}var xS={},no=xS,yh="__NG_DI_FLAG__",$c="ngTempTokenPath",PS="ngTokenPath",OS=/\n/gm,kS="\u0275",QI="__source",ki;function FS(){return ki}function Kn(t){let e=ki;return ki=t,e}function LS(t,e=te.Default){if(ki===void 0)throw new q(-203,!1);return ki===null?k_(t,void 0,e):ki.get(t,e&te.Optional?null:void 0,e)}function se(t,e=te.Default){return(O_()||LS)(St(t),e)}function x(t,e=te.Default){return se(t,cu(e))}function cu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function vh(t){let e=[];for(let n=0;n<t.length;n++){let r=St(t[n]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,s=te.Default;for(let o=0;o<r.length;o++){let c=r[o],u=VS(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(se(i,s))}else e.push(se(r))}return e}function F_(t,e){return t[yh]=e,t.prototype[yh]=e,t}function VS(t){return t[yh]}function US(t,e,n,r){let i=t[$c];throw e[QI]&&i.unshift(e[QI]),t.message=jS(`
`+t.message,i,n,r),t[PS]=i,t[$c]=null,t}function jS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==kS?t.slice(2):t;let i=ct(e);if(Array.isArray(e))i=e.map(ct).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):ct(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(OS,`
  `)}`}var Wt=F_(C_("Optional"),8);var L_=F_(C_("SkipSelf"),4);function Li(t,e){let n=t.hasOwnProperty(Bc);return n?t[Bc]:null}function BS(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function $S(t){return t.flat(Number.POSITIVE_INFINITY)}function cf(t,e){t.forEach(n=>Array.isArray(n)?cf(n,e):e(n))}function V_(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var ro={},$t=[],Mr=new K(""),U_=new K("",-1),j_=new K(""),Hc=class{get(e,n=no){if(n===no){let r=new Error(`NullInjectorError: No provider for ${ct(e)}!`);throw r.name="NullInjectorError",r}return n}},B_=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(B_||{}),nn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(nn||{}),Cn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Cn||{});function qS(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Ih(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];zS(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function HS(t){return t===3||t===4||t===6}function zS(t){return t.charCodeAt(0)===64}function uf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?YI(t,n,i,null,e[++r]):YI(t,n,i,null,null))}}return t}function YI(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var $_="ng-template";function GS(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&qS(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(lf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function lf(t){return t.type===4&&t.value!==$_}function WS(t,e,n){let r=t.type===4&&!n?$_:t.value;return e===r}function KS(t,e,n){let r=4,i=t.attrs,s=i!==null?JS(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!Bt(r)&&!Bt(u))return!1;if(o&&Bt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!WS(t,u,n)||u===""&&e.length===1){if(Bt(r))return!1;o=!0}}else if(r&8){if(i===null||!GS(t,i,u,n)){if(Bt(r))return!1;o=!0}}else{let l=e[++c],f=QS(u,i,lf(t),n);if(f===-1){if(Bt(r))return!1;o=!0;continue}if(l!==""){let p;if(f>s?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Bt(r))return!1;o=!0}}}}return Bt(r)||o}function Bt(t){return(t&1)===0}function QS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return XS(e,t)}function YS(t,e,n=!1){for(let r=0;r<e.length;r++)if(KS(t,e[r],n))return!0;return!1}function JS(t){for(let e=0;e<t.length;e++){let n=t[e];if(HS(n))return e}return t.length}function XS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function JI(t,e){return t?":not("+e.trim()+")":e}function ZS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Bt(o)&&(e+=JI(s,i),i=""),r=o,s=s||!Bt(r);n++}return i!==""&&(e+=JI(s,i)),e}function eA(t){return t.map(ZS).join(",")}function tA(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Bt(i))break;i=s}r++}return{attrs:e,classes:n}}function dt(t){return mo(()=>{let e=W_(t),n=me(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===B_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||nn.Emulated,styles:t.styles||$t,_:null,schemas:t.schemas||null,tView:null,id:""});K_(n);let r=t.dependencies;return n.directiveDefs=ZI(r,!1),n.pipeDefs=ZI(r,!0),n.id=iA(n),n})}function nA(t){return xr(t)||q_(t)}function rA(t){return t!==null}function uu(t){return mo(()=>({type:t.type,bootstrap:t.bootstrap||$t,declarations:t.declarations||$t,imports:t.imports||$t,exports:t.exports||$t,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function XI(t,e){if(t==null)return ro;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c=Cn.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=c!==Cn.None?[r,c]:r,e[s]=o):n[s]=r}return n}function $i(t){return mo(()=>{let e=W_(t);return K_(e),e})}function xr(t){return t[CS]||null}function q_(t){return t[SS]||null}function H_(t){return t[AS]||null}function z_(t){let e=xr(t)||q_(t)||H_(t);return e!==null?e.standalone:!1}function G_(t,e){let n=t[RS]||null;if(!n&&e===!0)throw new Error(`Type ${ct(t)} does not have '\u0275mod' property.`);return n}function W_(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ro,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||$t,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:XI(t.inputs,e),outputs:XI(t.outputs),debugInfo:null}}function K_(t){t.features?.forEach(e=>e(t))}function ZI(t,e){if(!t)return null;let n=e?H_:nA;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(rA)}function iA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Kt(t){return{\u0275providers:t}}function sA(...t){return{\u0275providers:Q_(!0,t),\u0275fromNgModule:!0}}function Q_(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return cf(e,o=>{let c=o;_h(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Y_(i,s),n}function Y_(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];df(i,s=>{e(s,r)})}}function _h(t,e,n,r){if(t=St(t),!t)return!1;let i=null,s=GI(t),o=!s&&xr(t);if(!s&&!o){let u=t.ngModule;if(s=GI(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)_h(l,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let l;try{cf(s.imports,f=>{_h(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&Y_(l,e)}if(!c){let l=Li(i)||(()=>new i);e({provide:i,useFactory:l,deps:$t},i),e({provide:j_,useValue:i,multi:!0},i),e({provide:Mr,useValue:()=>se(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let l=t;df(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function df(t,e){for(let n of t)x_(n)&&(n=n.\u0275providers),Array.isArray(n)?df(n,e):e(n)}var oA=Ie({provide:String,useValue:Ie});function J_(t){return t!==null&&typeof t=="object"&&oA in t}function aA(t){return!!(t&&t.useExisting)}function cA(t){return!!(t&&t.useFactory)}function wh(t){return typeof t=="function"}var lu=new K(""),kc={},uA={},ih;function hf(){return ih===void 0&&(ih=new Hc),ih}var At=class{},io=class extends At{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Th(e,o=>this.processProvider(o)),this.records.set(U_,xi(void 0,this)),i.has("environment")&&this.records.set(At,xi(void 0,this));let s=this.records.get(lu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(j_,$t,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Kn(this),r=Ct(void 0),i;try{return e()}finally{Kn(n),Ct(r)}}get(e,n=no,r=te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(KI))return e[KI](this);r=cu(r);let i,s=Kn(this),o=Ct(void 0);try{if(!(r&te.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=gA(e)&&au(e);l&&this.injectableDefInScope(l)?u=xi(Eh(e),kc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&te.Self?hf():this.parent;return n=r&te.Optional&&n===no?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[$c]=c[$c]||[]).unshift(ct(e)),s)throw c;return US(c,e,"R3InjectorError",this.source)}else throw c}finally{Ct(o),Kn(s)}}resolveInjectorInitializers(){let e=he(null),n=Kn(this),r=Ct(void 0),i;try{let s=this.get(Mr,$t,te.Self);for(let o of s)o()}finally{Kn(n),Ct(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ct(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new q(205,!1)}processProvider(e){e=St(e);let n=wh(e)?e:St(e&&e.provide),r=dA(e);if(!wh(e)&&e.multi===!0){let i=this.records.get(n);i||(i=xi(void 0,kc,!0),i.factory=()=>vh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===kc&&(n.value=uA,n.value=n.factory()),typeof n.value=="object"&&n.value&&pA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=St(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Eh(t){let e=au(t),n=e!==null?e.factory:Li(t);if(n!==null)return n;if(t instanceof K)throw new q(204,!1);if(t instanceof Function)return lA(t);throw new q(204,!1)}function lA(t){if(t.length>0)throw new q(204,!1);let n=DS(t);return n!==null?()=>n.factory(t):()=>new t}function dA(t){if(J_(t))return xi(void 0,t.useValue);{let e=hA(t);return xi(e,kc)}}function hA(t,e,n){let r;if(wh(t)){let i=St(t);return Li(i)||Eh(i)}else if(J_(t))r=()=>St(t.useValue);else if(cA(t))r=()=>t.useFactory(...vh(t.deps||[]));else if(aA(t))r=()=>se(St(t.useExisting));else{let i=St(t&&(t.useClass||t.provide));if(fA(t))r=()=>new i(...vh(t.deps));else return Li(i)||Eh(i)}return r}function xi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fA(t){return!!t.deps}function pA(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function gA(t){return typeof t=="function"||typeof t=="object"&&t instanceof K}function Th(t,e){for(let n of t)Array.isArray(n)?Th(n,e):n&&x_(n)?Th(n.\u0275providers,e):e(n)}function Zn(t,e){t instanceof io&&t.assertNotDestroyed();let n,r=Kn(t),i=Ct(void 0);try{return e()}finally{Kn(r),Ct(i)}}function mA(){return O_()!==void 0||FS()!=null}function yA(t){return typeof t=="function"}var yt=0,Z=1,H=2,je=3,qt=4,Qt=5,Ht=6,so=7,zt=8,Vi=9,rn=10,Pe=11,oo=12,e_=13,qi=14,Rt=15,yo=16,Pi=17,Sn=18,du=19,X_=20,Qn=21,sh=22,Pr=23,lt=25,Z_=1,ao=6,An=7,zc=8,Ui=9,ut=10,ff=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ff||{});function bn(t){return Array.isArray(t)&&typeof t[Z_]=="object"}function sn(t){return Array.isArray(t)&&t[Z_]===!0}function pf(t){return(t.flags&4)!==0}function vo(t){return t.componentOffset>-1}function hu(t){return(t.flags&1)===1}function Io(t){return!!t.template}function ew(t){return(t[H]&512)!==0}var Dh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function tw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Hi(){return nw}function nw(t){return t.type.prototype.ngOnChanges&&(t.setInput=IA),vA}Hi.ngInherit=!0;function vA(){let t=iw(this),e=t?.current;if(e){let n=t.previous;if(n===ro)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function IA(t,e,n,r,i){let s=this.declaredInputs[r],o=iw(t)||_A(t,{previous:ro,current:null}),c=o.current||(o.current={}),u=o.previous,l=u[s];c[s]=new Dh(l&&l.currentValue,n,u===ro),tw(t,e,i,n)}var rw="__ngSimpleChanges__";function iw(t){return t[rw]||null}function _A(t,e){return t[rw]=e}var t_=null;var en=function(t,e,n){t_?.(t,e,n)},wA="svg",EA="math",TA=!1;function DA(){return TA}function Gt(t){for(;Array.isArray(t);)t=t[yt];return t}function bA(t,e){return Gt(e[t])}function Nt(t,e){return Gt(e[t.index])}function sw(t,e){return t.data[e]}function er(t,e){let n=e[t];return bn(n)?n:n[yt]}function CA(t){return(t[H]&4)===4}function gf(t){return(t[H]&128)===128}function SA(t){return sn(t[je])}function ji(t,e){return e==null?null:t[e]}function ow(t){t[Pi]=0}function AA(t){t[H]&1024||(t[H]|=1024,gf(t)&&co(t))}function RA(t,e){for(;t>0;)e=e[qi],t--;return e}function mf(t){return!!(t[H]&9216||t[Pr]?.dirty)}function bh(t){t[rn].changeDetectionScheduler?.notify(1),mf(t)?co(t):t[H]&64&&(DA()?(t[H]|=1024,co(t)):t[rn].changeDetectionScheduler?.notify())}function co(t){t[rn].changeDetectionScheduler?.notify();let e=uo(t);for(;e!==null&&!(e[H]&8192||(e[H]|=8192,!gf(e)));)e=uo(e)}function aw(t,e){if((t[H]&256)===256)throw new q(911,!1);t[Qn]===null&&(t[Qn]=[]),t[Qn].push(e)}function NA(t,e){if(t[Qn]===null)return;let n=t[Qn].indexOf(e);n!==-1&&t[Qn].splice(n,1)}function uo(t){let e=t[je];return sn(e)?e[je]:e}var re={lFrame:mw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function MA(){return re.lFrame.elementDepthCount}function xA(){re.lFrame.elementDepthCount++}function PA(){re.lFrame.elementDepthCount--}function cw(){return re.bindingsEnabled}function _o(){return re.skipHydrationRootTNode!==null}function OA(t){return re.skipHydrationRootTNode===t}function kA(t){re.skipHydrationRootTNode=t}function FA(){re.skipHydrationRootTNode=null}function Te(){return re.lFrame.lView}function Yt(){return re.lFrame.tView}function wo(t){return re.lFrame.contextLView=t,t[zt]}function Eo(t){return re.lFrame.contextLView=null,t}function Mt(){let t=uw();for(;t!==null&&t.type===64;)t=t.parent;return t}function uw(){return re.lFrame.currentTNode}function LA(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Lr(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function yf(){return re.lFrame.isParent}function lw(){re.lFrame.isParent=!1}function dw(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function VA(t){return re.lFrame.bindingIndex=t}function hw(){return re.lFrame.bindingIndex++}function UA(){return re.lFrame.inI18n}function jA(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ch(e)}function BA(){return re.lFrame.currentDirectiveIndex}function Ch(t){re.lFrame.currentDirectiveIndex=t}function fw(){return re.lFrame.currentQueryIndex}function vf(t){re.lFrame.currentQueryIndex=t}function $A(t){let e=t[Z];return e.type===2?e.declTNode:e.type===1?t[Qt]:null}function pw(t,e,n){if(n&te.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=$A(s),i===null||(s=s[qi],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=re.lFrame=gw();return r.currentTNode=e,r.lView=t,!0}function If(t){let e=gw(),n=t[Z];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function gw(){let t=re.lFrame,e=t===null?null:t.child;return e===null?mw(t):e}function mw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function yw(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var vw=yw;function _f(){let t=yw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function qA(t){return(re.lFrame.contextLView=RA(t,re.lFrame.contextLView))[zt]}function wf(){return re.lFrame.selectedIndex}function Or(t){re.lFrame.selectedIndex=t}function HA(){let t=re.lFrame;return sw(t.tView,t.selectedIndex)}function Iw(){return re.lFrame.currentNamespace}var _w=!0;function fu(){return _w}function on(t){_w=t}function zA(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=nw(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function pu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Fc(t,e,n){ww(t,e,3,n)}function Lc(t,e,n,r){(t[H]&3)===n&&ww(t,e,n,r)}function oh(t,e){let n=t[H];(n&3)===e&&(n&=16383,n+=1,t[H]=n)}function ww(t,e,n,r){let i=r!==void 0?t[Pi]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Pi]+=65536),(c<s||s==-1)&&(GA(t,n,e,u),t[Pi]=(t[Pi]&4294901760)+u+2),u++}function n_(t,e){en(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),en(5,t,e)}}function GA(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[H]>>14<t[Pi]>>16&&(t[H]&3)===e&&(t[H]+=16384,n_(c,s)):n_(c,s)}var Fi=-1,lo=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function WA(t){return t instanceof lo}function KA(t){return(t.flags&8)!==0}function QA(t){return(t.flags&16)!==0}function Ew(t){return t!==Fi}function Gc(t){return t&32767}function YA(t){return t>>16}function Wc(t,e){let n=YA(t),r=e;for(;n>0;)r=r[qi],n--;return r}var Sh=!0;function r_(t){let e=Sh;return Sh=t,e}var JA=256,Tw=JA-1,Dw=5,XA=0,tn={};function ZA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(to)&&(r=n[to]),r==null&&(r=n[to]=XA++);let i=r&Tw,s=1<<i;e.data[t+(i>>Dw)]|=s}function bw(t,e){let n=Cw(t,e);if(n!==-1)return n;let r=e[Z];r.firstCreatePass&&(t.injectorIndex=e.length,ah(r.data,t),ah(e,null),ah(r.blueprint,null));let i=Ef(t,e),s=t.injectorIndex;if(Ew(i)){let o=Gc(i),c=Wc(i,e),u=c[Z].data;for(let l=0;l<8;l++)e[s+l]=c[o+l]|u[o+l]}return e[s+8]=i,s}function ah(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Cw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ef(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Mw(i),r===null)return Fi;if(n++,i=i[qi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Fi}function eR(t,e,n){ZA(t,e,n)}function Sw(t,e,n){if(n&te.Optional||t!==void 0)return t;af(e,"NodeInjector")}function Aw(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),!(n&(te.Self|te.Host))){let i=t[Vi],s=Ct(void 0);try{return i?i.get(e,r,n&te.Optional):k_(e,r,n&te.Optional)}finally{Ct(s)}}return Sw(r,e,n)}function Rw(t,e,n,r=te.Default,i){if(t!==null){if(e[H]&2048&&!(r&te.Self)){let o=iR(t,e,n,r,tn);if(o!==tn)return o}let s=Nw(t,e,n,r,tn);if(s!==tn)return s}return Aw(e,n,r,i)}function Nw(t,e,n,r,i){let s=nR(n);if(typeof s=="function"){if(!pw(e,t,r))return r&te.Host?Sw(i,n,r):Aw(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&te.Optional))af(n);else return o}finally{vw()}}else if(typeof s=="number"){let o=null,c=Cw(t,e),u=Fi,l=r&te.Host?e[Rt][Qt]:null;for((c===-1||r&te.SkipSelf)&&(u=c===-1?Ef(t,e):e[c+8],u===Fi||!s_(r,!1)?c=-1:(o=e[Z],c=Gc(u),e=Wc(u,e)));c!==-1;){let f=e[Z];if(i_(s,c,f.data)){let p=tR(c,e,n,o,r,l);if(p!==tn)return p}u=e[c+8],u!==Fi&&s_(r,e[Z].data[c+8]===l)&&i_(s,c,e)?(o=f,c=Gc(u),e=Wc(u,e)):c=-1}}return i}function tR(t,e,n,r,i,s){let o=e[Z],c=o.data[t+8],u=r==null?vo(c)&&Sh:r!=o&&(c.type&3)!==0,l=i&te.Host&&s===c,f=Vc(c,o,n,u,l);return f!==null?Bi(e,o,f,c):tn}function Vc(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,u=t.directiveStart,l=t.directiveEnd,f=s>>20,p=r?c:c+f,y=i?c+f:l;for(let _=p;_<y;_++){let A=o[_];if(_<u&&n===A||_>=u&&A.type===n)return _}if(i){let _=o[u];if(_&&Io(_)&&_.type===n)return u}return null}function Bi(t,e,n,r){let i=t[n],s=e.data;if(WA(i)){let o=i;o.resolving&&MS(NS(s[n]));let c=r_(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Ct(o.injectImpl):null,f=pw(t,r,te.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&zA(n,s[n],e)}finally{l!==null&&Ct(l),r_(c),o.resolving=!1,vw()}}return i}function nR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(to)?t[to]:void 0;return typeof e=="number"?e>=0?e&Tw:rR:e}function i_(t,e,n){let r=1<<t;return!!(n[e+(t>>Dw)]&r)}function s_(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var Nr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Rw(this._tNode,this._lView,e,cu(r),n)}};function rR(){return new Nr(Mt(),Te())}function Tf(t){return mo(()=>{let e=t.prototype.constructor,n=e[Bc]||Ah(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Bc]||Ah(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ah(t){return A_(t)?()=>{let e=Ah(St(t));return e&&e()}:Li(t)}function iR(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[H]&2048&&!(o[H]&512);){let c=Nw(s,o,n,r|te.Self,tn);if(c!==tn)return c;let u=s.parent;if(!u){let l=o[X_];if(l){let f=l.get(n,tn,r);if(f!==tn)return f}u=Mw(o),o=o[qi]}s=u}return i}function Mw(t){let e=t[Z],n=e.type;return n===2?e.declTNode:n===1?t[Qt]:null}function o_(t,e=null,n=null,r){let i=xw(t,e,n,r);return i.resolveInjectorInitializers(),i}function xw(t,e=null,n=null,r,i=new Set){let s=[n||$t,sA(t)];return r=r||(typeof t=="object"?void 0:ct(t)),new io(s,e||hf(),r||null,i)}var Jt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return o_({name:""},i,r,"");{let s=r.name??"";return o_({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=no,e.NULL=new Hc,e.\u0275prov=$({token:e,providedIn:"any",factory:()=>se(U_)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var sR="ngOriginalError";function ch(t){return t[sR]}var Rn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ch(e);for(;n&&ch(n);)n=ch(n);return n||null}},Pw=new K("",{providedIn:"root",factory:()=>x(Rn).handleError.bind(void 0)}),Ow=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=oR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Rh=class extends Ow{constructor(e){super(),this._lView=e}onDestroy(e){return aw(this._lView,e),()=>NA(this._lView,e)}};function oR(){return new Rh(Te())}function aR(){return zi(Mt(),Te())}function zi(t,e){return new tr(Nt(t,e))}var tr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=aR;let t=e;return t})();function cR(t){return t instanceof tr?t.nativeElement:t}var Nh=class extends it{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,mA()&&(this.destroyRef=x(Ow,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=uh(s),i&&(i=uh(i)),o&&(o=uh(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Me&&e.add(c),c}};function uh(t){return e=>{setTimeout(t,void 0,e)}}var at=Nh;function uR(){return this._results[Symbol.iterator]()}var Mh=class t{get changes(){return this._changes??=new at}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=uR)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=$S(e);(this._changesDetected=!BS(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},lR="ngSkipHydration",dR="ngskiphydration";function kw(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===dR)return!0}return!1}function Fw(t){return t.hasAttribute(lR)}function Kc(t){return(t.flags&128)===128}function hR(t){if(Kc(t))return!0;let e=t.parent;for(;e;){if(Kc(t)||kw(e))return!0;e=e.parent}return!1}var Lw=new Map,fR=0;function pR(){return fR++}function gR(t){Lw.set(t[du],t)}function mR(t){Lw.delete(t[du])}var a_="__ngContext__";function Yn(t,e){bn(e)?(t[a_]=e[du],gR(e)):t[a_]=e}function Vw(t){return jw(t[oo])}function Uw(t){return jw(t[qt])}function jw(t){for(;t!==null&&!sn(t);)t=t[qt];return t}var xh;function Bw(t){xh=t}function gu(){if(xh!==void 0)return xh;if(typeof document<"u")return document;throw new q(210,!1)}var mu=new K("",{providedIn:"root",factory:()=>yR}),yR="ng",Df=new K(""),xt=new K("",{providedIn:"platform",factory:()=>"unknown"});var bf=new K("",{providedIn:"root",factory:()=>gu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function vR(){let t=new Vr;return x(xt)==="browser"&&(t.store=IR(gu(),x(mu))),t}var Vr=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=$({token:e,providedIn:"root",factory:vR});let t=e;return t})();function IR(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var $w="h",qw="b",Ph=function(t){return t.FirstChild="f",t.NextSibling="n",t}(Ph||{}),_R="e",wR="t",Cf="c",Hw="x",Qc="r",ER="i",TR="n",DR="d",bR="__nghData__",zw=bR,lh="ngh",CR="nghm",Gw=()=>null;function SR(t,e,n=!1){let r=t.getAttribute(lh);if(r==null)return null;let[i,s]=r.split("|");if(r=n?s:i,!r)return null;let o=s?`|${s}`:"",c=n?i:o,u={};if(r!==""){let f=e.get(Vr,null,{optional:!0});f!==null&&(u=f.get(zw,[])[Number(r)])}let l={data:u,firstChild:t.firstChild??null};return n&&(l.firstChild=t,yu(l,0,t.nextSibling)),c?t.setAttribute(lh,c):t.removeAttribute(lh),l}function AR(){Gw=SR}function Sf(t,e,n=!1){return Gw(t,e,n)}function RR(t){let e=t._lView;return e[Z].type===2?null:(ew(e)&&(e=e[lt]),e)}function NR(t){return t.textContent?.replace(/\s/gm,"")}function MR(t){let e=gu(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=NR(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function yu(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function Oh(t,e){return t.segmentHeads?.[e]??null}function xR(t,e){let n=t.data,r=n[_R]?.[e]??null;return r===null&&n[Cf]?.[e]&&(r=Af(t,e)),r}function Ww(t,e){return t.data[Cf]?.[e]??null}function Af(t,e){let n=Ww(t,e)??[],r=0;for(let i of n)r+=i[Qc]*(i[Hw]??1);return r}function vu(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[DR];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var xc=new K(""),Kw=!1,Qw=new K("",{providedIn:"root",factory:()=>Kw}),PR=new K("");var OR=/^>|^->|<!--|-->|--!>|<!-$/g,kR=/(<|>)/g,FR="\u200B$1\u200B";function LR(t){return t.replace(OR,e=>e.replace(kR,FR))}function VR(t){return t.ownerDocument.body}function Yw(t){return t instanceof Function?t():t}function Pc(t){return(t??x(Jt)).get(xt)==="browser"}var Ur=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ur||{}),UR;function Rf(t,e){return UR(t,e)}function Oi(t,e,n,r,i){if(r!=null){let s,o=!1;sn(r)?s=r:bn(r)&&(o=!0,r=r[yt]);let c=Gt(r);t===0&&n!==null?i==null?eE(e,n,c):Yc(e,n,c,i||null,!0):t===1&&n!==null?Yc(e,n,c,i||null,!0):t===2?Pf(e,c,o):t===3&&e.destroyNode(c),s!=null&&nN(e,t,s,n,i)}}function Nf(t,e){return t.createText(e)}function jR(t,e,n){t.setValue(e,n)}function Mf(t,e){return t.createComment(LR(e))}function Iu(t,e,n){return t.createElement(e,n)}function BR(t,e){Jw(t,e),e[yt]=null,e[Qt]=null}function $R(t,e,n,r,i,s){r[yt]=i,r[Qt]=e,wu(t,r,n,1,i,s)}function Jw(t,e){e[rn].changeDetectionScheduler?.notify(1),wu(t,e,e[Pe],2,null,null)}function qR(t){let e=t[oo];if(!e)return dh(t[Z],t);for(;e;){let n=null;if(bn(e))n=e[oo];else{let r=e[ut];r&&(n=r)}if(!n){for(;e&&!e[qt]&&e!==t;)bn(e)&&dh(e[Z],e),e=e[je];e===null&&(e=t),bn(e)&&dh(e[Z],e),n=e&&e[qt]}e=n}}function HR(t,e,n,r){let i=ut+r,s=n.length;r>0&&(n[i-1][qt]=e),r<s-ut?(e[qt]=n[i],V_(n,ut+r,e)):(n.push(e),e[qt]=null),e[je]=n;let o=e[yo];o!==null&&n!==o&&zR(o,e);let c=e[Sn];c!==null&&c.insertView(t),bh(e),e[H]|=128}function zR(t,e){let n=t[Ui],i=e[je][je][Rt];e[Rt]!==i&&(t[H]|=ff.HasTransplantedViews),n===null?t[Ui]=[e]:n.push(e)}function Xw(t,e){let n=t[Ui],r=n.indexOf(e);n.splice(r,1)}function kh(t,e){if(t.length<=ut)return;let n=ut+e,r=t[n];if(r){let i=r[yo];i!==null&&i!==t&&Xw(i,r),e>0&&(t[n-1][qt]=r[qt]);let s=qc(t,ut+e);BR(r[Z],r);let o=s[Sn];o!==null&&o.detachView(s[Z]),r[je]=null,r[qt]=null,r[H]&=-129}return r}function Zw(t,e){if(!(e[H]&256)){let n=e[Pe];n.destroyNode&&wu(t,e,n,3,null,null),qR(e)}}function dh(t,e){if(e[H]&256)return;let n=he(null);try{e[H]&=-129,e[H]|=256,e[Pr]&&lI(e[Pr]),WR(t,e),GR(t,e),e[Z].type===1&&e[Pe].destroy();let r=e[yo];if(r!==null&&sn(e[je])){r!==e[je]&&Xw(r,e);let i=e[Sn];i!==null&&i.detachView(t)}mR(e)}finally{he(n)}}function GR(t,e){let n=t.cleanup,r=e[so];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[so]=null);let i=e[Qn];if(i!==null){e[Qn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function WR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof lo)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];en(4,c,u);try{u.call(c)}finally{en(5,c,u)}}else{en(4,i,s);try{s.call(i)}finally{en(5,i,s)}}}}}function KR(t,e,n){return QR(t,e.parent,n)}function QR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[yt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===nn.None||s===nn.Emulated)return null}return Nt(r,n)}}function Yc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function eE(t,e,n){t.appendChild(e,n)}function c_(t,e,n,r,i){r!==null?Yc(t,e,n,r,i):eE(t,e,n)}function YR(t,e,n,r){t.removeChild(e,n,r)}function xf(t,e){return t.parentNode(e)}function JR(t,e){return t.nextSibling(e)}function XR(t,e,n){return eN(t,e,n)}function ZR(t,e,n){return t.type&40?Nt(t,n):null}var eN=ZR,u_;function _u(t,e,n,r){let i=KR(t,r,e),s=e[Pe],o=r.parent||e[Qt],c=XR(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)c_(s,i,n[u],c,!1);else c_(s,i,n,c,!1);u_!==void 0&&u_(s,r,e,n,i)}function Uc(t,e){if(e!==null){let n=e.type;if(n&3)return Nt(e,t);if(n&4)return Fh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Uc(t,r);{let i=t[e.index];return sn(i)?Fh(-1,i):Gt(i)}}else{if(n&32)return Rf(e,t)()||Gt(t[e.index]);{let r=tE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=uo(t[Rt]);return Uc(i,r)}else return Uc(t,e.next)}}}return null}function tE(t,e){if(e!==null){let r=t[Rt][Qt],i=e.projection;return r.projection[i]}return null}function Fh(t,e){let n=ut+t+1;if(n<e.length){let r=e[n],i=r[Z].firstChild;if(i!==null)return Uc(r,i)}return e[An]}function Pf(t,e,n){let r=xf(t,e);r&&YR(t,r,e,n)}function nE(t){t.textContent=""}function Of(t,e,n,r,i,s,o){for(;n!=null;){let c=r[n.index],u=n.type;if(o&&e===0&&(c&&Yn(Gt(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Of(t,e,n.child,r,i,s,!1),Oi(e,t,i,c,s);else if(u&32){let l=Rf(n,r),f;for(;f=l();)Oi(e,t,i,f,s);Oi(e,t,i,c,s)}else u&16?tN(t,e,r,n,i,s):Oi(e,t,i,c,s);n=o?n.projectionNext:n.next}}function wu(t,e,n,r,i,s){Of(n,r,t.firstChild,e,i,s,!1)}function tN(t,e,n,r,i,s){let o=n[Rt],u=o[Qt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Oi(e,t,i,f,s)}else{let l=u,f=o[je];Kc(r)&&(l.flags|=128),Of(t,e,l,f,i,s,!0)}}function nN(t,e,n,r,i){let s=n[An],o=Gt(n);s!==o&&Oi(e,t,r,s,i);for(let c=ut;c<n.length;c++){let u=n[c];wu(u[Z],u,t,e,r,s)}}function rN(t,e,n){t.setAttribute(e,"style",n)}function rE(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function iE(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Ih(t,e,r),i!==null&&rE(t,e,i),s!==null&&rN(t,e,s)}var To={};function Xe(t=1){sE(Yt(),Te(),wf()+t,!1)}function sE(t,e,n,r){if(!r)if((e[H]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Fc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Lc(e,s,0,n)}Or(n)}function an(t,e=te.Default){let n=Te();if(n===null)return se(t,e);let r=Mt();return Rw(r,n,St(t),e)}function oE(t,e,n,r,i,s){let o=he(null);try{let c=null;i&Cn.SignalBased&&(c=e[r][$n]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&Cn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,c,s,n,r):tw(e,c,r,s)}finally{he(o)}}function iN(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Or(~i);else{let s=i,o=n[++r],c=n[++r];jA(o,s);let u=e[s];c(2,u)}}}finally{Or(-1)}}function Eu(t,e,n,r,i,s,o,c,u,l,f){let p=e.blueprint.slice();return p[yt]=i,p[H]=r|4|128|8|64,(l!==null||t&&t[H]&2048)&&(p[H]|=2048),ow(p),p[je]=p[qi]=t,p[zt]=n,p[rn]=o||t&&t[rn],p[Pe]=c||t&&t[Pe],p[Vi]=u||t&&t[Vi]||null,p[Qt]=s,p[du]=pR(),p[Ht]=f,p[X_]=l,p[Rt]=e.type==2?t[Rt]:p,p}function Do(t,e,n,r,i){let s=t.data[e];if(s===null)s=sN(t,e,n,r,i),UA()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=LA();s.injectorIndex=o===null?-1:o.injectorIndex}return Lr(s,!0),s}function sN(t,e,n,r,i){let s=uw(),o=yf(),c=o?s:s&&s.parent,u=t.data[e]=hN(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function aE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function cE(t,e,n,r,i){let s=wf(),o=r&2;try{Or(-1),o&&e.length>lt&&sE(t,e,lt,!1),en(o?2:0,i),n(r,i)}finally{Or(s),en(o?3:1,i)}}function kf(t,e,n){if(pf(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let u=n[o];c.contentQueries(1,u,o)}}}finally{he(r)}}}function Ff(t,e,n){cw()&&(IN(t,e,n,Nt(n,e)),(n.flags&64)===64&&hE(t,e,n))}function Lf(t,e,n=Nt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function uE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Vf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Vf(t,e,n,r,i,s,o,c,u,l,f){let p=lt+r,y=p+i,_=oN(p,y),A=typeof l=="function"?l():l;return _[Z]={type:t,blueprint:_,template:n,queries:null,viewQuery:c,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}function oN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:To);return n}function aN(t,e,n,r){let s=r.get(Qw,Kw)||n===nn.ShadowDom,o=t.selectRootElement(e,s);return cN(o),o}function cN(t){lE(t)}var lE=()=>null;function uN(t){Fw(t)?nE(t):MR(t)}function lN(){lE=uN}function dN(t,e,n,r){let i=gE(e);i.push(n),t.firstCreatePass&&mE(t).push(r,i.length-1)}function hN(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return _o()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function l_(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=Cn.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?d_(r,n,l,c,u):d_(r,n,l,c)}return r}function d_(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function fN(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,c=[],u=null,l=null;for(let f=r;f<i;f++){let p=s[f],y=n?n.get(p):null,_=y?y.inputs:null,A=y?y.outputs:null;u=l_(0,p.inputs,f,u,_),l=l_(1,p.outputs,f,l,A);let N=u!==null&&o!==null&&!lf(e)?AN(u,f,o):null;c.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=l}function pN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function gN(t,e,n,r,i,s,o,c){let u=Nt(e,n),l=e.inputs,f;!c&&l!=null&&(f=l[r])?(jf(t,n,f,r,i),vo(e)&&mN(n,e.index)):e.type&3?(r=pN(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function mN(t,e){let n=er(e,t);n[H]&16||(n[H]|=64)}function Uf(t,e,n,r){if(cw()){let i=r===null?null:{"":-1},s=wN(t,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&dE(t,e,n,o,i,c),i&&EN(n,r,i)}n.mergedAttrs=uf(n.mergedAttrs,n.attrs)}function dE(t,e,n,r,i,s){for(let l=0;l<r.length;l++)eR(bw(n,e),t,r[l].type);DN(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let o=!1,c=!1,u=aE(t,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];n.mergedAttrs=uf(n.mergedAttrs,f.hostAttrs),bN(t,n,e,u,f),TN(u,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}fN(t,n,s)}function yN(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;vN(o)!=c&&o.push(c),o.push(n,r,s)}}function vN(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function IN(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;vo(n)&&CN(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||bw(n,e),Yn(r,e);let o=n.initialInputs;for(let c=i;c<s;c++){let u=t.data[c],l=Bi(e,t,c,n);if(Yn(l,e),o!==null&&SN(e,c-i,l,u,n,o),Io(u)){let f=er(n.index,e);f[zt]=Bi(e,t,c,n)}}}function hE(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=BA();try{Or(s);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Ch(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&_N(u,l)}}finally{Or(-1),Ch(o)}}function _N(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function wN(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(YS(e,o.selectors,!1))if(r||(r=[]),Io(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;Lh(t,e,u)}else r.unshift(o),Lh(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Lh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function EN(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new q(-301,!1);r.push(e[i],s)}}}function TN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Io(e)&&(n[""]=t)}}function DN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function bN(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Li(i.type,!0)),o=new lo(s,Io(i),an);t.blueprint[r]=o,n[r]=o,yN(t,e,r,aE(t,n,i.hostVars,To),i)}function CN(t,e,n){let r=Nt(e,t),i=uE(n),s=t[rn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=Tu(t,Eu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=c}function SN(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],l=o[c++],f=o[c++],p=o[c++];oE(r,n,u,l,f,p)}}function AN(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function fE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function pE(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];vf(s),c.contentQueries(2,e[o],o)}}}finally{he(r)}}}function Tu(t,e){return t[oo]?t[e_][qt]=e:t[oo]=e,t[e_]=e,e}function Vh(t,e,n){vf(0);let r=he(null);try{e(t,n)}finally{he(r)}}function gE(t){return t[so]||(t[so]=[])}function mE(t){return t.cleanup||(t.cleanup=[])}function yE(t,e){let n=t[Vi],r=n?n.get(Rn,null):null;r&&r.handleError(e)}function jf(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],u=n[s++],l=e[o],f=t.data[o];oE(f,l,r,c,u,i)}}function RN(t,e,n){let r=bA(e,t);jR(t[Pe],r,n)}function NN(t,e){let n=er(e,t),r=n[Z];MN(r,n);let i=n[yt];i!==null&&n[Ht]===null&&(n[Ht]=Sf(i,n[Vi])),Bf(r,n,n[zt])}function MN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Bf(t,e,n){If(e);try{let r=t.viewQuery;r!==null&&Vh(1,r,n);let i=t.template;i!==null&&cE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Sn]?.finishViewCreation(t),t.staticContentQueries&&pE(t,e),t.staticViewQueries&&Vh(2,t.viewQuery,n);let s=t.components;s!==null&&xN(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[H]&=-5,_f()}}function xN(t,e){for(let n=0;n<e.length;n++)NN(t,e[n])}function PN(t,e,n,r){let i=he(null);try{let s=e.tView,c=t[H]&4096?4096:16,u=Eu(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[yo]=l;let f=t[Sn];return f!==null&&(u[Sn]=f.createEmbeddedView(s)),Bf(s,u,n),u}finally{he(i)}}function h_(t,e){return!e||e.firstChild===null||Kc(t)}function ON(t,e,n,r=!0){let i=e[Z];if(HR(i,e,t,n),r){let o=Fh(n,t),c=e[Pe],u=xf(c,t[An]);u!==null&&$R(i,t[Qt],c,e,u,o)}let s=e[Ht];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Jc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Gt(s)),sn(s)&&kN(s,r);let o=n.type;if(o&8)Jc(t,e,n.child,r);else if(o&32){let c=Rf(n,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=tE(e,n);if(Array.isArray(c))r.push(...c);else{let u=uo(e[Rt]);Jc(u[Z],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function kN(t,e){for(let n=ut;n<t.length;n++){let r=t[n],i=r[Z].firstChild;i!==null&&Jc(r[Z],r,i,e)}t[An]!==t[yt]&&e.push(t[An])}var vE=[];function FN(t){return t[Pr]??LN(t)}function LN(t){let e=vE.pop()??Object.create(UN);return e.lView=t,e}function VN(t){t.lView[Pr]!==t&&(t.lView=null,vE.push(t))}var UN=me(F({},tc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{co(t.lView)},consumerOnSignalRead(){this.lView[Pr]=this}}),IE=100;function _E(t,e=!0,n=0){let r=t[rn],i=r.rendererFactory,s=!1;s||i.begin?.();try{jN(t,n)}catch(o){throw e&&yE(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function jN(t,e){Uh(t,e);let n=0;for(;mf(t);){if(n===IE)throw new q(103,!1);n++,Uh(t,1)}}function BN(t,e,n,r){let i=e[H];if((i&256)===256)return;let s=!1;!s&&e[rn].inlineEffectRunner?.flush(),If(e);let o=null,c=null;!s&&$N(t)&&(c=FN(e),o=Fd(c));try{ow(e),VA(t.bindingStartIndex),n!==null&&cE(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&Fc(e,p,null)}else{let p=t.preOrderHooks;p!==null&&Lc(e,p,0,null),oh(e,0)}if(qN(e),wE(e,0),t.contentQueries!==null&&pE(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&Fc(e,p)}else{let p=t.contentHooks;p!==null&&Lc(e,p,1),oh(e,1)}iN(t,e);let l=t.components;l!==null&&TE(e,l,0);let f=t.viewQuery;if(f!==null&&Vh(2,f,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&Fc(e,p)}else{let p=t.viewHooks;p!==null&&Lc(e,p,2),oh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[sh]){for(let p of e[sh])p();e[sh]=null}s||(e[H]&=-73)}catch(u){throw co(e),u}finally{c!==null&&(Ld(c,o),VN(c)),_f()}}function $N(t){return t.type!==2}function wE(t,e){for(let n=Vw(t);n!==null;n=Uw(n))for(let r=ut;r<n.length;r++){let i=n[r];EE(i,e)}}function qN(t){for(let e=Vw(t);e!==null;e=Uw(e)){if(!(e[H]&ff.HasTransplantedViews))continue;let n=e[Ui];for(let r=0;r<n.length;r++){let i=n[r],s=i[je];AA(i)}}}function HN(t,e,n){let r=er(e,t);EE(r,n)}function EE(t,e){gf(t)&&Uh(t,e)}function Uh(t,e){let r=t[Z],i=t[H],s=t[Pr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Vd(s)),s&&(s.dirty=!1),t[H]&=-9217,o)BN(r,t,r.template,t[zt]);else if(i&8192){wE(t,1);let c=r.components;c!==null&&TE(t,c,1)}}function TE(t,e,n){for(let r=0;r<e.length;r++)HN(t,e[r],n)}function $f(t){for(t[rn].changeDetectionScheduler?.notify();t;){t[H]|=64;let e=uo(t);if(ew(t)&&!e)return t;t=e}return null}var kr=class{get rootNodes(){let e=this._lView,n=e[Z];return Jc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zt]}set context(e){this._lView[zt]=e}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[je];if(sn(e)){let n=e[zc],r=n?n.indexOf(this):-1;r>-1&&(kh(e,r),qc(n,r))}this._attachedToViewContainer=!1}Zw(this._lView[Z],this._lView)}onDestroy(e){aw(this._lView,e)}markForCheck(){$f(this._cdRefInjectingView||this._lView)}detach(){this._lView[H]&=-129}reattach(){bh(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,_E(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Jw(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e,bh(this._lView)}},Fr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=WN;let t=e;return t})(),zN=Fr,GN=class extends zN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=PN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new kr(i)}};function WN(){return qf(Mt(),Te())}function qf(t,e){return t.type&4?new GN(e,t,zi(t,e)):null}function DE(t){let e=t[ao]??[],r=t[je][Pe];for(let i of e)KN(i,r);t[ao]=$t}function KN(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Qc];for(;n<i;){let s=r.nextSibling;Pf(e,r,!1),r=s,n++}}}function bE(t){DE(t);for(let e=ut;e<t.length;e++)Xc(t[e])}function QN(t){let e=t[Ht]?.i18nNodes;if(e){let n=t[Pe];for(let r of e.values())Pf(n,r,!1);t[Ht].i18nNodes=void 0}}function Xc(t){QN(t);let e=t[Z];for(let n=lt;n<e.bindingStartIndex;n++)if(sn(t[n])){let r=t[n];bE(r)}else bn(t[n])&&Xc(t[n])}function YN(t){let e=t._views;for(let n of e){let r=RR(n);if(r!==null&&r[yt]!==null)if(bn(r))Xc(r);else{let i=r[yt];Xc(i),bE(r)}}}var JN=new RegExp(`^(\\d+)*(${qw}|${$w})*(.*)`);function XN(t){let e=t.match(JN),[n,r,i,s]=e,o=r?parseInt(r,10):i,c=[];for(let[u,l,f]of s.matchAll(/(f|n)(\d*)/g)){let p=parseInt(f,10)||1;c.push(l,p)}return[o,...c]}function ZN(t){return!t.prev&&t.parent?.type===8}function hh(t){return t.index-lt}function eM(t,e){let n=t.i18nNodes;if(n){let r=n.get(e);return r&&n.delete(e),r}return null}function Du(t,e,n,r){let i=hh(r),s=eM(t,i);if(!s){let o=t.data[TR];if(o?.[i])s=nM(o[i],n);else if(e.firstChild===r)s=t.firstChild;else{let c=r.prev===null,u=r.prev??r.parent;if(ZN(r)){let l=hh(r.parent);s=Oh(t,l)}else{let l=Nt(u,n);if(c)s=l.firstChild;else{let f=hh(u),p=Oh(t,f);if(u.type===2&&p){let _=Af(t,f)+1;s=bu(_,p)}else s=l.nextSibling}}}}return s}function bu(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function tM(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case Ph.FirstChild:n=n.firstChild;break;case Ph.NextSibling:n=n.nextSibling;break}}return n}function nM(t,e){let[n,...r]=XN(t),i;if(n===$w)i=e[Rt][yt];else if(n===qw)i=VR(e[Rt][yt]);else{let s=Number(n);i=Gt(e[s+lt])}return tM(i,r)}function rM(t,e){let n=[];for(let r of e)for(let i=0;i<(r[Hw]??1);i++){let s={data:r,firstChild:null};r[Qc]>0&&(s.firstChild=t,t=bu(r[Qc],t)),n.push(s)}return[t,n]}var CE=()=>null;function iM(t,e){let n=t[ao];return!e||n===null||n.length===0?null:n[0].data[ER]===e?n.shift():(DE(t),null)}function sM(){CE=iM}function f_(t,e){return CE(t,e)}var jh=class{},Bh=class{},Zc=class{};function oM(t){let e=Error(`No component factory found for ${ct(t)}.`);return e[aM]=t,e}var aM="ngComponent";var $h=class{resolveComponentFactory(e){throw oM(e)}},Cu=(()=>{let e=class e{};e.NULL=new $h;let t=e;return t})(),ho=class{},Su=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>cM();let t=e;return t})();function cM(){let t=Te(),e=Mt(),n=er(e.index,t);return(bn(n)?n:t)[Pe]}var uM=(()=>{let e=class e{};e.\u0275prov=$({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),fh={};var p_=new Set;function jr(t){p_.has(t)||(p_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function g_(...t){}function lM(){let t=typeof eo.requestAnimationFrame=="function",e=eo[t?"requestAnimationFrame":"setTimeout"],n=eo[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ve=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new at(!1),this.onMicrotaskEmpty=new at(!1),this.onStable=new at(!1),this.onError=new at(!1),typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=lM().nativeRequestAnimationFrame,fM(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,dM,g_,g_);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dM={};function Hf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hM(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(eo,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,qh(t),t.isCheckStableRunning=!0,Hf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),qh(t))}function fM(t){let e=()=>{hM(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,c)=>{if(pM(c))return n.invokeTask(i,s,o,c);try{return m_(t),n.invokeTask(i,s,o,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),y_(t)}},onInvoke:(n,r,i,s,o,c,u)=>{try{return m_(t),n.invoke(i,s,o,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),y_(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,qh(t),Hf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function qh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function m_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function y_(t){t._nesting--,Hf(t)}function pM(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var SE=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=$({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function eu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=HI(i,c);else if(s==2){let u=c,l=e[++o];r=HI(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var tu=class extends Cu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=xr(e);return new fo(n,this.ngModule)}};function v_(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function gM(t){let e=t.toLowerCase();return e==="svg"?wA:e==="math"?EA:null}var Hh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=cu(r);let i=this.injector.get(e,fh,r);return i!==fh||n===fh?i:this.parentInjector.get(e,n,r)}},fo=class extends Zc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=v_(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return v_(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=eA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof At?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new Hh(e,o):e,u=c.get(ho,null);if(u===null)throw new q(407,!1);let l=c.get(uM,null),f=c.get(SE,null),p=c.get(jh,null),y={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:p},_=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",N=r?aN(_,r,this.componentDef.encapsulation,c):Iu(_,A,gM(A)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let k=null;N!==null&&(k=Sf(N,c,!0));let B=Vf(0,null,null,1,0,null,null,null,null,null,null),U=Eu(null,B,null,R,null,null,y,_,c,null,k);If(U);let ce,Ce;try{let J=this.componentDef,E,m=null;J.findHostDirectiveDefs?(E=[],m=new Map,J.findHostDirectiveDefs(J,E,m),E.push(J)):E=[J];let v=mM(U,N),w=yM(v,N,J,E,U,y,_);Ce=sw(B,lt),N&&_M(_,J,N,r),n!==void 0&&wM(Ce,this.ngContentSelectors,n),ce=IM(w,J,E,m,U,[EM]),Bf(B,U,null)}finally{_f()}return new zh(this.componentType,ce,zi(Ce,U),U,Ce)}finally{he(s)}}},zh=class extends Bh{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new kr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;jf(s[Z],s,i,e,n),this.previousInputValues.set(e,n);let o=er(this._tNode.index,s);$f(o)}}get injector(){return new Nr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function mM(t,e){let n=t[Z],r=lt;return t[r]=e,Do(n,r,2,"#host",null)}function yM(t,e,n,r,i,s,o){let c=i[Z];vM(r,t,e,o);let u=null;e!==null&&(u=Sf(e,i[Vi]));let l=s.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let p=Eu(i,uE(n),null,f,i[t.index],t,s,l,null,null,u);return c.firstCreatePass&&Lh(c,t,r.length-1),Tu(i,p),i[t.index]=p}function vM(t,e,n,r){for(let i of t)e.mergedAttrs=uf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(eu(e,e.mergedAttrs,!0),n!==null&&iE(r,n,e))}function IM(t,e,n,r,i,s){let o=Mt(),c=i[Z],u=Nt(o,i);dE(c,i,o,n,null,r);for(let f=0;f<n.length;f++){let p=o.directiveStart+f,y=Bi(i,c,p,o);Yn(y,i)}hE(c,i,o),u&&Yn(u,i);let l=Bi(i,c,o.directiveStart+o.componentOffset,o);if(t[zt]=i[zt]=l,s!==null)for(let f of s)f(l,e);return kf(c,o,i),l}function _M(t,e,n,r){if(r)Ih(t,n,["ng-version","17.3.11"]);else{let{attrs:i,classes:s}=tA(e.selectors[0]);i&&Ih(t,n,i),s&&s.length>0&&rE(t,n,s.join(" "))}}function wM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function EM(){let t=Mt();pu(Te()[Z],t)}var nr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=TM;let t=e;return t})();function TM(){let t=Mt();return RE(t,Te())}var DM=nr,AE=class extends DM{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return zi(this._hostTNode,this._hostLView)}get injector(){return new Nr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ef(this._hostTNode,this._hostLView);if(Ew(e)){let n=Wc(e,this._hostLView),r=Gc(e),i=n[Z].data[r+8];return new Nr(i,n)}else return new Nr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=I_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ut}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=f_(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,h_(this._hostTNode,o)),c}createComponent(e,n,r,i,s){let o=e&&!yA(e),c;if(o)c=n;else{let A=n||{};c=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new fo(xr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(At,null);N&&(s=N)}let f=xr(u.componentType??{}),p=f_(this._lContainer,f?.id??null),y=p?.firstChild??null,_=u.create(l,i,y,s);return this.insertImpl(_.hostView,c,h_(this._hostTNode,p)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(SA(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[je],l=new AE(u,u[Qt],u[je]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return ON(o,i,s,r),e.attachToViewContainerRef(),V_(ph(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=I_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=kh(this._lContainer,n);r&&(qc(ph(this._lContainer),n),Zw(r[Z],r))}detach(e){let n=this._adjustIndex(e,-1),r=kh(this._lContainer,n);return r&&qc(ph(this._lContainer),n)!=null?new kr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function I_(t){return t[zc]}function ph(t){return t[zc]||(t[zc]=[])}function RE(t,e){let n,r=e[t.index];return sn(r)?n=r:(n=fE(r,e,null,t),e[t.index]=n,Tu(e,n)),NE(n,e,t,r),new AE(n,t,e)}function bM(t,e){let n=t[Pe],r=n.createComment(""),i=Nt(e,t),s=xf(n,i);return Yc(n,s,r,JR(n,i),!1),r}var NE=ME,zf=()=>!1;function CM(t,e,n){return zf(t,e,n)}function ME(t,e,n,r){if(t[An])return;let i;n.type&8?i=Gt(r):i=bM(e,n),t[An]=i}function SM(t,e,n){if(t[An]&&t[ao])return!0;let r=n[Ht],i=e.index-lt;if(!r||hR(e)||vu(r,i))return!1;let o=Oh(r,i),c=r.data[Cf]?.[i],[u,l]=rM(o,c);return t[An]=u,t[ao]=l,!0}function AM(t,e,n,r){zf(t,n,e)||ME(t,e,n,r)}function RM(){NE=AM,zf=SM}var Gh=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Wh=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),c=this.queries[o.indexInDeclarationView];i.push(c.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Gf(e,n).matches!==null&&this.queries[n].setDirty()}},Kh=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=LM(e):this.predicate=e}},Qh=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Yh=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,NM(n,s)),this.matchTNodeWithReadOption(e,n,Vc(n,e,s,!1,!1))}else r===Fr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Vc(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===tr||i===nr||i===Fr&&n.type&4)this.addMatch(n.index,-2);else{let s=Vc(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function NM(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function MM(t,e){return t.type&11?zi(t,e):t.type&4?qf(t,e):null}function xM(t,e,n,r){return n===-1?MM(e,t):n===-2?PM(t,e,r):Bi(t,t[Z],n,e)}function PM(t,e,n){if(n===tr)return zi(e,t);if(n===Fr)return qf(e,t);if(n===nr)return RE(e,t)}function xE(t,e,n,r){let i=e[Sn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,c=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)c.push(null);else{let f=s[l];c.push(xM(e,f,o[u+1],n.metadata.read))}}i.matches=c}return i.matches}function Jh(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=xE(t,e,i,n);for(let c=0;c<s.length;c+=2){let u=s[c];if(u>0)r.push(o[c/2]);else{let l=s[c+1],f=e[-u];for(let p=ut;p<f.length;p++){let y=f[p];y[yo]===y[je]&&Jh(y[Z],y,l,r)}if(f[Ui]!==null){let p=f[Ui];for(let y=0;y<p.length;y++){let _=p[y];Jh(_[Z],_,l,r)}}}}}return r}function OM(t,e){return t[Sn].queries[e].queryList}function kM(t,e,n){let r=new Mh((n&4)===4);return dN(t,e,r,r.destroy),(e[Sn]??=new Wh).queries.push(new Gh(r))-1}function FM(t,e,n){let r=Yt();return r.firstCreatePass&&(VM(r,new Kh(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),kM(r,Te(),e)}function LM(t){return t.split(",").map(e=>e.trim())}function VM(t,e,n){t.queries===null&&(t.queries=new Qh),t.queries.track(new Yh(e,n))}function Gf(t,e){return t.queries.getByIndex(e)}function UM(t,e){let n=t[Z],r=Gf(n,e);return r.crossesNgTemplate?Jh(n,t,e,[]):xE(n,t,r,e)}function Wf(t,e){jr("NgSignals");let n=yI(t),r=n[$n];return e?.equal&&(r.equal=e.equal),n.set=i=>Ud(r,i),n.update=i=>vI(r,i),n.asReadonly=jM.bind(n),n}function jM(){let t=this[$n];if(t.readonlyFn===void 0){let e=()=>this();e[$n]=t,t.readonlyFn=e}return t.readonlyFn}var Jn=class{},po=class{};var Xh=class extends Jn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tu(this);let i=G_(e);this._bootstrapComponents=Yw(i.bootstrap),this._r3Injector=xw(e,n,[{provide:Jn,useValue:this},{provide:Cu,useValue:this.componentFactoryResolver},...r],ct(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zh=class extends po{constructor(e){super(),this.moduleType=e}create(e){return new Xh(this.moduleType,e,[])}};var nu=class extends Jn{constructor(e){super(),this.componentFactoryResolver=new tu(this),this.instance=null;let n=new io([...e.providers,{provide:Jn,useValue:this},{provide:Cu,useValue:this.componentFactoryResolver}],e.parent||hf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kf(t,e,n=null){return new nu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var bo=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ze(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PE(t){return $M(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function BM(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function $M(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function OE(t,e,n){return t[e]=n}function go(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function qM(t,e,n,r){let i=go(t,e,n);return go(t,e+1,r)||i}function Co(t){return(t.flags&32)===32}function HM(t,e,n,r,i,s,o,c,u){let l=e.consts,f=Do(e,t,4,o||null,ji(l,c));Uf(e,n,f,ji(l,u)),pu(e,f);let p=f.tView=Vf(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function So(t,e,n,r,i,s,o,c){let u=Te(),l=Yt(),f=t+lt,p=l.firstCreatePass?HM(f,l,u,e,n,r,i,s,o):l.data[f];Lr(p,!1);let y=kE(l,u,p,t);fu()&&_u(l,u,y,p),Yn(y,u);let _=fE(y,u,y,p);return u[f]=_,Tu(u,_),CM(_,p,u),hu(p)&&Ff(l,u,p),o!=null&&Lf(u,p,c),So}var kE=FE;function FE(t,e,n,r){return on(!0),e[Pe].createComment("")}function zM(t,e,n,r){let i=e[Ht],s=!i||_o()||Co(n)||vu(i,r);if(on(s),s)return FE(t,e,n,r);let o=i.data[wR]?.[r]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let c=Du(i,t,e,n);yu(i,r,c);let u=Af(i,r);return bu(u,c)}function GM(){kE=zM}function WM(t,e,n,r){return go(t,hw(),n)?e+P_(n)+r:To}function Be(t,e,n){let r=Te(),i=hw();if(go(r,i,e)){let s=Yt(),o=HA();gN(s,o,r,t,e,r[Pe],n,!1)}return Be}function __(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";jf(t,n,s[o],o,r)}function KM(t,e,n,r,i,s){let o=e.consts,c=ji(o,i),u=Do(e,t,2,r,c);return Uf(e,n,u,ji(o,s)),u.attrs!==null&&eu(u,u.attrs,!1),u.mergedAttrs!==null&&eu(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function be(t,e,n,r){let i=Te(),s=Yt(),o=lt+t,c=i[Pe],u=s.firstCreatePass?KM(o,s,i,e,n,r):s.data[o],l=LE(s,i,u,c,e,t);i[o]=l;let f=hu(u);return Lr(u,!0),iE(c,l,u),!Co(u)&&fu()&&_u(s,i,l,u),MA()===0&&Yn(l,i),xA(),f&&(Ff(s,i,u),kf(s,u,i)),r!==null&&Lf(i,u),be}function De(){let t=Mt();yf()?lw():(t=t.parent,Lr(t,!1));let e=t;OA(e)&&FA(),PA();let n=Yt();return n.firstCreatePass&&(pu(n,t),pf(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&KA(e)&&__(n,e,Te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&QA(e)&&__(n,e,Te(),e.stylesWithoutHost,!1),De}function Br(t,e,n,r){return be(t,e,n,r),De(),Br}var LE=(t,e,n,r,i,s)=>(on(!0),Iu(r,i,Iw()));function QM(t,e,n,r,i,s){let o=e[Ht],c=!o||_o()||Co(n)||vu(o,s);if(on(c),c)return Iu(r,i,Iw());let u=Du(o,t,e,n);return Ww(o,s)&&yu(o,s,u.nextSibling),o&&(kw(n)||Fw(u))&&vo(n)&&(kA(n),nE(u)),u}function YM(){LE=QM}function JM(t,e,n,r,i){let s=e.consts,o=ji(s,r),c=Do(e,t,8,"ng-container",o);o!==null&&eu(c,o,!0);let u=ji(s,i);return Uf(e,n,c,u),e.queries!==null&&e.queries.elementStart(e,c),c}function Qf(t,e,n){let r=Te(),i=Yt(),s=t+lt,o=i.firstCreatePass?JM(s,i,r,e,n):i.data[s];Lr(o,!0);let c=VE(i,r,o,t);return r[s]=c,fu()&&_u(i,r,c,o),Yn(c,r),hu(o)&&(Ff(i,r,o),kf(i,o,r)),n!=null&&Lf(r,o),Qf}function Yf(){let t=Mt(),e=Yt();return yf()?lw():(t=t.parent,Lr(t,!1)),e.firstCreatePass&&(pu(e,t),pf(t)&&e.queries.elementEnd(t)),Yf}var VE=(t,e,n,r)=>(on(!0),Mf(e[Pe],""));function XM(t,e,n,r){let i,s=e[Ht],o=!s||_o()||Co(n);if(on(o),o)return Mf(e[Pe],"");let c=Du(s,t,e,n),u=xR(s,r);return yu(s,r,c),i=bu(u,c),i}function ZM(){VE=XM}function Au(){return Te()}var ru="en-US";var ex=ru;function tx(t){typeof t=="string"&&(ex=t.toLowerCase().replace(/_/g,"-"))}function UE(t,e,n){let r=t[Pe];switch(n){case Node.COMMENT_NODE:return Mf(r,e);case Node.TEXT_NODE:return Nf(r,e);case Node.ELEMENT_NODE:return Iu(r,e,null)}}var nx=(t,e,n,r)=>(on(!0),UE(t,n,r));function rx(t,e,n,r){return on(!0),UE(t,n,r)}function ix(){nx=rx}function Ze(t,e,n,r){let i=Te(),s=Yt(),o=Mt();return ox(s,i,i[Pe],o,t,e,r),Ze}function sx(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[so],u=i[s+2];return c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function ox(t,e,n,r,i,s,o){let c=hu(r),l=t.firstCreatePass&&mE(t),f=e[zt],p=gE(e),y=!0;if(r.type&3||o){let N=Nt(r,e),R=o?o(N):N,k=p.length,B=o?ce=>o(Gt(ce[r.index])):r.index,U=null;if(!o&&c&&(U=sx(t,e,i,r.index)),U!==null){let ce=U.__ngLastListenerFn__||U;ce.__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,y=!1}else{s=E_(r,e,f,s,!1);let ce=n.listen(R,i,s);p.push(s,ce),l&&l.push(i,B,k,k+1)}}else s=E_(r,e,f,s,!1);let _=r.outputs,A;if(y&&_!==null&&(A=_[i])){let N=A.length;if(N)for(let R=0;R<N;R+=2){let k=A[R],B=A[R+1],Ce=e[k][B].subscribe(s),J=p.length;p.push(s,Ce),l&&l.push(i,r.index,J,-(J+1))}}}function w_(t,e,n,r){let i=he(null);try{return en(6,e,n),n(r)!==!1}catch(s){return yE(t,s),!1}finally{en(7,e,n),he(i)}}function E_(t,e,n,r,i){return function s(o){if(o===Function)return r;let c=t.componentOffset>-1?er(t.index,e):e;$f(c);let u=w_(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=w_(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function $r(t=1){return qA(t)}function jE(t,e,n){FM(t,e,n)}function Jf(t){let e=Te(),n=Yt(),r=fw();vf(r+1);let i=Gf(n,r);if(t.dirty&&CA(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=UM(e,r);t.reset(s,cR),t.notifyOnChanges()}return!0}return!1}function Xf(){return OM(Te(),fw())}function vt(t,e=""){let n=Te(),r=Yt(),i=t+lt,s=r.firstCreatePass?Do(r,i,1,e,null):r.data[i],o=BE(r,n,s,e,t);n[i]=o,fu()&&_u(r,n,o,s),Lr(s,!1)}var BE=(t,e,n,r,i)=>(on(!0),Nf(e[Pe],r));function ax(t,e,n,r,i){let s=e[Ht],o=!s||_o()||Co(n)||vu(s,i);return on(o),o?Nf(e[Pe],r):Du(s,t,e,n)}function cx(){BE=ax}function Ao(t){return Ru("",t,""),Ao}function Ru(t,e,n){let r=Te(),i=WM(r,t,e,n);return i!==To&&RN(r,wf(),i),Ru}var ux=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Q_(!1,r.type),s=i.length>0?Kf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=$({token:e,providedIn:"environment",factory:()=>new e(se(At))});let t=e;return t})();function ht(t){jr("NgStandalone"),t.getStandaloneInjector=e=>e.get(ux).getOrCreateStandaloneInjector(t)}function qr(t,e,n,r){return lx(Te(),dw(),t,e,n,r)}function $E(t,e,n,r,i){return dx(Te(),dw(),t,e,n,r,i)}function qE(t,e){let n=t[e];return n===To?void 0:n}function lx(t,e,n,r,i,s){let o=e+n;return go(t,o,i)?OE(t,o+1,s?r.call(s,i):r(i)):qE(t,o+1)}function dx(t,e,n,r,i,s,o){let c=e+n;return qM(t,c,i,s)?OE(t,c+2,o?r.call(o,i,s):r(i,s)):qE(t,c+2)}var Xn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},HE=new Xn("17.3.11"),Nu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var zE=new K("");function Ro(t){return!!t&&typeof t.then=="function"}function GE(t){return!!t&&typeof t.subscribe=="function"}var WE=new K(""),KE=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=x(WE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ro(o))r.push(o);else if(GE(o)){let c=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(c)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gi=new K("");function hx(){mI(()=>{throw new q(600,!1)})}function fx(t){return t.isBoundToModule}function px(t,e,n){try{let r=n();return Ro(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var rr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(Pw),this.afterRenderEffectManager=x(SE),this.externalTestViews=new Set,this.beforeRender=new it,this.afterTick=new it,this.componentTypes=[],this.components=[],this.isStable=x(bo).hasPendingTasks.pipe(ee(r=>!r)),this._injector=x(At)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Zc;if(!this._injector.get(KE).done){let _=!s&&z_(r),A=!1;throw new q(405,A)}let c;s?c=r:c=this._injector.get(Cu).resolveComponentFactory(r),this.componentTypes.push(c.componentType);let u=fx(c)?void 0:this._injector.get(Jn),l=i||c.selector,f=c.create(Jt.NULL,[],l,u),p=f.location.nativeElement,y=f.injector.get(zE,null);return y?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),gh(this.components,f),y?.unregisterApplication(p)}),this._loadComponent(f),f}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new q(101,!1);let i=he(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,he(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===IE)throw new q(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:c,notifyErrorHandler:u}of this._views)gx(c,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ef(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ef(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;gh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Gi,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>gh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Oc;function Zf(t){Oc??=new WeakMap;let e=Oc.get(t);if(e)return e;let n=t.isStable.pipe(jt(r=>r)).toPromise().then(()=>{});return Oc.set(t,n),t.onDestroy(()=>Oc?.delete(t)),n}function gx(t,e,n){!e&&!ef(t)||mx(t,n,e)}function ef(t){return mf(t)}function mx(t,e,n){let r;n?(r=0,t[H]|=1024):t[H]&64?r=0:r=1,_E(t,e,r)}var tf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ep=(()=>{let e=class e{compileModuleSync(r){return new Zh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=G_(r),o=Yw(s.declarations).reduce((c,u)=>{let l=xr(u);return l&&c.push(new fo(l)),c},[]);return new tf(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var yx=(()=>{let e=class e{constructor(){this.zone=x(ve),this.applicationRef=x(rr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vx(t){return[{provide:ve,useFactory:t},{provide:Mr,multi:!0,useFactory:()=>{let e=x(yx,{optional:!0});return()=>e.initialize()}},{provide:Mr,multi:!0,useFactory:()=>{let e=x(Ex);return()=>{e.initialize()}}},{provide:Pw,useFactory:Ix}]}function Ix(){let t=x(ve),e=x(Rn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function _x(t){let e=vx(()=>new ve(wx(t)));return Kt([[],e])}function wx(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Ex=(()=>{let e=class e{constructor(){this.subscription=new Me,this.initialized=!1,this.zone=x(ve),this.pendingTasks=x(bo)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Tx(){return typeof $localize<"u"&&$localize.locale||ru}var tp=new K("",{providedIn:"root",factory:()=>x(tp,te.Optional|te.SkipSelf)||Tx()});var QE=new K("");var jc=null;function Dx(t=[],e){return Jt.create({name:e,providers:[{provide:lu,useValue:"platform"},{provide:QE,useValue:new Set([()=>jc=null])},...t]})}function bx(t=[]){if(jc)return jc;let e=Dx(t);return jc=e,hx(),Cx(e),e}function Cx(t){t.get(Df,null)?.forEach(n=>n())}var No=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Sx;let t=e;return t})();function Sx(t){return Ax(Mt(),Te(),(t&16)===16)}function Ax(t,e,n){if(vo(t)&&!n){let r=er(t.index,e);return new kr(r,r)}else if(t.type&47){let r=e[Rt];return new kr(r,e)}return null}var nf=class{constructor(){}supports(e){return PE(e)}create(e){return new rf(e)}},Rx=(t,e)=>e,rf=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Rx}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<T_(r,i,s)?n:r,c=T_(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=c-i,f=u-i;if(l!=f){for(let y=0;y<l;y++){let _=y<s.length?s[y]:s[y]=0,A=_+y;f<=A&&A<l&&(s[y]=_+1)}let p=o.previousIndex;s[p]=f-l}}c!==u&&e(o,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!PE(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,c),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,BM(e,c=>{o=this._trackByFn(i,c),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,c,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,o,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new sf(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new iu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new iu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},sf=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},of=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},iu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new of,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function T_(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function D_(){return new np([new nf])}var np=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||D_()),deps:[[e,new L_,new Wt]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new q(901,!1)}};e.\u0275prov=$({token:e,providedIn:"root",factory:D_});let t=e;return t})();function YE(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=bx(r),s=[_x(),...n||[]],c=new nu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(ve);return u.run(()=>{c.resolveInjectorInitializers();let l=c.get(Rn,null),f;u.runOutsideAngular(()=>{f=u.onError.subscribe({next:_=>{l.handleError(_)}})});let p=()=>c.destroy(),y=i.get(QE);return y.add(p),c.onDestroy(()=>{f.unsubscribe(),y.delete(p)}),px(l,u,()=>{let _=c.get(KE);return _.runInitializers(),_.donePromise.then(()=>{let A=c.get(tp,ru);tx(A||ru);let N=c.get(rr);return e!==void 0&&N.bootstrap(e),N})})})}catch(e){return Promise.reject(e)}}var b_=!1,Nx=!1;function Mx(){b_||(b_=!0,AR(),YM(),cx(),ZM(),GM(),RM(),sM(),lN(),ix())}function xx(t,e){return Zf(t)}function JE(){return Kt([{provide:xc,useFactory:()=>{let t=!0;return Pc()&&(t=!!x(Vr,{optional:!0})?.get(zw,null)),t&&jr("NgHydration"),t}},{provide:Mr,useValue:()=>{Nx=!!x(PR,{optional:!0}),Pc()&&x(xc)&&(Px(),Mx())},multi:!0},{provide:Qw,useFactory:()=>Pc()&&x(xc)},{provide:Gi,useFactory:()=>{if(Pc()&&x(xc)){let t=x(rr),e=x(Jt);return()=>{xx(t,e).then(()=>{YN(t)})}}return()=>{}},multi:!0}])}function Px(){let t=gu(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===CR){e=n;break}if(!e)throw new q(-507,!1)}function ir(t,e){jr("NgSignals");let n=fI(t);return e?.equal&&(n[$n].equal=e.equal),n}var rT=null;function Wi(){return rT}function iT(t){rT??=t}var Mu=class{};var It=new K(""),sT=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>x(Vx),providedIn:"platform"});let t=e;return t})();var Vx=(()=>{let e=class e extends sT{constructor(){super(),this._doc=x(It),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wi().getBaseHref(this._doc)}onPopState(r){let i=Wi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Wi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function oT(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function XE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Hr(t){return t&&t[0]!=="?"?"?"+t:t}var Pu=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>x(aT),providedIn:"root"});let t=e;return t})(),Ux=new K(""),aT=(()=>{let e=class e extends Pu{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??x(It).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return oT(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Hr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let c=this.prepareExternalUrl(s+Hr(o));this._platformLocation.pushState(r,i,c)}replaceState(r,i,s,o){let c=this.prepareExternalUrl(s+Hr(o));this._platformLocation.replaceState(r,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(se(sT),se(Ux,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Mo=(()=>{let e=class e{constructor(r){this._subject=new at,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=$x(XE(ZE(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Hr(i))}normalize(r){return e.stripTrailingSlash(Bx(this._basePath,ZE(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Hr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Hr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Hr,e.joinWithSlash=oT,e.stripTrailingSlash=XE,e.\u0275fac=function(i){return new(i||e)(se(Pu))},e.\u0275prov=$({token:e,factory:()=>jx(),providedIn:"root"});let t=e;return t})();function jx(){return new Mo(se(Pu))}function Bx(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ZE(t){return t.replace(/\/index.html$/,"")}function $x(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function op(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var rp=/\s+/,eT=[],Ki=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=eT,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(rp):eT}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(rp):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(rp).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(an(tr),an(Su))},e.\u0275dir=$i({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Cn.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var ip=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},cT=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,c)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new ip(s.item,this._ngForOf,-1,-1),c===null?void 0:c);else if(c==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,c),tT(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);tT(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(an(nr),an(Fr),an(np))},e.\u0275dir=$i({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function tT(t,e){t.context.$implicit=e.item}var uT=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new sp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){nT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){nT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(an(nr),an(Fr))},e.\u0275dir=$i({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),sp=class{constructor(){this.$implicit=null,this.ngIf=null}};function nT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ct(e)}'.`)}var zr=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=uu({type:e}),e.\u0275inj=ou({});let t=e;return t})(),lT="browser",qx="server";function xo(t){return t===qx}var xu=class{};var ku=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var vT=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(vT||{}),cp=class{constructor(e,n=IT.Ok,r="OK"){this.headers=e.headers||new ku,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Fu=class t extends cp{constructor(e={}){super(e),this.type=vT.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var IT=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(IT||{});var zx=new K("");var dT="b",hT="h",fT="s",pT="st",gT="u",mT="rt",Ou=new K(""),Gx=["GET","HEAD"];function Wx(t,e){let p=x(Ou),{isCacheActive:n}=p,r=sI(p,["isCacheActive"]),{transferCache:i,method:s}=t;if(!n||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!Gx.includes(s)||i===!1||r.filter?.(t)===!1)return e(t);let o=x(Vr),c=Qx(t),u=o.get(c,null),l=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(l=i.includeHeaders),u){let{[dT]:y,[mT]:_,[hT]:A,[fT]:N,[pT]:R,[gT]:k}=u,B=y;switch(_){case"arraybuffer":B=new TextEncoder().encode(y).buffer;break;case"blob":B=new Blob([y]);break}let U=new ku(A);return G(new Fu({body:B,headers:U,status:N,statusText:R,url:k}))}let f=xo(x(xt));return e(t).pipe(xe(y=>{y instanceof Fu&&f&&o.set(c,{[dT]:y.body,[hT]:Kx(y.headers,l),[fT]:y.status,[pT]:y.statusText,[gT]:y.url||"",[mT]:t.responseType})}))}function Kx(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function yT(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function Qx(t){let{params:e,method:n,responseType:r,url:i}=t,s=yT(e),o=t.serializeBody();o instanceof URLSearchParams?o=yT(o):typeof o!="string"&&(o="");let c=[n,r,i,o,s].join("|"),u=Yx(c);return u}function Yx(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function _T(t){return[{provide:Ou,useFactory:()=>(jr("NgHttpTransferCache"),F({isCacheActive:!0},t))},{provide:zx,useValue:Wx,multi:!0,deps:[Vr,Ou]},{provide:Gi,multi:!0,useFactory:()=>{let e=x(rr),n=x(Ou);return()=>{Zf(e).then(()=>{n.isCacheActive=!1})}}}]}var dp=class extends Mu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},hp=class t extends dp{static makeCurrent(){iT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Jx();return n==null?null:Xx(n)}resetBaseElement(){Po=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return op(document.cookie,e)}},Po=null;function Jx(){return Po=Po||document.querySelector("base"),Po?Po.getAttribute("href"):null}function Xx(t){return new URL(t,document.baseURI).pathname}var Zx=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),fp=new K(""),DT=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(se(fp),se(ve))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),Lu=class{constructor(e){this._doc=e}},up="ng-app-id",bT=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xo(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${up}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(up),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(up,this.appId),r.appendChild(c),c}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,c=o.get(i)?.elements;c?c.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(se(It),se(mu),se(bf,8),se(xt))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),lp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mp=/%COMP%/g,CT="%COMP%",eP=`_nghost-${CT}`,tP=`_ngcontent-${CT}`,nP=!0,rP=new K("",{providedIn:"root",factory:()=>nP});function iP(t){return tP.replace(mp,t)}function sP(t){return eP.replace(mp,t)}function ST(t,e){return e.map(n=>n.replace(mp,t))}var wT=(()=>{let e=class e{constructor(r,i,s,o,c,u,l,f=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=u,this.ngZone=l,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=xo(u),this.defaultRenderer=new Oo(r,c,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===nn.ShadowDom&&(i=me(F({},i),{encapsulation:nn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Vu?s.applyToHost(r):s instanceof ko&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let c=this.doc,u=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(i.encapsulation){case nn.Emulated:o=new Vu(l,f,i,this.appId,p,c,u,y);break;case nn.ShadowDom:return new pp(l,f,r,i,c,u,this.nonce,y);default:o=new ko(l,f,i,p,c,u,y);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(se(DT),se(bT),se(mu),se(rP),se(It),se(xt),se(ve),se(bf))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),Oo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(lp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ET(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ET(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=lp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=lp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ur.DashCase|Ur.Important)?e.style.setProperty(n,r,i&Ur.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ur.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Wi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function ET(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var pp=class extends Oo{constructor(e,n,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ST(i.id,i.styles);for(let f of l){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ko=class extends Oo{constructor(e,n,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?ST(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Vu=class extends ko{constructor(e,n,r,i,s,o,c,u){let l=i+"-"+r.id;super(e,n,r,s,o,c,u,l),this.contentAttr=iP(l),this.hostAttr=sP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},oP=(()=>{let e=class e extends Lu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(se(It))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),TT=["alt","control","meta","shift"],aP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},uP=(()=>{let e=class e extends Lu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wi().onAndCancel(r,o.domEventName,c))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),c="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),c="code."),TT.forEach(f=>{let p=i.indexOf(f);p>-1&&(i.splice(p,1),c+=f+".")}),c+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=c,l}static matchEventFullKeyCode(r,i){let s=aP[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),TT.forEach(c=>{if(c!==s){let u=cP[c];u(r)&&(o+=c+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(se(It))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();function AT(t,e){return YE(F({rootComponent:t},lP(e)))}function lP(t){return{appProviders:[...gP,...t?.providers??[]],platformProviders:pP}}function dP(){hp.makeCurrent()}function hP(){return new Rn}function fP(){return Bw(document),document}var pP=[{provide:xt,useValue:lT},{provide:Df,useValue:dP,multi:!0},{provide:It,useFactory:fP,deps:[]}];var gP=[{provide:lu,useValue:"root"},{provide:Rn,useFactory:hP,deps:[]},{provide:fp,useClass:oP,multi:!0,deps:[It,ve,xt]},{provide:fp,useClass:uP,multi:!0,deps:[It]},wT,bT,DT,{provide:ho,useExisting:wT},{provide:xu,useClass:Zx,deps:[]},[]];var RT=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(se(It))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gp=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(gp||{});function NT(...t){let e=[],n=new Set,r=n.has(gp.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of t)n.add(s),i.length&&e.push(i);return Kt([[],JE(),n.has(gp.NoHttpTransferCache)||r?[]:_T({}),e])}var xT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yP=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},PT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|c>>4,y=(c&15)<<2|l>>6,_=l&63;u||(_=64,o||(y=64)),r.push(n[f],n[p],n[y],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||l==null||p==null)throw new vp;let y=s<<2|c>>4;if(r.push(y),l!==64){let _=c<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},vp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vP=function(t){let e=xT(t);return PT.encodeByteArray(e,!0)},Fo=function(t){return vP(t).replace(/\./g,"")},_p=function(t){try{return PT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function IP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var _P=()=>IP().__FIREBASE_DEFAULTS__,wP=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&_p(t[1]);return e&&JSON.parse(e)},ju=()=>{try{return _P()||wP()||EP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OT=t=>{var e,n;return(n=(e=ju())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kT=t=>{let e=OT(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wp=()=>{var t;return(t=ju())===null||t===void 0?void 0:t.config},FT=t=>{var e;return(e=ju())===null||e===void 0?void 0:e[`_${t}`]};var Uu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function LT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fo(JSON.stringify(n)),Fo(JSON.stringify(o)),""].join(".")}function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function TP(){var t;let e=(t=ju())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BT(){return!TP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ep(){try{return typeof indexedDB=="object"}catch{return!1}}function $T(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var DP="FirebaseError",Ot=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DP,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nn.prototype.create)}},Nn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?bP(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ot(i,c,r)}};function bP(t,e){return t.replace(CP,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var CP=/\{\$([^}]+)}/g;function Qi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(MT(s)&&MT(o)){if(!Qi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function MT(t){return t!==null&&typeof t=="object"}function Tp(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qT(t,e){let n=new Ip(t,e);return n.subscribe.bind(n)}var Ip=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=yp),i.error===void 0&&(i.error=yp),i.complete===void 0&&(i.complete=yp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function SP(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yp(){}var Lz=4*60*60*1e3;function kt(t){return t&&t._delegate?t._delegate:t}var Ft=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Gr="[DEFAULT]";var Dp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Uu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RP(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AP(t){return t===Gr?void 0:t}function RP(t){return t.instantiationMode==="EAGER"}var Bu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Dp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var NP=[],oe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(oe||{}),MP={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},xP=oe.INFO,PP={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},OP=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=PP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},sr=class{constructor(e){this.name=e,this._logLevel=xP,this._logHandler=OP,this._userLogHandler=null,NP.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var kP=(t,e)=>e.some(n=>t instanceof n),HT,zT;function FP(){return HT||(HT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LP(){return zT||(zT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var GT=new WeakMap,Cp=new WeakMap,WT=new WeakMap,bp=new WeakMap,Ap=new WeakMap;function VP(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GT.set(n,t)}).catch(()=>{}),Ap.set(e,t),e}function UP(t){if(Cp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Cp.set(t,e)}var Sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KT(t){Sp=t(Sp)}function jP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call($u(this),e,...n);return WT.set(r,e.sort?e.sort():[e]),cn(r)}:LP().includes(t)?function(...e){return t.apply($u(this),e),cn(GT.get(this))}:function(...e){return cn(t.apply($u(this),e))}}function BP(t){return typeof t=="function"?jP(t):(t instanceof IDBTransaction&&UP(t),kP(t,FP())?new Proxy(t,Sp):t)}function cn(t){if(t instanceof IDBRequest)return VP(t);if(bp.has(t))return bp.get(t);let e=BP(t);return e!==t&&(bp.set(t,e),Ap.set(e,t)),e}var $u=t=>Ap.get(t);function YT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=cn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(cn(o.result),u.oldVersion,u.newVersion,cn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var $P=["get","getKey","getAll","getAllKeys","count"],qP=["put","add","delete","clear"],Rp=new Map;function QT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rp.get(e))return Rp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=qP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$P.includes(n)))return;let s=function(o,...c){return C(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Rp.set(e,s),s}KT(t=>me(F({},t),{get:(e,n,r)=>QT(e,n)||t.get(e,n,r),has:(e,n)=>!!QT(e,n)||t.has(e,n)}));var Mp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HP(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function HP(t){let e=t.getComponent();return e?.type==="VERSION"}var xp="@firebase/app",JT="0.10.5";var Wr=new sr("@firebase/app"),zP="@firebase/app-compat",GP="@firebase/analytics-compat",WP="@firebase/analytics",KP="@firebase/app-check-compat",QP="@firebase/app-check",YP="@firebase/auth",JP="@firebase/auth-compat",XP="@firebase/database",ZP="@firebase/database-compat",eO="@firebase/functions",tO="@firebase/functions-compat",nO="@firebase/installations",rO="@firebase/installations-compat",iO="@firebase/messaging",sO="@firebase/messaging-compat",oO="@firebase/performance",aO="@firebase/performance-compat",cO="@firebase/remote-config",uO="@firebase/remote-config-compat",lO="@firebase/storage",dO="@firebase/storage-compat",hO="@firebase/firestore",fO="@firebase/vertexai-preview",pO="@firebase/firestore-compat",gO="firebase",mO="10.12.2";var Pp="[DEFAULT]",yO={[xp]:"fire-core",[zP]:"fire-core-compat",[WP]:"fire-analytics",[GP]:"fire-analytics-compat",[QP]:"fire-app-check",[KP]:"fire-app-check-compat",[YP]:"fire-auth",[JP]:"fire-auth-compat",[XP]:"fire-rtdb",[ZP]:"fire-rtdb-compat",[eO]:"fire-fn",[tO]:"fire-fn-compat",[nO]:"fire-iid",[rO]:"fire-iid-compat",[iO]:"fire-fcm",[sO]:"fire-fcm-compat",[oO]:"fire-perf",[aO]:"fire-perf-compat",[cO]:"fire-rc",[uO]:"fire-rc-compat",[lO]:"fire-gcs",[dO]:"fire-gcs-compat",[hO]:"fire-fst",[pO]:"fire-fst-compat",[fO]:"fire-vertex","fire-js":"fire-js",[gO]:"fire-js-all"};var Lo=new Map,vO=new Map,Op=new Map;function XT(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ar(t){let e=t.name;if(Op.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;Op.set(e,t);for(let n of Lo.values())XT(n,t);for(let n of vO.values())XT(n,t);return!0}function Vp(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yi(t){return t.settings!==void 0}var IO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new Nn("app","Firebase",IO);var kp=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}};var Ji=mO;function Up(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Pp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw or.create("bad-app-name",{appName:String(i)});if(n||(n=wp()),!n)throw or.create("no-options");let s=Lo.get(i);if(s){if(Qi(n,s.options)&&Qi(r,s.config))return s;throw or.create("duplicate-app",{appName:i})}let o=new Bu(i);for(let u of Op.values())o.addComponent(u);let c=new kp(n,r,o);return Lo.set(i,c),c}function Uo(t=Pp){let e=Lo.get(t);if(!e&&t===Pp&&wp())return Up();if(!e)throw or.create("no-app",{appName:t});return e}function qu(){return Array.from(Lo.values())}function $e(t,e,n){var r;let i=(r=yO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(c.join(" "));return}ar(new Ft(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var _O="firebase-heartbeat-database",wO=1,Vo="firebase-heartbeat-store",Np=null;function nD(){return Np||(Np=YT(_O,wO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vo)}catch(n){console.warn(n)}}}}).catch(t=>{throw or.create("idb-open",{originalErrorMessage:t.message})})),Np}function EO(t){return C(this,null,function*(){try{let n=(yield nD()).transaction(Vo),r=yield n.objectStore(Vo).get(rD(t));return yield n.done,r}catch(e){if(e instanceof Ot)Wr.warn(e.message);else{let n=or.create("idb-get",{originalErrorMessage:e?.message});Wr.warn(n.message)}}})}function ZT(t,e){return C(this,null,function*(){try{let r=(yield nD()).transaction(Vo,"readwrite");yield r.objectStore(Vo).put(e,rD(t)),yield r.done}catch(n){if(n instanceof Ot)Wr.warn(n.message);else{let r=or.create("idb-set",{originalErrorMessage:n?.message});Wr.warn(r.message)}}})}function rD(t){return`${t.name}!${t.options.appId}`}var TO=1024,DO=30*24*60*60*1e3,Fp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Lp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eD();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=DO}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return C(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=eD(),{heartbeatsToSend:r,unsentEntries:i}=bO(this._heartbeatsCache.heartbeats),s=Fo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function eD(){return new Date().toISOString().substring(0,10)}function bO(t,e=TO){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Lp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return Ep()?$T().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield EO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function tD(t){return Fo(JSON.stringify({version:2,heartbeats:t})).length}function CO(t){ar(new Ft("platform-logger",e=>new Mp(e),"PRIVATE")),ar(new Ft("heartbeat",e=>new Fp(e),"PRIVATE")),$e(xp,JT,t),$e(xp,JT,"esm2017"),$e("fire-js","")}CO("");var SO="firebase",AO="10.12.2";$e(SO,AO,"app");var Zi=new Xn("ANGULARFIRE2_VERSION");function Bp(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Bo=(t,e)=>{let n=e?[e]:qu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},jo=class{constructor(){return Bo(RO)}},RO="app-check";function Xi(){}var Hu=class{zone;delegate;constructor(e,n=Yd){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},jp=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xi,{},Xi,Xi)),n.pipe(xe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},$o=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Hu(Zone.current)),this.insideAngular=n.run(()=>new Hu(Zone.current,Qd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(se(ve))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zu(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function NO(t){return zu().ngZone.runOutsideAngular(()=>t())}function Kr(t){return zu().ngZone.run(()=>t())}function MO(t){return xO(zu())(t)}function xO(t){return function(n){return n=n.lift(new jp(t.ngZone)),n.pipe(zn(t.outsideAngular),Hn(t.insideAngular))}}var PO=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Kr(()=>t.apply(void 0,r))},un=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Kr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xi,{},Xi,Xi))),r[s]=PO(r[s],n));let i=NO(()=>t.apply(this,r));if(!e)if(i instanceof ne){let s=zu();return i.pipe(zn(s.outsideAngular),Hn(s.insideAngular))}else return Kr(()=>i);return i instanceof ne?i.pipe(MO):i instanceof Promise?Kr(()=>new Promise((s,o)=>i.then(c=>Kr(()=>s(c)),c=>Kr(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Kr(()=>i)};var Qr=class{constructor(e){return e}},qo=class{constructor(){return qu()}};function OO(t){return t&&t.length===1?t[0]:new Qr(Uo())}var $p=new K("angularfire2._apps"),kO={provide:Qr,useFactory:OO,deps:[[new Wt,$p]]},FO={provide:qo,deps:[[new Wt,$p]]};function LO(t){return(e,n)=>{let r=n.get(xt);$e("angularfire",Zi.full,"core"),$e("angularfire",Zi.full,"app"),$e("angular",HE.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Qr(i)}}function iD(t,...e){return Kt([kO,FO,{provide:$p,useFactory:LO(t),multi:!0,deps:[ve,Jt,$o,...e]}])}var sD=un(Up,!0);function fD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pD=fD,gD=new Nn("auth","Firebase",fD());var Qu=new sr("@firebase/auth");function UO(t,...e){Qu.logLevel<=oe.WARN&&Qu.warn(`Auth (${Ji}): ${t}`,...e)}function Wu(t,...e){Qu.logLevel<=oe.ERROR&&Qu.error(`Auth (${Ji}): ${t}`,...e)}function oD(t,...e){throw eg(t,...e)}function Zp(t,...e){return eg(t,...e)}function mD(t,e,n){let r=Object.assign(Object.assign({},pD()),{[e]:n});return new Nn("auth","Firebase",r).create(e,{appName:t.name})}function Ku(t){return mD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gD.create(t,...e)}function fe(t,e,...n){if(!t)throw eg(e,...n)}function Ho(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Wu(e),new Error(e)}function Yu(t,e){t||Ho(e)}function jO(){return aD()==="http:"||aD()==="https:"}function aD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function BO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jO()||UT()||"connection"in navigator)?navigator.onLine:!0}function $O(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Jr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yu(n>e,"Short delay should be less than long delay!"),this.isMobile=VT()||jT()}get(){return BO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qO(t,e){Yu(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ju=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ho("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ho("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ho("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var HO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var zO=new Jr(3e4,6e4);function yD(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function tl(s,o,c,u){return C(this,arguments,function*(t,e,n,r,i={}){return vD(t,i,()=>C(this,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=Tp(Object.assign({key:t.config.apiKey},f)).slice(1),y=yield t._getAdditionalHeaders();return y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode),Ju.fetch()(ID(t,t.config.apiHost,n,p),Object.assign({method:e,headers:y,referrerPolicy:"no-referrer"},l))}))})}function vD(t,e,n){return C(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},HO),e);try{let i=new zp(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Gu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Gu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Gu(t,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw mD(t,f,l);oD(t,f)}}catch(i){if(i instanceof Ot)throw i;oD(t,"network-request-failed",{message:String(i)})}})}function ID(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?qO(t.config,i):`${t.config.apiScheme}://${i}`}var zp=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zp(this.auth,"network-request-failed")),zO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Gu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Zp(t,e,r);return i.customData._tokenResponse=n,i}function GO(t,e){return C(this,null,function*(){return tl(t,"POST","/v1/accounts:delete",e)})}function _D(t,e){return C(this,null,function*(){return tl(t,"POST","/v1/accounts:lookup",e)})}function zo(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function tg(t,e=!1){return C(this,null,function*(){let n=kt(t),r=yield n.getIdToken(e),i=wD(r);fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:zo(qp(i.auth_time)),issuedAtTime:zo(qp(i.iat)),expirationTime:zo(qp(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function qp(t){return Number(t)*1e3}function wD(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{let i=_p(n);return i?JSON.parse(i):(Wu("Failed to decode base64 JWT payload"),null)}catch(i){return Wu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cD(t){let e=wD(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gp(t,e,n=!1){return C(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ot&&WO(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function WO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Wp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),n)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Wo=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zo(this.lastLoginAt),this.creationTime=zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Xu(t){return C(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Gp(t,_D(n,{idToken:r}));fe(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ED(s.providerUserInfo):[],c=KO(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!c?.length,f=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Wo(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function ng(t){return C(this,null,function*(){let e=kt(t);yield Xu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function KO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ED(t){return t.map(e=>{var{providerId:n}=e,r=Jd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function QO(t,e){return C(this,null,function*(){let n=yield vD(t,{},()=>C(this,null,function*(){let r=Tp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ID(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ju.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function YO(t,e){return C(this,null,function*(){return tl(t,"POST","/v2/accounts:revokeToken",yD(t,e))})}var Go=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");let n=cD(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return C(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield QO(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ho("not implemented")}};function cr(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ko=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Jd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let n=yield Gp(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return tg(this,e)}reload(){return ng(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Xu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(Yi(this.auth.app))return Promise.reject(Ku(this.auth));let e=yield this.getIdToken();return yield Gp(this,GO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,l,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:U,emailVerified:ce,isAnonymous:Ce,providerData:J,stsTokenManager:E}=n;fe(U&&E,e,"internal-error");let m=Go.fromJSON(this.name,E);fe(typeof U=="string",e,"internal-error"),cr(p,e.name),cr(y,e.name),fe(typeof ce=="boolean",e,"internal-error"),fe(typeof Ce=="boolean",e,"internal-error"),cr(_,e.name),cr(A,e.name),cr(N,e.name),cr(R,e.name),cr(k,e.name),cr(B,e.name);let v=new t({uid:U,auth:e,email:y,emailVerified:ce,displayName:p,isAnonymous:Ce,photoURL:A,phoneNumber:_,tenantId:N,stsTokenManager:m,createdAt:k,lastLoginAt:B});return J&&Array.isArray(J)&&(v.providerData=J.map(w=>Object.assign({},w))),R&&(v._redirectEventId=R),v}static _fromIdTokenResponse(e,n,r=!1){return C(this,null,function*(){let i=new Go;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Xu(s),s})}static _fromGetAccountInfoResponse(e,n,r){return C(this,null,function*(){let i=n.users[0];fe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ED(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Go;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var uD=new Map;function Yr(t){Yu(t instanceof Function,"Expected a class definition");let e=uD.get(t);return e?(Yu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uD.set(t,e),e)}var JO=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(n,r){return C(this,null,function*(){this.storage[n]=r})}_get(n){return C(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return C(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Kp=JO;function Hp(t,e,n){return`firebase:${t}:${e}:${n}`}var Zu=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Hp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ko._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return C(this,null,function*(){if(!n.length)return new t(Yr(Kp),e,r);let i=(yield Promise.all(n.map(l=>C(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Yr(Kp),o=Hp(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let f=yield l._get(o);if(f){let p=Ko._fromJSON(e,f);l!==s&&(c=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(l=>C(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function lD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rk(e))return"Blackberry";if(ik(e))return"Webos";if(ZO(e))return"Safari";if((e.includes("chrome/")||ek(e))&&!e.includes("edge/"))return"Chrome";if(nk(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function XO(t=_t()){return/firefox\//i.test(t)}function ZO(t=_t()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ek(t=_t()){return/crios\//i.test(t)}function tk(t=_t()){return/iemobile/i.test(t)}function nk(t=_t()){return/android/i.test(t)}function rk(t=_t()){return/blackberry/i.test(t)}function ik(t=_t()){return/webos/i.test(t)}function TD(t,e=[]){let n;switch(t){case"Browser":n=lD(_t());break;case"Worker":n=`${lD(_t())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ji}/${r}`}var Qp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function sk(n){return C(this,arguments,function*(t,e={}){return tl(t,"GET","/v2/passwordPolicy",yD(t,e))})}var ok=6,Yp=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:ok,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Jp=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new el(this),this.idTokenSubscription=new el(this),this.beforeStateQueue=new Qp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yr(n)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Zu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let n=yield _D(this,{idToken:e}),r=yield Ko._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var n;if(Yi(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield Xu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$O()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(Yi(this.app))return Promise.reject(Ku(this));let n=e?kt(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return C(this,null,function*(){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return Yi(this.app)?Promise.reject(Ku(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Yi(this.app)?Promise.reject(Ku(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Yr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield sk(this),n=new Yp(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield YO(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Yr(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=yield Zu.create(this,[Yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return C(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&UO(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ak(t){return kt(t)}var el=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qT(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ck={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uk(t){ck=t}function lk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function dk(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Yr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var P4=lk("rcb"),O4=new Jr(3e4,6e4);var k4=new Jr(2e3,1e4);var F4=10*60*1e3;var L4=new Jr(3e4,6e4);var V4=new Jr(5e3,15e3);var U4=encodeURIComponent("fac");var dD="@firebase/auth",hD="1.7.4";var Xp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function hk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fk(t){ar(new Ft("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TD(t)},l=new Jp(r,i,s,u);return dk(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ar(new Ft("auth-internal",e=>{let n=ak(e.getProvider("auth").getImmediate());return(r=>new Xp(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(dD,hD,hk(t)),$e(dD,hD,"esm2017")}var pk=5*60,j4=FT("authIdTokenMaxAge")||pk;function gk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}uk({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Zp("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fk("Browser");var p1="auth";var nl=class{constructor(){return Bo(p1)}};var DD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bD={};var ur,rg;(function(){var t;function e(E,m){function v(){}v.prototype=m.prototype,E.D=m.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,T,b){for(var I=Array(arguments.length-2),_n=2;_n<arguments.length;_n++)I[_n-2]=arguments[_n];return m.prototype[T].apply(w,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,v){v||(v=0);var w=Array(16);if(typeof m=="string")for(var T=0;16>T;++T)w[T]=m.charCodeAt(v++)|m.charCodeAt(v++)<<8|m.charCodeAt(v++)<<16|m.charCodeAt(v++)<<24;else for(T=0;16>T;++T)w[T]=m[v++]|m[v++]<<8|m[v++]<<16|m[v++]<<24;m=E.g[0],v=E.g[1],T=E.g[2];var b=E.g[3],I=m+(b^v&(T^b))+w[0]+3614090360&4294967295;m=v+(I<<7&4294967295|I>>>25),I=b+(T^m&(v^T))+w[1]+3905402710&4294967295,b=m+(I<<12&4294967295|I>>>20),I=T+(v^b&(m^v))+w[2]+606105819&4294967295,T=b+(I<<17&4294967295|I>>>15),I=v+(m^T&(b^m))+w[3]+3250441966&4294967295,v=T+(I<<22&4294967295|I>>>10),I=m+(b^v&(T^b))+w[4]+4118548399&4294967295,m=v+(I<<7&4294967295|I>>>25),I=b+(T^m&(v^T))+w[5]+1200080426&4294967295,b=m+(I<<12&4294967295|I>>>20),I=T+(v^b&(m^v))+w[6]+2821735955&4294967295,T=b+(I<<17&4294967295|I>>>15),I=v+(m^T&(b^m))+w[7]+4249261313&4294967295,v=T+(I<<22&4294967295|I>>>10),I=m+(b^v&(T^b))+w[8]+1770035416&4294967295,m=v+(I<<7&4294967295|I>>>25),I=b+(T^m&(v^T))+w[9]+2336552879&4294967295,b=m+(I<<12&4294967295|I>>>20),I=T+(v^b&(m^v))+w[10]+4294925233&4294967295,T=b+(I<<17&4294967295|I>>>15),I=v+(m^T&(b^m))+w[11]+2304563134&4294967295,v=T+(I<<22&4294967295|I>>>10),I=m+(b^v&(T^b))+w[12]+1804603682&4294967295,m=v+(I<<7&4294967295|I>>>25),I=b+(T^m&(v^T))+w[13]+4254626195&4294967295,b=m+(I<<12&4294967295|I>>>20),I=T+(v^b&(m^v))+w[14]+2792965006&4294967295,T=b+(I<<17&4294967295|I>>>15),I=v+(m^T&(b^m))+w[15]+1236535329&4294967295,v=T+(I<<22&4294967295|I>>>10),I=m+(T^b&(v^T))+w[1]+4129170786&4294967295,m=v+(I<<5&4294967295|I>>>27),I=b+(v^T&(m^v))+w[6]+3225465664&4294967295,b=m+(I<<9&4294967295|I>>>23),I=T+(m^v&(b^m))+w[11]+643717713&4294967295,T=b+(I<<14&4294967295|I>>>18),I=v+(b^m&(T^b))+w[0]+3921069994&4294967295,v=T+(I<<20&4294967295|I>>>12),I=m+(T^b&(v^T))+w[5]+3593408605&4294967295,m=v+(I<<5&4294967295|I>>>27),I=b+(v^T&(m^v))+w[10]+38016083&4294967295,b=m+(I<<9&4294967295|I>>>23),I=T+(m^v&(b^m))+w[15]+3634488961&4294967295,T=b+(I<<14&4294967295|I>>>18),I=v+(b^m&(T^b))+w[4]+3889429448&4294967295,v=T+(I<<20&4294967295|I>>>12),I=m+(T^b&(v^T))+w[9]+568446438&4294967295,m=v+(I<<5&4294967295|I>>>27),I=b+(v^T&(m^v))+w[14]+3275163606&4294967295,b=m+(I<<9&4294967295|I>>>23),I=T+(m^v&(b^m))+w[3]+4107603335&4294967295,T=b+(I<<14&4294967295|I>>>18),I=v+(b^m&(T^b))+w[8]+1163531501&4294967295,v=T+(I<<20&4294967295|I>>>12),I=m+(T^b&(v^T))+w[13]+2850285829&4294967295,m=v+(I<<5&4294967295|I>>>27),I=b+(v^T&(m^v))+w[2]+4243563512&4294967295,b=m+(I<<9&4294967295|I>>>23),I=T+(m^v&(b^m))+w[7]+1735328473&4294967295,T=b+(I<<14&4294967295|I>>>18),I=v+(b^m&(T^b))+w[12]+2368359562&4294967295,v=T+(I<<20&4294967295|I>>>12),I=m+(v^T^b)+w[5]+4294588738&4294967295,m=v+(I<<4&4294967295|I>>>28),I=b+(m^v^T)+w[8]+2272392833&4294967295,b=m+(I<<11&4294967295|I>>>21),I=T+(b^m^v)+w[11]+1839030562&4294967295,T=b+(I<<16&4294967295|I>>>16),I=v+(T^b^m)+w[14]+4259657740&4294967295,v=T+(I<<23&4294967295|I>>>9),I=m+(v^T^b)+w[1]+2763975236&4294967295,m=v+(I<<4&4294967295|I>>>28),I=b+(m^v^T)+w[4]+1272893353&4294967295,b=m+(I<<11&4294967295|I>>>21),I=T+(b^m^v)+w[7]+4139469664&4294967295,T=b+(I<<16&4294967295|I>>>16),I=v+(T^b^m)+w[10]+3200236656&4294967295,v=T+(I<<23&4294967295|I>>>9),I=m+(v^T^b)+w[13]+681279174&4294967295,m=v+(I<<4&4294967295|I>>>28),I=b+(m^v^T)+w[0]+3936430074&4294967295,b=m+(I<<11&4294967295|I>>>21),I=T+(b^m^v)+w[3]+3572445317&4294967295,T=b+(I<<16&4294967295|I>>>16),I=v+(T^b^m)+w[6]+76029189&4294967295,v=T+(I<<23&4294967295|I>>>9),I=m+(v^T^b)+w[9]+3654602809&4294967295,m=v+(I<<4&4294967295|I>>>28),I=b+(m^v^T)+w[12]+3873151461&4294967295,b=m+(I<<11&4294967295|I>>>21),I=T+(b^m^v)+w[15]+530742520&4294967295,T=b+(I<<16&4294967295|I>>>16),I=v+(T^b^m)+w[2]+3299628645&4294967295,v=T+(I<<23&4294967295|I>>>9),I=m+(T^(v|~b))+w[0]+4096336452&4294967295,m=v+(I<<6&4294967295|I>>>26),I=b+(v^(m|~T))+w[7]+1126891415&4294967295,b=m+(I<<10&4294967295|I>>>22),I=T+(m^(b|~v))+w[14]+2878612391&4294967295,T=b+(I<<15&4294967295|I>>>17),I=v+(b^(T|~m))+w[5]+4237533241&4294967295,v=T+(I<<21&4294967295|I>>>11),I=m+(T^(v|~b))+w[12]+1700485571&4294967295,m=v+(I<<6&4294967295|I>>>26),I=b+(v^(m|~T))+w[3]+2399980690&4294967295,b=m+(I<<10&4294967295|I>>>22),I=T+(m^(b|~v))+w[10]+4293915773&4294967295,T=b+(I<<15&4294967295|I>>>17),I=v+(b^(T|~m))+w[1]+2240044497&4294967295,v=T+(I<<21&4294967295|I>>>11),I=m+(T^(v|~b))+w[8]+1873313359&4294967295,m=v+(I<<6&4294967295|I>>>26),I=b+(v^(m|~T))+w[15]+4264355552&4294967295,b=m+(I<<10&4294967295|I>>>22),I=T+(m^(b|~v))+w[6]+2734768916&4294967295,T=b+(I<<15&4294967295|I>>>17),I=v+(b^(T|~m))+w[13]+1309151649&4294967295,v=T+(I<<21&4294967295|I>>>11),I=m+(T^(v|~b))+w[4]+4149444226&4294967295,m=v+(I<<6&4294967295|I>>>26),I=b+(v^(m|~T))+w[11]+3174756917&4294967295,b=m+(I<<10&4294967295|I>>>22),I=T+(m^(b|~v))+w[2]+718787259&4294967295,T=b+(I<<15&4294967295|I>>>17),I=v+(b^(T|~m))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var v=m-this.blockSize,w=this.B,T=this.h,b=0;b<m;){if(T==0)for(;b<=v;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<m;)if(w[T++]=E.charCodeAt(b++),T==this.blockSize){i(this,w),T=0;break}}else for(;b<m;)if(w[T++]=E[b++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var v=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=v&255,v/=256;for(this.u(E),E=Array(16),m=v=0;4>m;++m)for(var w=0;32>w;w+=8)E[v++]=this.g[m]>>>w&255;return E};function s(E,m){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=m(E)}function o(E,m){this.h=m;for(var v=[],w=!0,T=E.length-1;0<=T;T--){var b=E[T]|0;w&&b==m||(v[T]=b,w=!1)}this.g=v}var c={};function u(E){return-128<=E&&128>E?s(E,function(m){return new o([m|0],0>m?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var m=[],v=1,w=0;E>=v;w++)m[w]=E/v|0,v*=4294967296;return new o(m,0)}function f(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return R(f(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(m,8)),w=p,T=0;T<E.length;T+=8){var b=Math.min(8,E.length-T),I=parseInt(E.substring(T,T+b),m);8>b?(b=l(Math.pow(m,b)),w=w.j(b).add(l(I))):(w=w.j(v),w=w.add(l(I)))}return w}var p=u(0),y=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var E=0,m=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*m,m*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(N(this))return"-"+R(this).toString(E);for(var m=l(Math.pow(E,6)),v=this,w="";;){var T=ce(v,m).g;v=k(v,T.j(m));var b=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=T,A(v))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=k(this,E),N(E)?-1:A(E)?0:1};function R(E){for(var m=E.g.length,v=[],w=0;w<m;w++)v[w]=~E.g[w];return new o(v,~E.h).add(y)}t.abs=function(){return N(this)?R(this):this},t.add=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0,T=0;T<=m;T++){var b=w+(this.i(T)&65535)+(E.i(T)&65535),I=(b>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);w=I>>>16,b&=65535,I&=65535,v[T]=I<<16|b}return new o(v,v[v.length-1]&-2147483648?-1:0)};function k(E,m){return E.add(R(m))}t.j=function(E){if(A(this)||A(E))return p;if(N(this))return N(E)?R(this).j(R(E)):R(R(this).j(E));if(N(E))return R(this.j(R(E)));if(0>this.l(_)&&0>E.l(_))return l(this.m()*E.m());for(var m=this.g.length+E.g.length,v=[],w=0;w<2*m;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<E.g.length;T++){var b=this.i(w)>>>16,I=this.i(w)&65535,_n=E.i(T)>>>16,xs=E.i(T)&65535;v[2*w+2*T]+=I*xs,B(v,2*w+2*T),v[2*w+2*T+1]+=b*xs,B(v,2*w+2*T+1),v[2*w+2*T+1]+=I*_n,B(v,2*w+2*T+1),v[2*w+2*T+2]+=b*_n,B(v,2*w+2*T+2)}for(w=0;w<m;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=m;w<2*m;w++)v[w]=0;return new o(v,0)};function B(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function U(E,m){this.g=E,this.h=m}function ce(E,m){if(A(m))throw Error("division by zero");if(A(E))return new U(p,p);if(N(E))return m=ce(R(E),m),new U(R(m.g),R(m.h));if(N(m))return m=ce(E,R(m)),new U(R(m.g),m.h);if(30<E.g.length){if(N(E)||N(m))throw Error("slowDivide_ only works with positive integers.");for(var v=y,w=m;0>=w.l(E);)v=Ce(v),w=Ce(w);var T=J(v,1),b=J(w,1);for(w=J(w,2),v=J(v,2);!A(w);){var I=b.add(w);0>=I.l(E)&&(T=T.add(v),b=I),w=J(w,1),v=J(v,1)}return m=k(E,T.j(m)),new U(T,m)}for(T=p;0<=E.l(m);){for(v=Math.max(1,Math.floor(E.m()/m.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=l(v),I=b.j(m);N(I)||0<I.l(E);)v-=w,b=l(v),I=b.j(m);A(b)&&(b=y),T=T.add(b),E=k(E,I)}return new U(T,E)}t.A=function(E){return ce(this,E).h},t.and=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)&E.i(w);return new o(v,this.h&E.h)},t.or=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)|E.i(w);return new o(v,this.h|E.h)},t.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)^E.i(w);return new o(v,this.h^E.h)};function Ce(E){for(var m=E.g.length+1,v=[],w=0;w<m;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(v,E.h)}function J(E,m){var v=m>>5;m%=32;for(var w=E.g.length-v,T=[],b=0;b<w;b++)T[b]=0<m?E.i(b+v)>>>m|E.i(b+v+1)<<32-m:E.i(b+v);return new o(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rg=bD.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=f,ur=bD.Integer=o}).apply(typeof DD<"u"?DD:typeof self<"u"?self:typeof window<"u"?window:{});var rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mn={};var ig,sg,es,og,Qo,il,ag,cg,ug;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof rl=="object"&&rl];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in h))break e;h=h[D]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var h=0,g=!1,D={next:function(){if(!g&&h<a.length){var S=h++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,h){return h})}});var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),a.apply(d,D)}}return function(){return a.apply(d,arguments)}}function y(a,d,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function _(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function A(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,D,S){for(var O=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)O[ye-2]=arguments[ye];return d.prototype[D].apply(g,O)}}function N(a){let d=a.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function R(a,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let D=a.length||0,S=g.length||0;a.length=D+S;for(let O=0;O<S;O++)a[D+O]=g[O]}else a.push(g)}}class k{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(a){return/^[\s\xa0]*$/.test(a)}function U(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ce(a){return ce[" "](a),a}ce[" "]=function(){};var Ce=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function J(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function E(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function m(a){let d={};for(let h in a)d[h]=a[h];return d}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let h,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(h in g)a[h]=g[h];for(let S=0;S<v.length;S++)h=v[S],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function T(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function b(a){c.setTimeout(()=>{throw a},0)}function I(){var a=cd;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class _n{constructor(){this.h=this.g=null}add(d,h){let g=xs.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var xs=new k(()=>new h0,a=>a.reset());class h0{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ps,Os=!1,cd=new _n,tv=()=>{let a=c.Promise.resolve(void 0);Ps=()=>{a.then(f0)}};var f0=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(h){b(h)}var d=xs;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Os=!1};function Vn(){this.s=this.s,this.C=this.C}Vn.prototype.s=!1,Vn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ke(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ke.prototype.h=function(){this.defaultPrevented=!0};var p0=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function ks(a,d){if(Ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Ce){e:{try{ce(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:g0[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ks.aa.h.call(this)}}A(ks,Ke);var g0={2:"touch",3:"pen",4:"mouse"};ks.prototype.h=function(){ks.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Fs="closure_listenable_"+(1e6*Math.random()|0),m0=0;function y0(a,d,h,g,D){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=D,this.key=++m0,this.da=this.fa=!1}function Oa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ka(a){this.src=a,this.g={},this.h=0}ka.prototype.add=function(a,d,h,g,D){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var O=ld(a,d,g,D);return-1<O?(d=a[O],h||(d.fa=!1)):(d=new y0(d,this.src,S,!!g,D),d.fa=h,a.push(d)),d};function ud(a,d){var h=d.type;if(h in a.g){var g=a.g[h],D=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=D)&&Array.prototype.splice.call(g,D,1),S&&(Oa(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function ld(a,d,h,g){for(var D=0;D<a.length;++D){var S=a[D];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==g)return D}return-1}var dd="closure_lm_"+(1e6*Math.random()|0),hd={};function nv(a,d,h,g,D){if(g&&g.once)return iv(a,d,h,g,D);if(Array.isArray(d)){for(var S=0;S<d.length;S++)nv(a,d[S],h,g,D);return null}return h=md(h),a&&a[Fs]?a.K(d,h,l(g)?!!g.capture:!!g,D):rv(a,d,h,!1,g,D)}function rv(a,d,h,g,D,S){if(!d)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,ye=pd(a);if(ye||(a[dd]=ye=new ka(a)),h=ye.add(d,h,g,O,S),h.proxy)return h;if(g=v0(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)p0||(D=O),D===void 0&&(D=!1),a.addEventListener(d.toString(),g,D);else if(a.attachEvent)a.attachEvent(ov(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function v0(){function a(h){return d.call(a.src,a.listener,h)}let d=I0;return a}function iv(a,d,h,g,D){if(Array.isArray(d)){for(var S=0;S<d.length;S++)iv(a,d[S],h,g,D);return null}return h=md(h),a&&a[Fs]?a.L(d,h,l(g)?!!g.capture:!!g,D):rv(a,d,h,!0,g,D)}function sv(a,d,h,g,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)sv(a,d[S],h,g,D);else g=l(g)?!!g.capture:!!g,h=md(h),a&&a[Fs]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],h=ld(S,h,g,D),-1<h&&(Oa(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=pd(a))&&(d=a.g[d.toString()],a=-1,d&&(a=ld(d,h,g,D)),(h=-1<a?d[a]:null)&&fd(h))}function fd(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Fs])ud(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(ov(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=pd(d))?(ud(h,a),h.h==0&&(h.src=null,d[dd]=null)):Oa(a)}}}function ov(a){return a in hd?hd[a]:hd[a]="on"+a}function I0(a,d){if(a.da)a=!0;else{d=new ks(d,this);var h=a.listener,g=a.ha||a.src;a.fa&&fd(a),a=h.call(g,d)}return a}function pd(a){return a=a[dd],a instanceof ka?a:null}var gd="__closure_events_fn_"+(1e9*Math.random()>>>0);function md(a){return typeof a=="function"?a:(a[gd]||(a[gd]=function(d){return a.handleEvent(d)}),a[gd])}function Qe(){Vn.call(this),this.i=new ka(this),this.M=this,this.F=null}A(Qe,Vn),Qe.prototype[Fs]=!0,Qe.prototype.removeEventListener=function(a,d,h,g){sv(this,a,d,h,g)};function nt(a,d){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Ke(d,a);else if(d instanceof Ke)d.target=d.target||a;else{var D=d;d=new Ke(g,a),w(d,D)}if(D=!0,h)for(var S=h.length-1;0<=S;S--){var O=d.g=h[S];D=Fa(O,g,!0,d)&&D}if(O=d.g=a,D=Fa(O,g,!0,d)&&D,D=Fa(O,g,!1,d)&&D,h)for(S=0;S<h.length;S++)O=d.g=h[S],D=Fa(O,g,!1,d)&&D}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],g=0;g<h.length;g++)Oa(h[g]);delete a.g[d],a.h--}}this.F=null},Qe.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},Qe.prototype.L=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function Fa(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,S=0;S<d.length;++S){var O=d[S];if(O&&!O.da&&O.capture==h){var ye=O.listener,He=O.ha||O.src;O.fa&&ud(a.i,O),D=ye.call(He,g)!==!1&&D}}return D&&!g.defaultPrevented}function av(a,d,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function cv(a){a.g=av(()=>{a.g=null,a.i&&(a.i=!1,cv(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class _0 extends Vn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:cv(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(a){Vn.call(this),this.h=a,this.g={}}A(Ls,Vn);var uv=[];function lv(a){J(a.g,function(d,h){this.g.hasOwnProperty(h)&&fd(d)},a),a.g={}}Ls.prototype.N=function(){Ls.aa.N.call(this),lv(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yd=c.JSON.stringify,w0=c.JSON.parse,E0=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function vd(){}vd.prototype.h=null;function dv(a){return a.h||(a.h=a.i())}function hv(){}var Vs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Id(){Ke.call(this,"d")}A(Id,Ke);function _d(){Ke.call(this,"c")}A(_d,Ke);var wr={},fv=null;function La(){return fv=fv||new Qe}wr.La="serverreachability";function pv(a){Ke.call(this,wr.La,a)}A(pv,Ke);function Us(a){let d=La();nt(d,new pv(d))}wr.STAT_EVENT="statevent";function gv(a,d){Ke.call(this,wr.STAT_EVENT,a),this.stat=d}A(gv,Ke);function rt(a){let d=La();nt(d,new gv(d,a))}wr.Ma="timingevent";function mv(a,d){Ke.call(this,wr.Ma,a),this.size=d}A(mv,Ke);function js(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Bs(){this.g=!0}Bs.prototype.xa=function(){this.g=!1};function T0(a,d,h,g,D,S){a.info(function(){if(a.g)if(S)for(var O="",ye=S.split("&"),He=0;He<ye.length;He++){var de=ye[He].split("=");if(1<de.length){var Ye=de[0];de=de[1];var Je=Ye.split("_");O=2<=Je.length&&Je[1]=="type"?O+(Ye+"="+de+"&"):O+(Ye+"=redacted&")}}else O=null;else O=S;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+h+`
`+O})}function D0(a,d,h,g,D,S,O){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+h+`
`+S+" "+O})}function fi(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+C0(a,h)+(g?" "+g:"")})}function b0(a,d){a.info(function(){return"TIMEOUT: "+d})}Bs.prototype.info=function(){};function C0(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var S=D[0];if(S!="noop"&&S!="stop"&&S!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return yd(h)}catch{return d}}var Va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wd;function Ua(){}A(Ua,vd),Ua.prototype.g=function(){return new XMLHttpRequest},Ua.prototype.i=function(){return{}},wd=new Ua;function Un(a,d,h,g){this.j=a,this.i=d,this.l=h,this.R=g||1,this.U=new Ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vv}function vv(){this.i=null,this.g="",this.h=!1}var Iv={},Ed={};function Td(a,d,h){a.L=1,a.v=qa(wn(d)),a.m=h,a.P=!0,_v(a,null)}function _v(a,d){a.F=Date.now(),ja(a),a.A=wn(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Ov(h.i,"t",g),a.C=0,h=a.j.J,a.h=new vv,a.g=Xv(a.j,h?d:null,!a.m),0<a.O&&(a.M=new _0(y(a.Y,a,a.g),a.O)),d=a.U,h=a.g,g=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(uv[0]=D.toString()),D=uv);for(var S=0;S<D.length;S++){var O=nv(h,D[S],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Us(),T0(a.i,a.u,a.A,a.l,a.R,a.m)}Un.prototype.ca=function(a){a=a.target;let d=this.M;d&&En(a)==3?d.j():this.Y(a)},Un.prototype.Y=function(a){try{if(a==this.g)e:{let Je=En(this.g);var d=this.g.Ba();let mi=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||Bv(this.g)))){this.J||Je!=4||d==7||(d==8||0>=mi?Us(3):Us(2)),Dd(this);var h=this.g.Z();this.X=h;t:if(wv(this)){var g=Bv(this.g);a="";var D=g.length,S=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),$s(this);var O="";break t}this.h.i=new c.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==D-1)});g.length=0,this.h.g+=a,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=h==200,D0(this.i,this.u,this.A,this.l,this.R,Je,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,He=this.g;if((ye=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ye)){var de=ye;break t}}de=null}if(h=de)fi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bd(this,h);else{this.o=!1,this.s=3,rt(12),Er(this),$s(this);break e}}if(this.P){h=!0;let Vt;for(;!this.J&&this.C<O.length;)if(Vt=S0(this,O),Vt==Ed){Je==4&&(this.s=4,rt(14),h=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==Iv){this.s=4,rt(15),fi(this.i,this.l,O,"[Invalid Chunk]"),h=!1;break}else fi(this.i,this.l,Vt,null),bd(this,Vt);if(wv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||O.length!=0||this.h.h||(this.s=1,rt(16),h=!1),this.o=this.o&&h,!h)fi(this.i,this.l,O,"[Invalid Chunked Response]"),Er(this),$s(this);else if(0<O.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Md(Ye),Ye.M=!0,rt(11))}}else fi(this.i,this.l,O,null),bd(this,O);Je==4&&Er(this),this.o&&!this.J&&(Je==4?Kv(this.j,this):(this.o=!1,ja(this)))}else H0(this.g),h==400&&0<O.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),Er(this),$s(this)}}}catch{}finally{}};function wv(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function S0(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?Ed:(h=Number(d.substring(h,g)),isNaN(h)?Iv:(g+=1,g+h>d.length?Ed:(d=d.slice(g,g+h),a.C=g+h,d)))}Un.prototype.cancel=function(){this.J=!0,Er(this)};function ja(a){a.S=Date.now()+a.I,Ev(a,a.I)}function Ev(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=js(y(a.ba,a),d)}function Dd(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Un.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(b0(this.i,this.A),this.L!=2&&(Us(),rt(17)),Er(this),this.s=2,$s(this)):Ev(this,this.S-a)};function $s(a){a.j.G==0||a.J||Kv(a.j,a)}function Er(a){Dd(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,lv(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function bd(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||Cd(h.h,a))){if(!a.K&&Cd(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Ka(h),Ga(h);else break e;Nd(h),rt(18)}}else h.za=D[1],0<h.za-h.T&&37500>D[2]&&h.F&&h.v==0&&!h.C&&(h.C=js(y(h.Za,h),6e3));if(1>=bv(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Dr(h,11)}else if((a.K||h.g==a)&&Ka(h),!B(d))for(D=h.Da.g.parse(d),d=0;d<D.length;d++){let de=D[d];if(h.T=de[0],de=de[1],h.G==2)if(de[0]=="c"){h.K=de[1],h.ia=de[2];let Ye=de[3];Ye!=null&&(h.la=Ye,h.j.info("VER="+h.la));let Je=de[4];Je!=null&&(h.Aa=Je,h.j.info("SVER="+h.Aa));let mi=de[5];mi!=null&&typeof mi=="number"&&0<mi&&(g=1.5*mi,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Vt=a.g;if(Vt){let Ya=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ya){var S=g.h;S.g||Ya.indexOf("spdy")==-1&&Ya.indexOf("quic")==-1&&Ya.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Sd(S,S.h),S.h=null))}if(g.D){let xd=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;xd&&(g.ya=xd,we(g.I,g.D,xd))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var O=a;if(g.qa=Jv(g,g.J?g.ia:null,g.W),O.K){Cv(g.h,O);var ye=O,He=g.L;He&&(ye.I=He),ye.B&&(Dd(ye),ja(ye)),g.g=O}else Gv(g);0<h.i.length&&Wa(h)}else de[0]!="stop"&&de[0]!="close"||Dr(h,7);else h.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Dr(h,7):Rd(h):de[0]!="noop"&&h.l&&h.l.ta(de),h.v=0)}}Us(4)}catch{}}var A0=class{constructor(a,d){this.g=a,this.map=d}};function Tv(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dv(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function bv(a){return a.h?1:a.g?a.g.size:0}function Cd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Sd(a,d){a.g?a.g.add(d):a.h=d}function Cv(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Tv.prototype.cancel=function(){if(this.i=Sv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Sv(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return N(a.i)}function R0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,g=0;g<h;g++)d.push(a[g]);return d}d=[],h=0;for(g in a)d[h++]=a[g];return d}function N0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let g in a)d[h++]=g;return d}}}function Av(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=N0(a),g=R0(a),D=g.length,S=0;S<D;S++)d.call(void 0,g[S],h&&h[S],a)}var Rv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function M0(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),D=null;if(0<=g){var S=a[h].substring(0,g);D=a[h].substring(g+1)}else S=a[h];d(S,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Tr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Tr){this.h=a.h,Ba(this,a.j),this.o=a.o,this.g=a.g,$a(this,a.s),this.l=a.l;var d=a.i,h=new zs;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),Nv(this,h),this.m=a.m}else a&&(d=String(a).match(Rv))?(this.h=!1,Ba(this,d[1]||"",!0),this.o=qs(d[2]||""),this.g=qs(d[3]||"",!0),$a(this,d[4]),this.l=qs(d[5]||"",!0),Nv(this,d[6]||"",!0),this.m=qs(d[7]||"")):(this.h=!1,this.i=new zs(null,this.h))}Tr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Hs(d,Mv,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Hs(d,Mv,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Hs(h,h.charAt(0)=="/"?O0:P0,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Hs(h,F0)),a.join("")};function wn(a){return new Tr(a)}function Ba(a,d,h){a.j=h?qs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function $a(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Nv(a,d,h){d instanceof zs?(a.i=d,L0(a.i,a.h)):(h||(d=Hs(d,k0)),a.i=new zs(d,a.h))}function we(a,d,h){a.i.set(d,h)}function qa(a){return we(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function qs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Hs(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,x0),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function x0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Mv=/[#\/\?@]/g,P0=/[#\?:]/g,O0=/[#\?]/g,k0=/[#\?@]/g,F0=/#/g;function zs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function jn(a){a.g||(a.g=new Map,a.h=0,a.i&&M0(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=zs.prototype,t.add=function(a,d){jn(this),this.i=null,a=pi(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function xv(a,d){jn(a),d=pi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Pv(a,d){return jn(a),d=pi(a,d),a.g.has(d)}t.forEach=function(a,d){jn(this),this.g.forEach(function(h,g){h.forEach(function(D){a.call(d,D,g,this)},this)},this)},t.na=function(){jn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let D=a[g];for(let S=0;S<D.length;S++)h.push(d[g])}return h},t.V=function(a){jn(this);let d=[];if(typeof a=="string")Pv(this,a)&&(d=d.concat(this.g.get(pi(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},t.set=function(a,d){return jn(this),this.i=null,a=pi(this,a),Pv(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Ov(a,d,h){xv(a,d),0<h.length&&(a.i=null,a.g.set(pi(a,d),N(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let S=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var D=S;O[g]!==""&&(D+="="+encodeURIComponent(String(O[g]))),a.push(D)}}return this.i=a.join("&")};function pi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function L0(a,d){d&&!a.j&&(jn(a),a.i=null,a.g.forEach(function(h,g){var D=g.toLowerCase();g!=D&&(xv(this,g),Ov(this,D,h))},a)),a.j=d}function V0(a,d){let h=new Bs;if(c.Image){let g=new Image;g.onload=_(Bn,h,"TestLoadImage: loaded",!0,d,g),g.onerror=_(Bn,h,"TestLoadImage: error",!1,d,g),g.onabort=_(Bn,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(Bn,h,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function U0(a,d){let h=new Bs,g=new AbortController,D=setTimeout(()=>{g.abort(),Bn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(D),S.ok?Bn(h,"TestPingServer: ok",!0,d):Bn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Bn(h,"TestPingServer: error",!1,d)})}function Bn(a,d,h,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(h)}catch{}}function j0(){this.g=new E0}function B0(a,d,h){let g=h||"";try{Av(a,function(D,S){let O=D;l(D)&&(O=yd(D)),d.push(g+S+"="+encodeURIComponent(O))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function Gs(a){this.l=a.Ub||null,this.j=a.eb||!1}A(Gs,vd),Gs.prototype.g=function(){return new Ha(this.l,this.j)},Gs.prototype.i=function(a){return function(){return a}}({});function Ha(a,d){Qe.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ha,Qe),t=Ha.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ks(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ws(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ks(this)),this.g&&(this.readyState=3,Ks(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kv(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function kv(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ws(this):Ks(this),this.readyState==3&&kv(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ws(this))},t.Qa=function(a){this.g&&(this.response=a,Ws(this))},t.ga=function(){this.g&&Ws(this)};function Ws(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ks(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Ks(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Fv(a){let d="";return J(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Ad(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=Fv(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):we(a,d,h))}function Se(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Se,Qe);var $0=/^https?$/i,q0=["POST","PUT"];t=Se.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wd.g(),this.v=this.o?dv(this.o):dv(wd),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){Lv(this,S);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)h.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())h.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),D=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(q0,d,void 0))||g||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,O]of h)this.g.setRequestHeader(S,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jv(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){Lv(this,S)}};function Lv(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Vv(a),za(a)}function Vv(a){a.A||(a.A=!0,nt(a,"complete"),nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,nt(this,"complete"),nt(this,"abort"),za(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),za(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Uv(this):this.bb())},t.bb=function(){Uv(this)};function Uv(a){if(a.h&&typeof o<"u"&&(!a.v[1]||En(a)!=4||a.Z()!=2)){if(a.u&&En(a)==4)av(a.Ea,0,a);else if(nt(a,"readystatechange"),En(a)==4){a.h=!1;try{let O=a.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=O===0){var D=String(a.D).match(Rv)[1]||null;!D&&c.self&&c.self.location&&(D=c.self.location.protocol.slice(0,-1)),g=!$0.test(D?D.toLowerCase():"")}h=g}if(h)nt(a,"complete"),nt(a,"success");else{a.m=6;try{var S=2<En(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Vv(a)}}finally{za(a)}}}}function za(a,d){if(a.g){jv(a);let h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||nt(a,"ready");try{h.onreadystatechange=g}catch{}}}function jv(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function En(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),w0(d)}};function Bv(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function H0(a){let d={};a=(a.g&&2<=En(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(B(a[g]))continue;var h=T(a[g]);let D=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[D]||[];d[D]=S,S.push(h)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function $v(a){this.Aa=0,this.i=[],this.j=new Bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qs("baseRetryDelayMs",5e3,a),this.cb=Qs("retryDelaySeedMs",1e4,a),this.Wa=Qs("forwardChannelMaxRetries",2,a),this.wa=Qs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Tv(a&&a.concurrentRequestLimit),this.Da=new j0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$v.prototype,t.la=8,t.G=1,t.connect=function(a,d,h,g){rt(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=Jv(this,null,this.W),Wa(this)};function Rd(a){if(qv(a),a.G==3){var d=a.U++,h=wn(a.I);if(we(h,"SID",a.K),we(h,"RID",d),we(h,"TYPE","terminate"),Ys(a,h),d=new Un(a,a.j,d),d.L=2,d.v=qa(wn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=Xv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ja(d)}Yv(a)}function Ga(a){a.g&&(Md(a),a.g.cancel(),a.g=null)}function qv(a){Ga(a),a.u&&(c.clearTimeout(a.u),a.u=null),Ka(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Wa(a){if(!Dv(a.h)&&!a.s){a.s=!0;var d=a.Ga;Ps||tv(),Os||(Ps(),Os=!0),cd.add(d,a),a.B=0}}function z0(a,d){return bv(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=js(y(a.Ga,a,d),Qv(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let D=new Un(this,this.j,a),S=this.o;if(this.S&&(S?(S=m(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(D.H=S,S=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=zv(this,D,d),h=wn(this.I),we(h,"RID",a),we(h,"CVER",22),this.D&&we(h,"X-HTTP-Session-Id",this.D),Ys(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(Fv(S)))+"&"+d:this.m&&Ad(h,this.m,S)),Sd(this.h,D),this.Ua&&we(h,"TYPE","init"),this.P?(we(h,"$req",d),we(h,"SID","null"),D.T=!0,Td(D,h,null)):Td(D,h,d),this.G=2}}else this.G==3&&(a?Hv(this,a):this.i.length==0||Dv(this.h)||Hv(this))};function Hv(a,d){var h;d?h=d.l:h=a.U++;let g=wn(a.I);we(g,"SID",a.K),we(g,"RID",h),we(g,"AID",a.T),Ys(a,g),a.m&&a.o&&Ad(g,a.m,a.o),h=new Un(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=zv(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Sd(a.h,h),Td(h,g,d)}function Ys(a,d){a.H&&J(a.H,function(h,g){we(d,g,h)}),a.l&&Av({},function(h,g){we(d,g,h)})}function zv(a,d,h){h=Math.min(a.i.length,h);var g=a.l?y(a.l.Na,a.l,a):null;e:{var D=a.i;let S=-1;for(;;){let O=["count="+h];S==-1?0<h?(S=D[0].g,O.push("ofs="+S)):S=0:O.push("ofs="+S);let ye=!0;for(let He=0;He<h;He++){let de=D[He].g,Ye=D[He].map;if(de-=S,0>de)S=Math.max(0,D[He].g-100),ye=!1;else try{B0(Ye,O,"req"+de+"_")}catch{g&&g(Ye)}}if(ye){g=O.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,g}function Gv(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Ps||tv(),Os||(Ps(),Os=!0),cd.add(d,a),a.v=0}}function Nd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=js(y(a.Fa,a),Qv(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Wv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=js(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),Ga(this),Wv(this))};function Md(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Wv(a){a.g=new Un(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=wn(a.qa);we(d,"RID","rpc"),we(d,"SID",a.K),we(d,"AID",a.T),we(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&we(d,"TO",a.ja),we(d,"TYPE","xmlhttp"),Ys(a,d),a.m&&a.o&&Ad(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=qa(wn(d)),h.m=null,h.P=!0,_v(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Ga(this),Nd(this),rt(19))};function Ka(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Kv(a,d){var h=null;if(a.g==d){Ka(a),Md(a),a.g=null;var g=2}else if(Cd(a.h,d))h=d.D,Cv(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var D=a.B;g=La(),nt(g,new mv(g,h)),Wa(a)}else Gv(a);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&z0(a,d)||g==2&&Nd(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),D){case 1:Dr(a,5);break;case 4:Dr(a,10);break;case 3:Dr(a,6);break;default:Dr(a,2)}}}function Qv(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function Dr(a,d){if(a.j.info("Error code "+d),d==2){var h=y(a.fb,a),g=a.Xa;let D=!g;g=new Tr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ba(g,"https"),qa(g),D?V0(g.toString(),h):U0(g.toString(),h)}else rt(2);a.G=0,a.l&&a.l.sa(d),Yv(a),qv(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Yv(a){if(a.G=0,a.ka=[],a.l){let d=Sv(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Jv(a,d,h){var g=h instanceof Tr?wn(h):new Tr(h);if(g.g!="")d&&(g.g=d+"."+g.g),$a(g,g.s);else{var D=c.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var S=new Tr(null);g&&Ba(S,g),d&&(S.g=d),D&&$a(S,D),h&&(S.l=h),g=S}return h=a.D,d=a.ya,h&&d&&we(g,h,d),we(g,"VER",a.la),Ys(a,g),g}function Xv(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Se(new Gs({eb:h})):new Se(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zv(){}t=Zv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qa(){}Qa.prototype.g=function(a,d){return new ft(a,d)};function ft(a,d){Qe.call(this),this.g=new $v(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!B(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new gi(this)}A(ft,Qe),ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ft.prototype.close=function(){Rd(this.g)},ft.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=yd(a),a=h);d.i.push(new A0(d.Ya++,a)),d.G==3&&Wa(d)},ft.prototype.N=function(){this.g.l=null,delete this.j,Rd(this.g),delete this.g,ft.aa.N.call(this)};function eI(a){Id.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(eI,Id);function tI(){_d.call(this),this.status=1}A(tI,_d);function gi(a){this.g=a}A(gi,Zv),gi.prototype.ua=function(){nt(this.g,"a")},gi.prototype.ta=function(a){nt(this.g,new eI(a))},gi.prototype.sa=function(a){nt(this.g,new tI)},gi.prototype.ra=function(){nt(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,ft.prototype.send=ft.prototype.o,ft.prototype.open=ft.prototype.m,ft.prototype.close=ft.prototype.close,ug=Mn.createWebChannelTransport=function(){return new Qa},cg=Mn.getStatEventTarget=function(){return La()},ag=Mn.Event=wr,il=Mn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,Qo=Mn.ErrorCode=Va,yv.COMPLETE="complete",og=Mn.EventType=yv,hv.EventType=Vs,Vs.OPEN="a",Vs.CLOSE="b",Vs.ERROR="c",Vs.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,es=Mn.WebChannel=hv,sg=Mn.FetchXmlHttpFactory=Gs,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,ig=Mn.XhrIo=Se}).apply(typeof rl<"u"?rl:typeof self<"u"?self:typeof window<"u"?window:{});var CD="@firebase/firestore";var qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");var _s="10.12.1";var ti=new sr("@firebase/firestore");function Yo(){return ti.logLevel}function L(t,...e){if(ti.logLevel<=oe.DEBUG){let n=e.map(zm);ti.debug(`Firestore (${_s}): ${t}`,...n)}}function On(t,...e){if(ti.logLevel<=oe.ERROR){let n=e.map(zm);ti.error(`Firestore (${_s}): ${t}`,...n)}}function as(t,...e){if(ti.logLevel<=oe.WARN){let n=e.map(zm);ti.warn(`Firestore (${_s}): ${t}`,...n)}}function zm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function z(t="Unexpected state"){let e=`FIRESTORE (${_s}) INTERNAL ASSERTION FAILED: `+t;throw On(e),new Error(e)}function _e(t,e){t||z()}function Q(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Ot{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var ul=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},pg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}shutdown(){}},gg=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},mg=class{constructor(e){this.t=e,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>C(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new ul(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new qe(e)}},yg=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},vg=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yg(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ig=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},_g=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new Ig(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function g1(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ll=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=g1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function cs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ge=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ge(0,0))}static max(){return new t(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var dl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(),r===void 0?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Re=class t extends dl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},m1=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wt=class t extends dl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return m1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var j=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};var wg=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};wg.UNKNOWN_ID=-1;function y1(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new ni(i,j.empty(),e)}function v1(t){return new ni(t.readTime,t.key,-1)}var ni=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Y.min(),j.empty(),-1)}static max(){return new t(Y.max(),j.empty(),-1)}};function I1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var _1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Eg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function fa(t){return C(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==_1)throw t;L("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(f=>{o[l]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function w1(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pa(t){return t.name==="IndexedDbTransactionError"}var nb=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Ul(t){return t==null}function na(t){return t===0&&1/t==-1/0}function E1(t){return typeof t=="number"&&Number.isInteger(t)&&!na(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var T1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],BG=[...T1,"documentOverlays"],D1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],b1=D1,$G=[...b1,"indexConfiguration","indexState","indexEntries"];function SD(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ws(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new is(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new is(this.root,e,this.comparator,!1)}getReverseIterator(){return new is(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new is(this.root,e,this.comparator,!0)}},is=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},hn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hl(this.data.getIterator())}getIteratorFrom(e){return new hl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},hl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var dn=class t{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new t([])}unionWith(e){let n=new tt(wt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var fl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var st=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fl("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};st.EMPTY_BYTE_STRING=new st("");var C1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kn(t){if(_e(!!t),typeof t=="string"){let e=0,n=C1.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hr(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}function Gm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wm(t){let e=t.mapValue.fields.__previous_value__;return Gm(e)?Wm(e):e}function ra(t){let e=kn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}var Tg=class{constructor(e,n,r,i,s,o,c,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l}},pl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gm(t)?4:ib(t)?9007199254740991:10:z()}function gn(t,e){if(t===e)return!0;let n=ri(t);if(n!==ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ra(t).isEqual(ra(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=kn(i.timestampValue),c=kn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return hr(i.bytesValue).isEqual(hr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ae(i.geoPointValue.latitude)===Ae(s.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ae(i.integerValue)===Ae(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ae(i.doubleValue),c=Ae(s.doubleValue);return o===c?na(o)===na(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return cs(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(SD(o)!==SD(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!gn(o[u],c[u])))return!1;return!0}(t,e);default:return z()}}function ia(t,e){return(t.values||[]).find(n=>gn(n,e))!==void 0}function us(t,e){if(t===e)return 0;let n=ri(t),r=ri(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Ae(s.integerValue||s.doubleValue),u=Ae(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return AD(t.timestampValue,e.timestampValue);case 4:return AD(ra(t),ra(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,o){let c=hr(s),u=hr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=pe(c[l],u[l]);if(f!==0)return f}return pe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=pe(Ae(s.latitude),Ae(o.latitude));return c!==0?c:pe(Ae(s.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let c=s.values||[],u=o.values||[];for(let l=0;l<c.length&&l<u.length;++l){let f=us(c[l],u[l]);if(f)return f}return pe(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===sl.mapValue&&o===sl.mapValue)return 0;if(s===sl.mapValue)return 1;if(o===sl.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),l=o.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let y=pe(u[p],f[p]);if(y!==0)return y;let _=us(c[u[p]],l[f[p]]);if(_!==0)return _}return pe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw z()}}function AD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=kn(t),r=kn(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function ls(t){return Dg(t)}function Dg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=kn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return j.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Dg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Dg(n.fields[o])}`;return i+"}"}(t.mapValue):z()}function bg(t){return!!t&&"integerValue"in t}function Km(t){return!!t&&"arrayValue"in t}function RD(t){return!!t&&"nullValue"in t}function ND(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function al(t){return!!t&&"mapValue"in t}function Xo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xo(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ib(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Xt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!al(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xo(n)}setAll(e){let n=wt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Xo(o):i.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());al(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];al(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ws(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Xo(this.value))}};function sb(t){let e=[];return ws(t.fields,(n,r)=>{let i=new wt([n]);if(al(r)){let s=sb(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new dn(e)}var Zt=class t{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Y.min(),Y.min(),Y.min(),Xt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Y.min(),Y.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Y.min(),Y.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ds=class{constructor(e,n){this.position=e,this.inclusive=n}};function MD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),n.key):r=us(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function xD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}var hs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function S1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var gl=class{},Ve=class t extends gl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Sg(e,n,r):n==="array-contains"?new Ng(e,r):n==="in"?new Mg(e,r):n==="not-in"?new xg(e,r):n==="array-contains-any"?new Pg(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ag(e,r):new Rg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(us(n,this.value)):n!==null&&ri(this.value)===ri(n)&&this.matchesComparison(us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},mn=class t extends gl{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return ob(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ob(t){return t.op==="and"}function ab(t){return A1(t)&&ob(t)}function A1(t){for(let e of t.filters)if(e instanceof mn)return!1;return!0}function Cg(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+ls(t.value);if(ab(t))return t.filters.map(e=>Cg(e)).join(",");{let e=t.filters.map(n=>Cg(n)).join(",");return`${t.op}(${e})`}}function cb(t,e){return t instanceof Ve?function(r,i){return i instanceof Ve&&r.op===i.op&&r.field.isEqual(i.field)&&gn(r.value,i.value)}(t,e):t instanceof mn?function(r,i){return i instanceof mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&cb(o,i.filters[c]),!0):!1}(t,e):void z()}function ub(t){return t instanceof Ve?function(n){return`${n.field.canonicalString()} ${n.op} ${ls(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(ub).join(" ,")+"}"}(t):"Filter"}var Sg=class extends Ve{constructor(e,n,r){super(e,n,r),this.key=j.fromName(r.referenceValue)}matches(e){let n=j.comparator(e.key,this.key);return this.matchesComparison(n)}},Ag=class extends Ve{constructor(e,n){super(e,"in",n),this.keys=lb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Rg=class extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=lb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function lb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}var Ng=class extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Km(n)&&ia(n.arrayValue,this.value)}},Mg=class extends Ve{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ia(this.value.arrayValue,n)}},xg=class extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ia(this.value.arrayValue,n)}},Pg=class extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Km(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ia(this.value.arrayValue,r))}};var Og=class{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function PD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Og(t,e,n,r,i,s,o)}function Qm(t){let e=Q(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ul(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ls(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ls(r)).join(",")),e.ue=n}return e.ue}function Ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xD(t.startAt,e.startAt)&&xD(t.endAt,e.endAt)}function kg(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var fs=class{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function R1(t,e,n,r,i,s,o,c){return new fs(t,e,n,r,i,s,o,c)}function Jm(t){return new fs(t)}function OD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function N1(t){return t.collectionGroup!==null}function Zo(t){let e=Q(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new hs(s,r))}),n.has(wt.keyField().canonicalString())||e.ce.push(new hs(wt.keyField(),r))}return e.ce}function fn(t){let e=Q(t);return e.le||(e.le=M1(e,Zo(t))),e.le}function M1(t,e){if(t.limitType==="F")return PD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new hs(i.field,s)});let n=t.endAt?new ds(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ds(t.startAt.position,t.startAt.inclusive):null;return PD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fg(t,e,n){return new fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jl(t,e){return Ym(fn(t),fn(e))&&t.limitType===e.limitType}function db(t){return`${Qm(fn(t))}|lt:${t.limitType}`}function ts(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ub(i)).join(", ")}]`),Ul(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ls(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ls(i)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function Bl(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):j.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Zo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let l=MD(o,c,u);return o.inclusive?l<=0:l<0}(r.startAt,Zo(r),i)||r.endAt&&!function(o,c,u){let l=MD(o,c,u);return o.inclusive?l>=0:l>0}(r.endAt,Zo(r),i))}(t,e)}function x1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hb(t){return(e,n)=>{let r=!1;for(let i of Zo(t)){let s=P1(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function P1(t,e,n){let r=t.field.isKeyField()?j.comparator(e.key,n.key):function(s,o,c){let u=o.data.field(s),l=c.data.field(s);return u!==null&&l!==null?us(u,l):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var fr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return rb(this.inner)}size(){return this.innerSize}};var O1=new Ne(j.comparator);function Fn(){return O1}var fb=new Ne(j.comparator);function Jo(...t){let e=fb;for(let n of t)e=e.insert(n.key,n);return e}function pb(t){let e=fb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xr(){return ea()}function gb(){return ea()}function ea(){return new fr(t=>t.toString(),(t,e)=>t.isEqual(e))}var k1=new Ne(j.comparator),F1=new tt(j.comparator);function ae(...t){let e=F1;for(let n of t)e=e.add(n);return e}var L1=new tt(pe);function V1(){return L1}function mb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:na(e)?"-0":e}}function yb(t){return{integerValue:""+t}}function U1(t,e){return E1(e)?yb(e):mb(t,e)}var ps=class{constructor(){this._=void 0}};function j1(t,e,n){return t instanceof gs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Gm(s)&&(s=Wm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ii?Ib(t,e):t instanceof si?_b(t,e):function(i,s){let o=vb(i,s),c=kD(o)+kD(i.Pe);return bg(o)&&bg(i.Pe)?yb(c):mb(i.serializer,c)}(t,e)}function B1(t,e,n){return t instanceof ii?Ib(t,e):t instanceof si?_b(t,e):n}function vb(t,e){return t instanceof ms?function(r){return bg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var gs=class extends ps{},ii=class extends ps{constructor(e){super(),this.elements=e}};function Ib(t,e){let n=wb(e);for(let r of t.elements)n.some(i=>gn(i,r))||n.push(r);return{arrayValue:{values:n}}}var si=class extends ps{constructor(e){super(),this.elements=e}};function _b(t,e){let n=wb(e);for(let r of t.elements)n=n.filter(i=>!gn(i,r));return{arrayValue:{values:n}}}var ms=class extends ps{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function kD(t){return Ae(t.integerValue||t.doubleValue)}function wb(t){return Km(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $1(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ii&&i instanceof ii||r instanceof si&&i instanceof si?cs(r.elements,i.elements,gn):r instanceof ms&&i instanceof ms?gn(r.Pe,i.Pe):r instanceof gs&&i instanceof gs}(t.transform,e.transform)}var Lg=class{constructor(e,n){this.version=e,this.transformResults=n}},Pn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ys=class{};function Eb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sa(t.key,Pn.none()):new oi(t.key,t.data,Pn.none());{let n=t.data,r=Xt.empty(),i=new tt(wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ln(t.key,r,new dn(i.toArray()),Pn.none())}}function q1(t,e,n){t instanceof oi?function(i,s,o){let c=i.value.clone(),u=LD(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ln?function(i,s,o){if(!cl(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=LD(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Tb(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ta(t,e,n,r){return t instanceof oi?function(s,o,c,u){if(!cl(s.precondition,o))return c;let l=s.value.clone(),f=VD(s.fieldTransforms,u,o);return l.setAll(f),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ln?function(s,o,c,u){if(!cl(s.precondition,o))return c;let l=VD(s.fieldTransforms,u,o),f=o.data;return f.setAll(Tb(s)),f.setAll(l),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,c){return cl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function H1(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=vb(r.transform,i||null);s!=null&&(n===null&&(n=Xt.empty()),n.set(r.field,s))}return n||null}function FD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cs(r,i,(s,o)=>$1(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var oi=class extends ys{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ln=class extends ys{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Tb(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function LD(t,e,n){let r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,B1(o,c,n[i]))}return r}function VD(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,j1(s,o,e))}return r}var sa=class extends ys{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Vg=class extends ys{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ug=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&q1(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=gb();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;let u=Eb(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&cs(this.mutations,e.mutations,(n,r)=>FD(n,r))&&cs(this.baseMutations,e.baseMutations,(n,r)=>FD(n,r))}},jg=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length);let i=function(){return k1}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Bg=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $g=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,le;function z1(t){switch(t){default:return z();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Db(t){if(t===void 0)return On("GRPC error has no .code"),M.UNKNOWN;switch(t){case ke.OK:return M.OK;case ke.CANCELLED:return M.CANCELLED;case ke.UNKNOWN:return M.UNKNOWN;case ke.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ke.INTERNAL:return M.INTERNAL;case ke.UNAVAILABLE:return M.UNAVAILABLE;case ke.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ke.NOT_FOUND:return M.NOT_FOUND;case ke.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ke.ABORTED:return M.ABORTED;case ke.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ke.DATA_LOSS:return M.DATA_LOSS;default:return z()}}(le=ke||(ke={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";var UD=null;function G1(){return new TextEncoder}var W1=new ur([4294967295,4294967295],0);function jD(t){let e=G1().encode(t),n=new rg;return n.update(e),new Uint8Array(n.digest())}function BD(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ur([n,r],0),new ur([i,s],0)]}var qg=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zr(`Invalid padding: ${n}`);if(r<0)throw new Zr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ur.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ur.fromNumber(r)));return i.compare(W1)===1&&(i=new ur([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=jD(e),[r,i]=BD(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=jD(e),[r,i]=BD(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Zr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ml=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,oa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Y.min(),i,new Ne(pe),Fn(),ae())}},oa=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ae(),ae(),ae())}};var ss=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},yl=class{constructor(e,n){this.targetId=e,this.me=n}},vl=class{constructor(e,n,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Il=class{constructor(){this.fe=0,this.ge=qD(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new oa(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=qD()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Hg=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fn(),this.qe=$D(),this.Qe=new Ne(pe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(kg(s))if(r===0){let o=new j(s.path);this.Ue(n,o,Zt.newNoDocument(o,Y.min()))}else _e(r===1);else{let o=this.Ye(n);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}UD?.et(function(f,p,y,_,A){var N,R,k,B,U,ce;let Ce={localCacheCount:f,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},J=p.unchangedNames;return J&&(Ce.bloomFilter={applied:A===0,hashCount:(N=J?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(B=(k=(R=J?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&B!==void 0?B:0,padding:(ce=(U=J?.bits)===null||U===void 0?void 0:U.padding)!==null&&ce!==void 0?ce:0,mightContain:E=>{var m;return(m=_?.mightContain(E))!==null&&m!==void 0&&m}}),Ce}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,c;try{o=hr(r).toUint8Array()}catch(u){if(u instanceof fl)return as("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new qg(o,i,s)}catch(u){return as(u instanceof Zr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&kg(c.target)){let u=new j(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Zt.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=ae();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new ml(e,n,this.Qe,this.ke,r);return this.ke=Fn(),this.qe=$D(),this.Qe=new Ne(pe),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Il,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(pe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Il),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function $D(){return new Ne(j.comparator)}function qD(){return new Ne(j.comparator)}var K1={asc:"ASCENDING",desc:"DESCENDING"},Q1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y1={and:"AND",or:"OR"},zg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Gg(t,e){return t.useProto3Json||Ul(e)?e:{value:e}}function _l(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function J1(t,e){return _l(t,e.toTimestamp())}function pn(t){return _e(!!t),Y.fromTimestamp(function(n){let r=kn(n);return new Ge(r.seconds,r.nanos)}(t))}function Xm(t,e){return Wg(t,e).canonicalString()}function Wg(t,e){let n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Cb(t){let e=Re.fromString(t);return _e(Mb(e)),e}function Kg(t,e){return Xm(t.databaseId,e.path)}function lg(t,e){let n=Cb(e);if(n.get(1)!==t.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(Ab(n))}function Sb(t,e){return Xm(t.databaseId,e)}function X1(t){let e=Cb(t);return e.length===4?Re.emptyPath():Ab(e)}function Qg(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ab(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function HD(t,e,n){return{name:Kg(t,e),fields:n.value.mapValue.fields}}function Z1(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,f){return l.useProto3Json?(_e(f===void 0||typeof f=="string"),st.fromBase64String(f||"")):(_e(f===void 0||f instanceof Buffer||f instanceof Uint8Array),st.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(l){let f=l.code===void 0?M.UNKNOWN:Db(l.code);return new V(f,l.message||"")}(o);n=new vl(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=lg(t,r.document.name),s=pn(r.document.updateTime),o=r.document.createTime?pn(r.document.createTime):Y.min(),c=new Xt({mapValue:{fields:r.document.fields}}),u=Zt.newFoundDocument(i,s,o,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new ss(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=lg(t,r.document),s=r.readTime?pn(r.readTime):Y.min(),o=Zt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new ss([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=lg(t,r.document),s=r.removedTargetIds||[];n=new ss([],s,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new $g(i,s),c=r.targetId;n=new yl(c,o)}}return n}function eF(t,e){let n;if(e instanceof oi)n={update:HD(t,e.key,e.value)};else if(e instanceof sa)n={delete:Kg(t,e.key)};else if(e instanceof Ln)n={update:HD(t,e.key,e.data),updateMask:uF(e.fieldMask)};else{if(!(e instanceof Vg))return z();n={verify:Kg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof gs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ii)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof si)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ms)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:J1(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:z()}(t,e.precondition)),n}function tF(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?pn(i.updateTime):pn(s);return o.isEqual(Y.min())&&(o=pn(s)),new Lg(o,i.transformResults||[])}(n,e))):[]}function nF(t,e){return{documents:[Sb(t,e.path)]}}function rF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Sb(t,i);let s=function(l){if(l.length!==0)return Nb(mn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(f=>function(y){return{field:ns(y.field),direction:oF(y.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=Gg(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function iF(t){let e=X1(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(r===1);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){let y=Rb(p);return y instanceof mn&&ab(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(A){return new hs(rs(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(p){let y;return y=typeof p=="object"?p.value:p,Ul(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,_=p.values||[];return new ds(_,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,_=p.values||[];return new ds(_,y)}(n.endAt)),R1(e,i,o,s,c,"F",u,l)}function sF(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Rb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=rs(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=rs(n.unaryFilter.field);return Ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=rs(n.unaryFilter.field);return Ve.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=rs(n.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(t):t.fieldFilter!==void 0?function(n){return Ve.create(rs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>Rb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(t):z()}function oF(t){return K1[t]}function aF(t){return Q1[t]}function cF(t){return Y1[t]}function ns(t){return{fieldPath:t.canonicalString()}}function rs(t){return wt.fromServerFormat(t.fieldPath)}function Nb(t){return t instanceof Ve?function(n){if(n.op==="=="){if(ND(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NAN"}};if(RD(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ND(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NAN"}};if(RD(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ns(n.field),op:aF(n.op),value:n.value}}}(t):t instanceof mn?function(n){let r=n.getFilters().map(i=>Nb(i));return r.length===1?r[0]:{compositeFilter:{op:cF(n.op),filters:r}}}(t):z()}function uF(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Mb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var aa=class t{constructor(e,n,r,i,s=Y.min(),o=Y.min(),c=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Yg=class{constructor(e){this.ct=e}};function lF(t){let e=iF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fg(e,e.limit,"L"):e}var wl=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),na(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=kn(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(hr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?ib(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):z()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),j.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};wl.bt=new wl;var Jg=class{constructor(){this._n=new Xg}addToCollectionParentIndex(e,n){return this._n.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(ni.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Xg=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tt(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(Re.comparator)).toArray()}};var HG=new Uint8Array(0);var ln=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(41943040,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var ca=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Zg=class{constructor(){this.changes=new fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var em=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var tm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ta(r.mutation,i,dn.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){let i=Xr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Jo();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Fn(),o=ea(),c=function(){return ea()}();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Ln)?s=s.insert(l.key,l):f!==void 0?(o.set(l.key,f.mutation.getFieldMask()),ta(f.mutation,l,f.mutation.getFieldMask(),Ge.now())):o.set(l.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,f)=>o.set(l,f)),n.forEach((l,f)=>{var p;return c.set(l,new em(f,(p=o.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=ea(),i=new Ne((o,c)=>o-c),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||dn.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||ae()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=gb();f.forEach(y=>{if(!s.has(y)){let _=Eb(n.get(y),r.get(y));_!==null&&p.set(y,_),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):N1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(Xr()),c=-1,u=s;return o.next(l=>P.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ae())).next(f=>({batchId:c,changes:pb(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(r=>{let i=Jo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Jo();return this.indexManager.getCollectionParents(e,s).next(c=>P.forEach(c,u=>{let l=function(p,y){return new fs(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let f=l.getKey();o.get(f)===null&&(o=o.insert(f,Zt.newInvalidDocument(f)))});let c=Jo();return o.forEach((u,l)=>{let f=s.get(u);f!==void 0&&ta(f.mutation,l,dn.empty(),Ge.now()),Bl(n,l)&&(c=c.insert(u,l))}),c})}};var nm=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return P.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:lF(i.bundledQuery),readTime:pn(i.readTime)}}(n)),P.resolve()}};var rm=class{constructor(){this.overlays=new Ne(j.comparator),this.hr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Xr();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Xr(),s=n.length+1,o=new j(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((l,f)=>l-f),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=s.get(l.largestBatchId);f===null&&(f=Xr(),s=s.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=Xr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return P.resolve(c)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Bg(n,r));let s=this.hr.get(n);s===void 0&&(s=ae(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var ua=class{constructor(){this.Pr=new tt(Fe.Ir),this.Tr=new tt(Fe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Fe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Fe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new j(new Re([])),r=new Fe(n,e),i=new Fe(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new j(new Re([])),r=new Fe(n,e),i=new Fe(n,e+1),s=ae();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Fe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return j.comparator(e.key,n.key)||pe(e.pr,n.pr)}static Er(e,n){return pe(e.pr,n.pr)||j.comparator(e.key,n.key)}};var im=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new tt(Fe.Ir)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ug(s,n,r,i);this.mutationQueue.push(o);for(let c of i)this.wr=this.wr.add(new Fe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let c=this.Sr(o.pr);s.push(c)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(pe);return n.forEach(i=>{let s=new Fe(i,0),o=new Fe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{r=r.add(c.pr)})}),P.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;j.isDocumentKey(s)||(s=s.child(""));let o=new Fe(new j(s),0),c=new tt(pe);return this.wr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.pr)),!0)},o),P.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return P.forEach(n.mutations,i=>{let s=new Fe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Fe(n,0),i=this.wr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var sm=class{constructor(e){this.vr=e,this.docs=function(){return new Ne(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fn(),o=n.path,c=new j(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||I1(v1(f),r)<=0||(i.has(f.key)||Bl(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){z()}Fr(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new om(this)}getSize(e){return P.resolve(this.size)}},om=class extends Zg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var am=class{constructor(e){this.persistence=e,this.Mr=new fr(n=>Qm(n),Ym),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ua,this.targetCount=0,this.Lr=ca.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),P.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new ca(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.qn(n),P.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Nr.containsKey(n))}};var cm=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new nb(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new am(this),this.indexManager=new Jg,this.remoteDocumentCache=function(i){return new sm(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Yg(n),this.$r=new nm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new im(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);let i=new um(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return P.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},um=class extends Eg{constructor(e){super(),this.currentSequenceNumber=e}},lm=class t{constructor(e){this.persistence=e,this.zr=new ua,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw z()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),P.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Jr,r=>{let i=j.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return P.or([()=>P.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var dm=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ae(),i=ae();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var hm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return BT()?8:w1(_t())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new hm;return this.Ji(e,n,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(e,n,o,c.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Yo()<=oe.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),P.resolve()):(Yo()<=oe.DEBUG&&L("QueryEngine","Query:",ts(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Yo()<=oe.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):P.resolve())}ji(e,n){if(OD(n))return P.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Fg(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ae(...s);return this.zi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Zi(n,c);return this.Xi(n,l,o,u.readTime)?this.ji(e,Fg(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return OD(n)||i.isEqual(Y.min())?P.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?P.resolve(null):(Yo()<=oe.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ts(n)),this.es(e,o,n,y1(i,-1)).next(c=>c))})}Zi(e,n){let r=new tt(hb(e));return n.forEach((i,s)=>{Bl(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Yo()<=oe.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",ts(n)),this.zi.getDocumentsMatchingQuery(e,n,ni.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var pm=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ne(pe),this.rs=new fr(s=>Qm(s),Ym),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function dF(t,e,n,r){return new pm(t,e,n,r)}function xb(t,e){return C(this,null,function*(){let n=Q(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=ae();for(let l of i){o.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of s){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:c}))})})})}function hF(t,e){let n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,l,f){let p=l.batch,y=p.keys(),_=P.resolve();return y.forEach(A=>{_=_.next(()=>f.getEntry(u,A)).next(N=>{let R=l.docVersions.get(A);_e(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),f.addEntry(N)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ae();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Pb(t){let e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function fF(t,e){let n=Q(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let c=[];e.targetChanges.forEach((f,p)=>{let y=i.get(p);if(!y)return;c.push(n.Qr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(s,f.addedDocuments,p)));let _=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(st.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,_,f)&&c.push(n.Qr.updateTargetData(s,_))});let u=Fn(),l=ae();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(pF(s,o,e.documentUpdates).next(f=>{u=f.cs,l=f.ls})),!r.isEqual(Y.min())){let f=n.Qr.getLastRemoteSnapshotVersion(s).next(p=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return P.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function pF(t,e,n){let r=ae(),i=ae();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Fn();return n.forEach((c,u)=>{let l=s.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):L("LocalStore","Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function gF(t,e){let n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mF(t,e){let n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new aa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function gm(t,e,n){return C(this,null,function*(){let r=Q(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!pa(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function zD(t,e,n){let r=Q(t),i=Y.min(),s=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,f){let p=Q(u),y=p.rs.get(f);return y!==void 0?P.resolve(p.ns.get(y)):p.Qr.getTargetData(l,f)}(r,o,fn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ae())).next(c=>(yF(r,x1(e),c),{documents:c,hs:s})))}function yF(t,e,n){let r=t.ss.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var El=class{constructor(){this.activeTargetIds=V1()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var mm=class{constructor(){this.no=new El,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new El,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ym=class{io(e){}shutdown(){}};var Tl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ol=null;function dg(){return ol===null?ol=function(){return 268435456+Math.round(2147483648*Math.random())}():ol++,"0x"+ol.toString(16)}var vF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var vm=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var et="WebChannelConnection",Im=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let c=dg(),u=this.vo(n,r.toUriEncodedString());L("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(f=>(L("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw as("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}xo(n,r,i,s,o,c){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_s}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=vF[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=dg();return new Promise((o,c)=>{let u=new ig;u.setWithCredentials(!0),u.listenOnce(og.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qo.NO_ERROR:let f=u.getResponseJson();L(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Qo.TIMEOUT:L(et,`RPC '${e}' ${s} timed out`),c(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case Qo.HTTP_ERROR:let p=u.getStatus();if(L(et,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let _=y?.error;if(_&&_.status&&_.message){let A=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(k)>=0?k:M.UNKNOWN}(_.status);c(new V(A,_.message))}else c(new V(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new V(M.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{L(et,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);L(et,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=dg(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ug(),c=cg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new sg({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=s.join("");L(et,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=o.createWebChannel(f,u),y=!1,_=!1,A=new vm({lo:R=>{_?L(et,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(L(et,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),L(et,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},ho:()=>p.close()}),N=(R,k,B)=>{R.listen(k,U=>{try{B(U)}catch(ce){setTimeout(()=>{throw ce},0)}})};return N(p,es.EventType.OPEN,()=>{_||(L(et,`RPC '${e}' stream ${i} transport opened.`),A.mo())}),N(p,es.EventType.CLOSE,()=>{_||(_=!0,L(et,`RPC '${e}' stream ${i} transport closed`),A.po())}),N(p,es.EventType.ERROR,R=>{_||(_=!0,as(et,`RPC '${e}' stream ${i} transport errored:`,R),A.po(new V(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,es.EventType.MESSAGE,R=>{var k;if(!_){let B=R.data[0];_e(!!B);let U=B,ce=U.error||((k=U[0])===null||k===void 0?void 0:k.error);if(ce){L(et,`RPC '${e}' stream ${i} received error:`,ce);let Ce=ce.status,J=function(v){let w=ke[v];if(w!==void 0)return Db(w)}(Ce),E=ce.message;J===void 0&&(J=M.INTERNAL,E="Unknown error status: "+Ce+" with message "+ce.message),_=!0,A.po(new V(J,E)),p.close()}else L(et,`RPC '${e}' stream ${i} received:`,B),A.yo(B)}}),N(c,ag.STAT_EVENT,R=>{R.stat===il.PROXY?L(et,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===il.NOPROXY&&L(et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.fo()},0),A}};function hg(){return typeof document<"u"?document:null}function $l(t){return new zg(t,!0)}var Dl=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var bl=class{constructor(e,n,r,i,s,o,c,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Dl(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return C(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return C(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return C(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(On(n.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>C(this,null,function*(){this.state=0,this.start()}))}c_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_m=class extends bl{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=Z1(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?pn(o.readTime):Y.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Qg(this.serializer),n.addTarget=function(s,o){let c,u=o.target;if(c=kg(u)?{documents:nF(s,u)}:{query:rF(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=bb(s,o.resumeToken);let l=Gg(s,o.expectedCount);l!==null&&(c.expectedCount=l)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=_l(s,o.snapshotVersion.toTimestamp());let l=Gg(s,o.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=sF(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Qg(this.serializer),n.removeTarget=e,this.i_(n)}},wm=class extends bl{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=tF(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.A_(r,n)}return _e(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Qg(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>eF(this.serializer,r))};this.i_(n)}};var Em=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Wg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(e,Wg(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Tm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(On(n),this.y_=!1):L("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Dm=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>C(this,null,function*(){ai(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(u){return C(this,null,function*(){let l=Q(u);l.M_.add(4),yield ga(l),l.N_.set("Unknown"),l.M_.delete(4),yield ql(l)})}(this))}))}),this.N_=new Tm(r,i)}};function ql(t){return C(this,null,function*(){if(ai(t))for(let e of t.x_)yield e(!0)})}function ga(t){return C(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Ob(t,e){let n=Q(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),ny(n)?ty(n):Es(n).Xo()&&ey(n,e))}function Zm(t,e){let n=Q(t),r=Es(n);n.F_.delete(e),r.Xo()&&kb(n,e),n.F_.size===0&&(r.Xo()?r.n_():ai(n)&&n.N_.set("Unknown"))}function ey(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Es(t).P_(e)}function kb(t,e){t.L_.xe(e),Es(t).I_(e)}function ty(t){t.L_=new Hg({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Es(t).start(),t.N_.w_()}function ny(t){return ai(t)&&!Es(t).Zo()&&t.F_.size>0}function ai(t){return Q(t).M_.size===0}function Fb(t){t.L_=void 0}function IF(t){return C(this,null,function*(){t.N_.set("Online")})}function _F(t){return C(this,null,function*(){t.F_.forEach((e,n)=>{ey(t,e)})})}function wF(t,e){return C(this,null,function*(){Fb(t),ny(t)?(t.N_.D_(e),ty(t)):t.N_.set("Unknown")})}function EF(t,e,n){return C(this,null,function*(){if(t.N_.set("Online"),e instanceof vl&&e.state===2&&e.cause)try{yield function(i,s){return C(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.F_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.F_.delete(c),i.L_.removeTarget(c))})}(t,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cl(t,r)}else if(e instanceof ss?t.L_.Ke(e):e instanceof yl?t.L_.He(e):t.L_.We(e),!n.isEqual(Y.min()))try{let r=yield Pb(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.F_.get(l);f&&s.F_.set(l,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,l)=>{let f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken(st.EMPTY_BYTE_STRING,f.snapshotVersion)),kb(s,u);let p=new aa(f.target,u,l,f.sequenceNumber);ey(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){L("RemoteStore","Failed to raise snapshot:",r),yield Cl(t,r)}})}function Cl(t,e,n){return C(this,null,function*(){if(!pa(e))throw e;t.M_.add(1),yield ga(t),t.N_.set("Offline"),n||(n=()=>Pb(t.localStore)),t.asyncQueue.enqueueRetryable(()=>C(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield ql(t)}))})}function Lb(t,e){return e().catch(n=>Cl(t,n,e))}function Hl(t){return C(this,null,function*(){let e=Q(t),n=pr(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;TF(e);)try{let i=yield gF(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,DF(e,i)}catch(i){yield Cl(e,i)}Vb(e)&&Ub(e)})}function TF(t){return ai(t)&&t.v_.length<10}function DF(t,e){t.v_.push(e);let n=pr(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Vb(t){return ai(t)&&!pr(t).Zo()&&t.v_.length>0}function Ub(t){pr(t).start()}function bF(t){return C(this,null,function*(){pr(t).V_()})}function CF(t){return C(this,null,function*(){let e=pr(t);for(let n of t.v_)e.d_(n.mutations)})}function SF(t,e,n){return C(this,null,function*(){let r=t.v_.shift(),i=jg.from(r,e,n);yield Lb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Hl(t)})}function AF(t,e){return C(this,null,function*(){e&&pr(t).E_&&(yield function(r,i){return C(this,null,function*(){if(function(o){return z1(o)&&o!==M.ABORTED}(i.code)){let s=r.v_.shift();pr(r).t_(),yield Lb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Hl(r)}})}(t,e)),Vb(t)&&Ub(t)})}function GD(t,e){return C(this,null,function*(){let n=Q(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let r=ai(n);n.M_.add(3),yield ga(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield ql(n)})}function RF(t,e){return C(this,null,function*(){let n=Q(t);e?(n.M_.delete(2),yield ql(n)):e||(n.M_.add(2),yield ga(n),n.N_.set("Unknown"))})}function Es(t){return t.B_||(t.B_=function(n,r,i){let s=Q(n);return s.f_(),new _m(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:IF.bind(null,t),To:_F.bind(null,t),Ao:wF.bind(null,t),h_:EF.bind(null,t)}),t.x_.push(e=>C(this,null,function*(){e?(t.B_.t_(),ny(t)?ty(t):t.N_.set("Unknown")):(yield t.B_.stop(),Fb(t))}))),t.B_}function pr(t){return t.k_||(t.k_=function(n,r,i){let s=Q(n);return s.f_(),new wm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:bF.bind(null,t),Ao:AF.bind(null,t),R_:CF.bind(null,t),A_:SF.bind(null,t)}),t.x_.push(e=>C(this,null,function*(){e?(t.k_.t_(),yield Hl(t)):(yield t.k_.stop(),t.v_.length>0&&(L("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var bm=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ry(t,e){if(On("AsyncQueue",`${e}: ${t}`),pa(t))return new V(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Sl=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=Jo(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Al=class{constructor(){this.q_=new Ne(j.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):z():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},vs=class t{constructor(e,n,r,i,s,o,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,Sl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Cm=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Sm=class{constructor(){this.queries=new fr(e=>db(e),jl),this.onlineState="Unknown",this.z_=new Set}};function NF(t,e){return C(this,null,function*(){let n=Q(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Cm,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let c=ry(o,`Initialization of query '${ts(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&iy(n)})}function MF(t,e){return C(this,null,function*(){let n=Q(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function xF(t,e){let n=Q(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let c of o.U_)c.H_(i)&&(r=!0);o.K_=i}}r&&iy(n)}function PF(t,e,n){let r=Q(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function iy(t){t.z_.forEach(e=>{e.next()})}var Am,WD;(WD=Am||(Am={})).J_="default",WD.Cache="cache";var Rm=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new vs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Am.Cache}};var Rl=class{constructor(e){this.key=e}},Nl=class{constructor(e){this.key=e}},Nm=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ae(),this.mutatedKeys=ae(),this.Ia=hb(e),this.Ta=new Sl(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Al,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let y=i.get(f),_=Bl(this.query,p)?p:null,A=!!y&&this.mutatedKeys.has(y.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),R=!1;y&&_?y.data.isEqual(_.data)?A!==N&&(r.track({type:3,doc:_}),R=!0):this.Ra(y,_)||(r.track({type:2,doc:_}),R=!0,(u&&this.Ia(_,u)>0||l&&this.Ia(_,l)<0)&&(c=!0)):!y&&_?(r.track({type:0,doc:_}),R=!0):y&&!_&&(r.track({type:1,doc:y}),R=!0,(u||l)&&(c=!0)),R&&(_?(o=o.add(_),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:c,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((f,p)=>function(_,A){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return N(_)-N(A)}(f.type,p.type)||this.Ia(f.doc,p.doc)),this.Va(r),i=i!=null&&i;let c=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new vs(this.query,e.Ta,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Al,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=ae(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Nl(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Rl(r))}),n}pa(e){this.la=e.hs,this.Pa=ae();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return vs.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Mm=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},xm=class{constructor(e){this.key=e,this.wa=!1}},Pm=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new fr(c=>db(c),jl),this.Da=new Map,this.Ca=new Set,this.va=new Ne(j.comparator),this.Fa=new Map,this.Ma=new ua,this.xa={},this.Oa=new Map,this.Na=ca.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function OF(t,e,n=!0){return C(this,null,function*(){let r=zb(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield jb(r,e,n,!0),i})}function kF(t,e){return C(this,null,function*(){let n=zb(t);yield jb(n,e,!0,!1)})}function jb(t,e,n,r){return C(this,null,function*(){let i=yield mF(t.localStore,fn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",c;return r&&(c=yield FF(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ob(t.remoteStore,i),c})}function FF(t,e,n,r,i){return C(this,null,function*(){t.Ba=(p,y,_)=>function(N,R,k,B){return C(this,null,function*(){let U=R.view.da(k);U.Xi&&(U=yield zD(N.localStore,R.query,!1).then(({documents:E})=>R.view.da(E,U)));let ce=B&&B.targetChanges.get(R.targetId),Ce=B&&B.targetMismatches.get(R.targetId)!=null,J=R.view.applyChanges(U,N.isPrimaryClient,ce,Ce);return QD(N,R.targetId,J.fa),J.snapshot})}(t,p,y,_);let s=yield zD(t.localStore,e,!0),o=new Nm(e,s.hs),c=o.da(s.documents),u=oa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(c,t.isPrimaryClient,u);QD(t,n,l.fa);let f=new Mm(e,n,o);return t.ba.set(e,f),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function LF(t,e,n){return C(this,null,function*(){let r=Q(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!jl(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield gm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zm(r.remoteStore,i.targetId),Om(r,i.targetId)}).catch(fa))):(Om(r,i.targetId),yield gm(r.localStore,i.targetId,!0))})}function VF(t,e){return C(this,null,function*(){let n=Q(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zm(n.remoteStore,r.targetId))})}function UF(t,e,n){return C(this,null,function*(){let r=GF(t);try{let i=yield function(o,c){let u=Q(o),l=Ge.now(),f=c.reduce((_,A)=>_.add(A.key),ae()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=Fn(),N=ae();return u.os.getEntries(_,f).next(R=>{A=R,A.forEach((k,B)=>{B.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,A)).next(R=>{p=R;let k=[];for(let B of c){let U=H1(B,p.get(B.key).overlayedDocument);U!=null&&k.push(new Ln(B.key,U,sb(U.value.mapValue),Pn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,k,c)}).next(R=>{y=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(_,R.batchId,k)})}).then(()=>({batchId:y.batchId,changes:pb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ne(pe)),l=l.insert(c,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield ma(r,i.changes),yield Hl(r.remoteStore)}catch(i){let s=ry(i,"Failed to persist write");n.reject(s)}})}function Bb(t,e){return C(this,null,function*(){let n=Q(t);try{let r=yield fF(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?_e(o.wa):i.removedDocuments.size>0&&(_e(o.wa),o.wa=!1))}),yield ma(n,r,e)}catch(r){yield fa(r)}})}function KD(t,e,n){let r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let c=o.view.j_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=Q(o);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let y of p.U_)y.j_(c)&&(l=!0)}),l&&iy(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jF(t,e,n){return C(this,null,function*(){let r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ne(j.comparator);o=o.insert(s,Zt.newNoDocument(s,Y.min()));let c=ae().add(s),u=new ml(Y.min(),new Map,new Ne(pe),o,c);yield Bb(r,u),r.va=r.va.remove(s),r.Fa.delete(e),sy(r)}else yield gm(r.localStore,e,!1).then(()=>Om(r,e,n)).catch(fa)})}function BF(t,e){return C(this,null,function*(){let n=Q(t),r=e.batch.batchId;try{let i=yield hF(n.localStore,e);qb(n,r,null),$b(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ma(n,i)}catch(i){yield fa(i)}})}function $F(t,e,n){return C(this,null,function*(){let r=Q(t);try{let i=yield function(o,c){let u=Q(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(_e(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);qb(r,e,n),$b(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ma(r,i)}catch(i){yield fa(i)}})}function $b(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function qb(t,e,n){let r=Q(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Om(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||Hb(t,r)})}function Hb(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Zm(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),sy(t))}function QD(t,e,n){for(let r of n)r instanceof Rl?(t.Ma.addReference(r.key,e),qF(t,r)):r instanceof Nl?(L("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||Hb(t,r.key)):z()}function qF(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(L("SyncEngine","New document in limbo: "+n),t.Ca.add(r),sy(t))}function sy(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new j(Re.fromString(e)),r=t.Na.next();t.Fa.set(r,new xm(n)),t.va=t.va.insert(n,r),Ob(t.remoteStore,new aa(fn(Jm(n.path)),r,"TargetPurposeLimboResolution",nb.oe))}}function ma(t,e,n){return C(this,null,function*(){let r=Q(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((c,u)=>{o.push(r.Ba(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=dm.Ki(u.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(u,l){return C(this,null,function*(){let f=Q(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,y=>P.forEach(y.qi,_=>f.persistence.referenceDelegate.addReference(p,y.targetId,_)).next(()=>P.forEach(y.Qi,_=>f.persistence.referenceDelegate.removeReference(p,y.targetId,_)))))}catch(p){if(!pa(p))throw p;L("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let _=f.ns.get(y),A=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(A);f.ns=f.ns.insert(y,N)}}})}(r.localStore,s))})}function HF(t,e){return C(this,null,function*(){let n=Q(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let r=yield xb(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(c=>{c.forEach(u=>{u.reject(new V(M.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ma(n,r.us)}})}function zF(t,e){let n=Q(t),r=n.Fa.get(e);if(r&&r.wa)return ae().add(r.key);{let i=ae(),s=n.Da.get(e);if(!s)return i;for(let o of s){let c=n.ba.get(o);i=i.unionWith(c.view.Ea)}return i}}function zb(t){let e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jF.bind(null,e),e.Sa.h_=xF.bind(null,e.eventManager),e.Sa.ka=PF.bind(null,e.eventManager),e}function GF(t){let e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$F.bind(null,e),e}var Ml=class{constructor(){this.synchronizeTabs=!1}initialize(e){return C(this,null,function*(){this.serializer=$l(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return dF(this.persistence,new fm,e.initialUser,this.serializer)}createPersistence(e){return new cm(lm.Hr,this.serializer)}createSharedClientState(e){return new mm}terminate(){return C(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var km=class{initialize(e,n){return C(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HF.bind(null,this.syncEngine),yield RF(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Sm}()}createDatastore(e){let n=$l(e.databaseInfo.databaseId),r=function(s){return new Im(s)}(e.databaseInfo);return function(s,o,c,u){return new Em(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new Dm(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>KD(this.syncEngine,n,0),function(){return Tl.D()?new Tl:new ym}())}createSyncEngine(e,n){return function(i,s,o,c,u,l,f){let p=new Pm(i,s,o,c,u,l);return f&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return C(this,null,function*(){var e;yield function(r){return C(this,null,function*(){let i=Q(r);L("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ga(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Fm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Lm=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qe.UNAUTHENTICATED,this.clientId=ll.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>C(this,null,function*(){L("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ry(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function fg(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>C(this,null,function*(){r.isEqual(i)||(yield xb(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function YD(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield KF(t);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>GD(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>GD(e.remoteStore,i)),t._onlineComponents=e})}function WF(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function KF(t){return C(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!WF(n))throw n;as("Error using user provided cache. Falling back to memory cache: "+n),yield fg(t,new Ml)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield fg(t,new Ml);return t._offlineComponents})}function Gb(t){return C(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield YD(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield YD(t,new km))),t._onlineComponents})}function QF(t){return Gb(t).then(e=>e.syncEngine)}function JD(t){return C(this,null,function*(){let e=yield Gb(t),n=e.eventManager;return n.onListen=OF.bind(null,e.syncEngine),n.onUnlisten=LF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VF.bind(null,e.syncEngine),n})}function Wb(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var XD=new Map;function Kb(t,e,n){if(!n)throw new V(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YF(t,e,n,r){if(e===!0&&r===!0)throw new V(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZD(t){if(!j.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eb(t){if(j.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=oy(t);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var xl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Is=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xl(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pg;switch(r.type){case"firstParty":return new vg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=XD.get(n);r&&(L("ComponentProvider","Removing Datastore"),XD.delete(n),r.terminate())}(this),Promise.resolve()}};function Qb(t,e,n,r={}){var i;let s=(t=lr(t,Is))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=qe.MOCK_USER;else{c=LT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new qe(l)}t._authCredentials=new gg(new ul(c,u))}}var Pl=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Et=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},dr=class t extends Pl{constructor(e,n,r){super(e,n,Jm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new j(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function ay(t,e,...n){if(t=kt(t),Kb("collection","path",e),t instanceof Is){let r=Re.fromString(e,...n);return eb(r),new dr(t,null,r)}{if(!(t instanceof Et||t instanceof dr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return eb(r),new dr(t.firestore,null,r)}}function cy(t,e,...n){if(t=kt(t),arguments.length===1&&(e=ll.newId()),Kb("doc","path",e),t instanceof Is){let r=Re.fromString(e,...n);return ZD(r),new Et(t,null,new j(r))}{if(!(t instanceof Et||t instanceof dr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return ZD(r),new Et(t.firestore,t instanceof dr?t.converter:null,new j(r))}}var Vm=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Dl(this,"async_queue_retry"),this.hu=()=>{let n=hg();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=hg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=hg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new xn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return C(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!pa(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw On("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=bm.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&z()}verifyOperationInProgress(){}du(){return C(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function tb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var gr=class extends Is{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Vm}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Xb(this),this._firestoreClient.terminate()}};function Yb(t,e){let n=typeof t=="object"?t:Uo(),r=typeof t=="string"?t:e||"(default)",i=Vp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=kT("firestore");s&&Qb(i,...s)}return i}function Jb(t){return t._firestoreClient||Xb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Xb(t){var e,n,r;let i=t._freezeSettings(),s=function(c,u,l,f){return new Tg(c,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Wb(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Lm(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var la=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(st.fromBase64String(e))}catch(n){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var da=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ol=class{constructor(e){this._methodName=e}};var ha=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var JF=/^__.*__$/,Um=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ln(e,this.data,this.fieldMask,n,this.fieldTransforms):new oi(e,this.data,n,this.fieldTransforms)}};function Zb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var jm=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return kl(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(Zb(this.fu)&&JF.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Bm=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$l(e)}Fu(e,n,r,i=!1){return new jm({fu:e,methodName:n,vu:r,path:wt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function eC(t){let e=t._freezeSettings(),n=$l(t._databaseId);return new Bm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tC(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);sC("Data must be an object, but it was:",o,r);let c=rC(r,o),u,l;if(s.merge)u=new dn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let y=XF(e,p,n);if(!o.contains(y))throw new V(M.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);eL(f,y)||f.push(y)}u=new dn(f),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Um(new Xt(c),u,l)}function nC(t,e){if(iC(t=kt(t)))return sC("Unsupported field value:",e,t),rC(t,e);if(t instanceof Ol)return function(r,i){if(!Zb(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=nC(c,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return U1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ge.fromDate(r);return{timestampValue:_l(i.serializer,s)}}if(r instanceof Ge){let s=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_l(i.serializer,s)}}if(r instanceof ha)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof la)return{bytesValue:bb(i.serializer,r._byteString)};if(r instanceof Et){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xm(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${oy(r)}`)}(t,e)}function rC(t,e){let n={};return rb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(t,(r,i)=>{let s=nC(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function iC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof ha||t instanceof la||t instanceof Et||t instanceof Ol)}function sC(t,e,n){if(!iC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=oy(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function XF(t,e,n){if((e=kt(e))instanceof da)return e._internalPath;if(typeof e=="string")return oC(t,e);throw kl("Field path arguments must be of type string or ",t,!1,void 0,n)}var ZF=new RegExp("[~\\*/\\[\\]]");function oC(t,e,n){if(e.search(ZF)>=0)throw kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new da(...e.split("."))._internalPath}catch{throw kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kl(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(M.INVALID_ARGUMENT,c+t+u)}function eL(t,e){return t.some(n=>n.isEqual(e))}var Fl=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new $m(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(aC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},$m=class extends Fl{data(){return super.data()}};function aC(t,e){return typeof e=="string"?oC(t,e):e instanceof da?e._internalPath:e._delegate._internalPath}function tL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qm=class{convertValue(e,n="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ws(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ha(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Wm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ra(e));default:return null}}convertTimestamp(e){let n=kn(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Re.fromString(e);_e(Mb(r));let i=new pl(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(n)||On(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function cC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ei=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ll=class extends Fl{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new os(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(aC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},os=class extends Ll{data(e={}){return super.data(e)}},Hm=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ei(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new os(this._firestore,this._userDataWriter,r.key,r,new ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new os(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ei(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new os(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ei(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:nL(c.type),doc:u,oldIndex:l,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function nL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}var Vl=class extends qm{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}};function uC(t,e,n){t=lr(t,Et);let r=lr(t.firestore,gr),i=cC(t.converter,e,n);return ly(r,[tC(eC(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Pn.none())])}function lC(t){return ly(lr(t.firestore,gr),[new sa(t._key,Pn.none())])}function dC(t,e){let n=lr(t.firestore,gr),r=cy(t),i=cC(t.converter,e);return ly(n,[tC(eC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}function uy(t,...e){var n,r,i;t=kt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||tb(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(tb(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(t instanceof Et)l=lr(t.firestore,gr),f=Jm(t._key.path),u={next:p=>{e[o]&&e[o](rL(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=lr(t,Pl);l=lr(p.firestore,gr),f=p._query;let y=new Vl(l);u={next:_=>{e[o]&&e[o](new Hm(l,y,p,_))},error:e[o+1],complete:e[o+2]},tL(t._query)}return function(y,_,A,N){let R=new Fm(N),k=new Rm(_,R,A);return y.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return NF(yield JD(y),k)})),()=>{R.$a(),y.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return MF(yield JD(y),k)}))}}(Jb(l),f,c,u)}function ly(t,e){return function(r,i){let s=new xn;return r.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return UF(yield QF(r),i,s)})),s.promise}(Jb(t),e)}function rL(t,e,n){let r=n.docs.get(e._key),i=new Vl(t);return new Ll(t,i,e._key,r,new ei(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){_s=i})(Ji),ar(new Ft("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new gr(new mg(r.getProvider("auth-internal")),new _g(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(l.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),$e(CD,"4.6.3",e),$e(CD,"4.6.3","esm2017")})();var zl=function(){return zl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zl.apply(this,arguments)};var oL={includeMetadataChanges:!1};function hC(t,e){return e===void 0&&(e=oL),new ne(function(n){var r=uy(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function fC(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:zl(zl({},r),(n={},n[e.idField]=t.id,n))}function pC(t){return hC(t,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function gC(t,e){return e===void 0&&(e={}),pC(t).pipe(ee(function(n){return n.map(function(r){return fC(r,e)})}))}var ci=class{constructor(e){return e}},mC="firestore",dy=class{constructor(){return Bo(mC)}};var hy=new K("angularfire2.firestore-instances");function aL(t,e){let n=Bp(mC,t,e);return n&&new ci(n)}function cL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ci(r)}}var uL={provide:dy,deps:[[new Wt,hy]]},lL={provide:ci,useFactory:aL,deps:[[new Wt,hy],Qr]};function yC(t,...e){return $e("angularfire",Zi.full,"fst"),Kt([lL,uL,{provide:hy,useFactory:cL(t),multi:!0,deps:[ve,Jt,$o,qo,[new Wt,nl],[new Wt,jo],...e]}])}var vC=un(gC,!0);var IC=un(dC,!0);var _C=un(lC,!0);var fy=un(cy,!0);var wC=un(Yb,!0);var EC=un(uC,!0);var X="primary",Ma=Symbol("RouteTitle"),vy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ss(t){return new vy(t)}function dL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=t[s];if(o.startsWith(":"))i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function hL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!yn(t[n],e[n]))return!1;return!0}function yn(t,e){let n=t?Iy(t):void 0,r=e?Iy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!AC(t[i],e[i]))return!1;return!0}function Iy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function AC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function RC(t){return t.length>0?t[t.length-1]:null}function vr(t){return Xd(t)?t:Ro(t)?Ee(Promise.resolve(t)):G(t)}var fL={exact:MC,subset:xC},NC={exact:pL,subset:gL,ignored:()=>!0};function TC(t,e,n){return fL[n.paths](t.root,e.root,n.matrixParams)&&NC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function pL(t,e){return yn(t,e)}function MC(t,e,n){if(!li(t.segments,e.segments)||!Kl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!MC(t.children[r],e.children[r],n))return!1;return!0}function gL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>AC(t[n],e[n]))}function xC(t,e,n){return PC(t,e,e.segments,n)}function PC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!li(i,n)||e.hasChildren()||!Kl(i,n,r))}else if(t.segments.length===n.length){if(!li(t.segments,n)||!Kl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!xC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!li(t.segments,i)||!Kl(t.segments,i,r)||!t.children[X]?!1:PC(t.children[X],e,s,r)}}function Kl(t,e,n){return e.every((r,i)=>NC[n](t[i].parameters,r.parameters))}var mr=class{constructor(e=new ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ss(this.queryParams),this._queryParamMap}toString(){return vL.serialize(this)}},ge=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ql(this)}},ui=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ss(this.parameters),this._parameterMap}toString(){return kC(this)}};function mL(t,e){return li(t,e)&&t.every((n,r)=>yn(n.parameters,e[r].parameters))}function li(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function yL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var zy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>new Jl,providedIn:"root"});let t=e;return t})(),Jl=class{parse(e){let n=new wy(e);return new mr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ya(e.root,!0)}`,r=wL(e.queryParams),i=typeof e.fragment=="string"?`#${IL(e.fragment)}`:"";return`${n}${r}${i}`}},vL=new Jl;function Ql(t){return t.segments.map(e=>kC(e)).join("/")}function ya(t,e){if(!t.hasChildren())return Ql(t);if(e){let n=t.children[X]?ya(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==X&&r.push(`${i}:${ya(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=yL(t,(r,i)=>i===X?[ya(t.children[X],!1)]:[`${i}:${ya(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${Ql(t)}/${n[0]}`:`${Ql(t)}/(${n.join("//")})`}}function OC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gl(t){return OC(t).replace(/%3B/gi,";")}function IL(t){return encodeURI(t)}function _y(t){return OC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yl(t){return decodeURIComponent(t)}function DC(t){return Yl(t.replace(/\+/g,"%20"))}function kC(t){return`${_y(t.path)}${_L(t.parameters)}`}function _L(t){return Object.entries(t).map(([e,n])=>`;${_y(e)}=${_y(n)}`).join("")}function wL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Gl(n)}=${Gl(i)}`).join("&"):`${Gl(n)}=${Gl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var EL=/^[^\/()?;#]+/;function py(t){let e=t.match(EL);return e?e[0]:""}var TL=/^[^\/()?;=#]+/;function DL(t){let e=t.match(TL);return e?e[0]:""}var bL=/^[^=?&#]+/;function CL(t){let e=t.match(bL);return e?e[0]:""}var SL=/^[^&#]+/;function AL(t){let e=t.match(SL);return e?e[0]:""}var wy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new ge(e,n)),r}parseSegment(){let e=py(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new ui(Yl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=DL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=py(this.remaining);i&&(r=i,this.capture(r))}e[Yl(n)]=Yl(r)}parseQueryParam(e){let n=CL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=AL(this.remaining);o&&(r=o,this.capture(r))}let i=DC(n),s=DC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=py(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=X);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[X]:new ge([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function FC(t){return t.segments.length>0?new ge([],{[X]:t}):t}function LC(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=LC(i);if(r===X&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ge(t.segments,e);return RL(n)}function RL(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new ge(t.segments.concat(e.segments),e.children)}return t}function As(t){return t instanceof mr}function NL(t,e,n=null,r=null){let i=VC(t);return UC(i,e,n,r)}function VC(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let c=new ge(s.url,o);return s===t&&(e=c),c}let r=n(t.root),i=FC(r);return e??i}function UC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return gy(i,i,i,n,r);let s=ML(e);if(s.toRoot())return gy(i,i,new ge([],{}),n,r);let o=xL(s,i,t),c=o.processChildren?_a(o.segmentGroup,o.index,s.commands):BC(o.segmentGroup,o.index,s.commands);return gy(i,o.segmentGroup,c,n,r)}function Xl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ta(t){return typeof t=="object"&&t!=null&&t.outlets}function gy(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let o;t===e?o=n:o=jC(t,e,n);let c=FC(LC(o));return new mr(c,s,i)}function jC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=jC(s,e,n)}),new ge(t.segments,r)}var Zl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Xl(r[0]))throw new q(4003,!1);let i=r.find(Ta);if(i&&i!==RC(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ML(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Zl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Zl(n,e,r)}var bs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function xL(t,e,n){if(t.isAbsolute)return new bs(e,!0,0);if(!n)return new bs(e,!1,NaN);if(n.parent===null)return new bs(n,!0,0);let r=Xl(t.commands[0])?0:1,i=n.segments.length-1+r;return PL(n,i,t.numberOfDoubleDots)}function PL(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new bs(r,!1,i-s)}function OL(t){return Ta(t[0])?t[0].outlets:{[X]:t}}function BC(t,e,n){if(t??=new ge([],{}),t.segments.length===0&&t.hasChildren())return _a(t,e,n);let r=kL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ge(t.segments.slice(0,r.pathIndex),{});return s.children[X]=new ge(t.segments.slice(r.pathIndex),t.children),_a(s,0,i)}else return r.match&&i.length===0?new ge(t.segments,{}):r.match&&!t.hasChildren()?Ey(t,e,n):r.match?_a(t,0,i):Ey(t,e,n)}function _a(t,e,n){if(n.length===0)return new ge(t.segments,{});{let r=OL(n),i={};if(Object.keys(r).some(s=>s!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let s=_a(t.children[X],e,n);return new ge(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=BC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ge(t.segments,i)}}function kL(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],c=n[r];if(Ta(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!CC(u,l,o))return s;r+=2}else{if(!CC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ey(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ta(s)){let u=FL(s.outlets);return new ge(r,u)}if(i===0&&Xl(n[0])){let u=t.segments[e];r.push(new ui(u.path,bC(n[0]))),i++;continue}let o=Ta(s)?s.outlets[X]:`${s}`,c=i<n.length-1?n[i+1]:null;o&&c&&Xl(c)?(r.push(new ui(o,bC(c))),i+=2):(r.push(new ui(o,{})),i++)}return new ge(r,{})}function FL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ey(new ge([],{}),0,r))}),e}function bC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function CC(t,e,n){return t==n.path&&yn(e,n.parameters)}var wa="imperative",We=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(We||{}),Lt=class{constructor(e,n){this.id=e,this.url=n}},Da=class extends Lt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=We.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},di=class extends Lt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=We.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Dt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Dt||{}),Ty=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ty||{}),yr=class extends Lt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=We.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},hi=class extends Lt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=We.NavigationSkipped}},ba=class extends Lt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=We.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ed=class extends Lt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=We.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dy=class extends Lt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=We.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},by=class extends Lt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=We.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Cy=class extends Lt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=We.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sy=class extends Lt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=We.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ay=class{constructor(e){this.route=e,this.type=We.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ry=class{constructor(e){this.route=e,this.type=We.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ny=class{constructor(e){this.snapshot=e,this.type=We.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},My=class{constructor(e){this.snapshot=e,this.type=We.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xy=class{constructor(e){this.snapshot=e,this.type=We.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Py=class{constructor(e){this.snapshot=e,this.type=We.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ca=class{},Sa=class{constructor(e){this.url=e}};var Oy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new od,this.attachRef=null}},od=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Oy,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),td=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ky(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ky(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Fy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Fy(e,this._root).map(n=>n.value)}};function ky(t,e){if(t===e.value)return e;for(let n of e.children){let r=ky(t,n);if(r)return r}return null}function Fy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Fy(t,n);if(r.length)return r.unshift(e),r}return[]}var Tt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ds(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var nd=class extends td{constructor(e,n){super(e),this.snapshot=n,Wy(this,e)}toString(){return this.snapshot.toString()}};function $C(t){let e=LL(t),n=new ze([new ui("",{})]),r=new ze({}),i=new ze({}),s=new ze({}),o=new ze(""),c=new Rs(n,r,s,o,i,X,t,e.root);return c.snapshot=e.root,new nd(new Tt(c,[]),e)}function LL(t){let e={},n={},r={},i="",s=new Aa([],e,r,i,n,X,t,null,{});return new rd("",new Tt(s,[]))}var Rs=class{constructor(e,n,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(l=>l[Ma]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>Ss(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>Ss(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gy(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&HC(i)&&(r.resolve[Ma]=i.title),r}var Aa=class{get title(){return this.data?.[Ma]}constructor(e,n,r,i,s,o,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ss(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ss(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},rd=class extends td{constructor(e,n){super(n),this.url=e,Wy(this,n)}toString(){return qC(this._root)}};function Wy(t,e){e.value._routerState=t,e.children.forEach(n=>Wy(t,n))}function qC(t){let e=t.children.length>0?` { ${t.children.map(qC).join(", ")} } `:"";return`${t.value}${e}`}function my(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,yn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),yn(e.params,n.params)||t.paramsSubject.next(n.params),hL(e.url,n.url)||t.urlSubject.next(n.url),yn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ly(t,e){let n=yn(t.params,e.params)&&mL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ly(t.parent,e.parent))}function HC(t){return typeof t.title=="string"||t.title===null}var VL=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new at,this.deactivateEvents=new at,this.attachEvents=new at,this.detachEvents=new at,this.parentContexts=x(od),this.location=x(nr),this.changeDetector=x(No),this.environmentInjector=x(At),this.inputBinder=x(Ky,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=r;let s=this.location,c=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Vy(r,u,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$i({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hi]});let t=e;return t})(),Vy=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Rs?this.route:e===od?this.childContexts:this.parent.get(e,n)}},Ky=new K("");function UL(t,e,n){let r=Ra(t,e._root,n?n._root:void 0);return new nd(r,e)}function Ra(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=jL(t,e,n);return new Tt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Ra(t,c)),o}}let r=BL(e.value),i=e.children.map(s=>Ra(t,s));return new Tt(r,i)}}function jL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ra(t,r,i);return Ra(t,r)})}function BL(t){return new Rs(new ze(t.url),new ze(t.params),new ze(t.queryParams),new ze(t.fragment),new ze(t.data),t.outlet,t.component,t)}var zC="ngNavigationCancelingError";function GC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=As(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=WC(!1,Dt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function WC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[zC]=!0,n.cancellationCode=e,n}function $L(t){return KC(t)&&As(t.url)}function KC(t){return!!t&&t[zC]}var qL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=dt({type:e,selectors:[["ng-component"]],standalone:!0,features:[ht],decls:1,vars:0,template:function(i,s){i&1&&Br(0,"router-outlet")},dependencies:[VL],encapsulation:2});let t=e;return t})();function HL(t,e){return t.providers&&!t._injector&&(t._injector=Kf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Qy(t){let e=t.children&&t.children.map(Qy),n=e?me(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=qL),n}function vn(t){return t.outlet||X}function zL(t,e){let n=t.filter(r=>vn(r)===e);return n.push(...t.filter(r=>vn(r)!==e)),n}function xa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var GL=(t,e,n,r)=>ee(i=>(new Uy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Uy=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),my(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ds(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ds(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ds(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ds(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Py(s.value.snapshot))}),e.children.length&&this.forwardEvent(new My(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(my(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),my(c.route.value),this.activateChildRoutes(e,null,o.children)}else{let c=xa(i.snapshot);o.attachRef=null,o.route=i,o.injector=c,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},id=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Cs=class{constructor(e,n){this.component=e,this.route=n}};function WL(t,e,n){let r=t._root,i=e?e._root:null;return va(r,i,n,[r.value])}function KL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ms(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!R_(t)?t:e.get(t):r}function va(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ds(e);return t.children.forEach(o=>{QL(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Ea(c,n.getContext(o),i)),i}function QL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=YL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new id(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?va(t,e,c?c.children:null,r,i):va(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Cs(c.outlet.component,o))}else o&&Ea(e,c,i),i.canActivateChecks.push(new id(r)),s.component?va(t,null,c?c.children:null,r,i):va(t,null,n,r,i);return i}function YL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!li(t.url,e.url);case"pathParamsOrQueryParamsChange":return!li(t.url,e.url)||!yn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ly(t,e)||!yn(t.queryParams,e.queryParams);case"paramsChange":default:return!Ly(t,e)}}function Ea(t,e,n){let r=Ds(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ea(o,e.children.getContext(s),n):Ea(o,null,n):Ea(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Cs(e.outlet.component,i)):n.canDeactivateChecks.push(new Cs(null,i)):n.canDeactivateChecks.push(new Cs(null,i))}function Pa(t){return typeof t=="function"}function JL(t){return typeof t=="boolean"}function XL(t){return t&&Pa(t.canLoad)}function ZL(t){return t&&Pa(t.canActivate)}function eV(t){return t&&Pa(t.canActivateChild)}function tV(t){return t&&Pa(t.canDeactivate)}function nV(t){return t&&Pa(t.canMatch)}function QC(t){return t instanceof Tn||t?.name==="EmptyError"}var Wl=Symbol("INITIAL_VALUE");function Ns(){return bt(t=>Cc(t.map(e=>e.pipe(Dn(1),Nc(Wl)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===Wl)return Wl;if(n===!1||n instanceof mr)return n}return!0}),mt(e=>e!==Wl),Dn(1)))}function rV(t,e){return Le(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?G(me(F({},n),{guardsResult:!0})):iV(o,r,i,t).pipe(Le(c=>c&&JL(c)?sV(r,s,t,e):G(c)),ee(c=>me(F({},n),{guardsResult:c})))})}function iV(t,e,n,r){return Ee(t).pipe(Le(i=>lV(i.component,i.route,n,e,r)),jt(i=>i!==!0,!0))}function sV(t,e,n,r){return Ee(e).pipe(Rr(i=>Ri(aV(i.route.parent,r),oV(i.route,r),uV(t,i.path,n),cV(t,i.route,n))),jt(i=>i!==!0,!0))}function oV(t,e){return t!==null&&e&&e(new xy(t)),G(!0)}function aV(t,e){return t!==null&&e&&e(new Ny(t)),G(!0)}function cV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>Sc(()=>{let o=xa(e)??n,c=Ms(s,o),u=ZL(c)?c.canActivate(e,t):Zn(o,()=>c(e,t));return vr(u).pipe(jt())}));return G(i).pipe(Ns())}function uV(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>KL(o)).filter(o=>o!==null).map(o=>Sc(()=>{let c=o.guards.map(u=>{let l=xa(o.node)??n,f=Ms(u,l),p=eV(f)?f.canActivateChild(r,t):Zn(l,()=>f(r,t));return vr(p).pipe(jt())});return G(c).pipe(Ns())}));return G(s).pipe(Ns())}function lV(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(c=>{let u=xa(e)??i,l=Ms(c,u),f=tV(l)?l.canDeactivate(t,e,n,r):Zn(u,()=>l(t,e,n,r));return vr(f).pipe(jt())});return G(o).pipe(Ns())}function dV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let c=Ms(o,t),u=XL(c)?c.canLoad(e,n):Zn(t,()=>c(e,n));return vr(u)});return G(s).pipe(Ns(),YC(r))}function YC(t){return ac(xe(e=>{if(As(e))throw GC(t,e)}),ee(e=>e===!0))}function hV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let c=Ms(o,t),u=nV(c)?c.canMatch(e,n):Zn(t,()=>c(e,n));return vr(u)});return G(s).pipe(Ns(),YC(r))}var Na=class{constructor(e){this.segmentGroup=e||null}},sd=class extends Error{constructor(e){super(),this.urlTree=e}};function Ts(t){return Ai(new Na(t))}function fV(t){return Ai(new q(4e3,!1))}function pV(t){return Ai(WC(!1,Dt.GuardRejected))}var jy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[X])return fV(e.redirectTo);i=i.children[X]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new sd(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new mr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);r[i]=n[c]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new ge(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},By={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gV(t,e,n,r,i){let s=Yy(t,e,n);return s.matched?(r=HL(e,r),hV(r,e,n,i).pipe(ee(o=>o===!0?s:F({},By)))):G(s)}function Yy(t,e,n){if(e.path==="**")return mV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},By):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||dL)(n,t,e);if(!i)return F({},By);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function mV(t){return{matched:!0,parameters:t.length>0?RC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function SC(t,e,n,r){return n.length>0&&IV(t,n,r)?{segmentGroup:new ge(e,vV(r,new ge(n,t.children))),slicedSegments:[]}:n.length===0&&_V(t,n,r)?{segmentGroup:new ge(t.segments,yV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ge(t.segments,t.children),slicedSegments:n}}function yV(t,e,n,r){let i={};for(let s of n)if(ad(t,e,s)&&!r[vn(s)]){let o=new ge([],{});i[vn(s)]=o}return F(F({},r),i)}function vV(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&vn(r)!==X){let i=new ge([],{});n[vn(r)]=i}return n}function IV(t,e,n){return n.some(r=>ad(t,e,r)&&vn(r)!==X)}function _V(t,e,n){return n.some(r=>ad(t,e,r))}function ad(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function wV(t,e,n,r){return vn(t)!==r&&(r===X||!ad(e,n,t))?!1:Yy(e,t,n).matched}function EV(t,e,n){return e.length===0&&!t.children[n]}var $y=class{};function TV(t,e,n,r,i,s,o="emptyOnly"){return new qy(t,e,n,r,i,o,s).recognize()}var DV=31,qy=class{constructor(e,n,r,i,s,o,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new jy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=SC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(n=>{let r=new Aa([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,{},X,this.rootComponentType,null,{}),i=new Tt(r,n),s=new rd("",i),o=NL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,X).pipe(Gn(r=>{if(r instanceof sd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Na?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Gy(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ee(s=>s instanceof Tt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ee(i).pipe(Rr(s=>{let o=r.children[s],c=zL(n,s);return this.processSegmentGroup(e,c,o,s)}),Rc((s,o)=>(s.push(...o),s)),Wn(null),nh(),Le(s=>{if(s===null)return Ts(r);let o=JC(s);return bV(o),G(o)}))}processSegment(e,n,r,i,s,o){return Ee(n).pipe(Rr(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o).pipe(Gn(u=>{if(u instanceof Na)return G(null);throw u}))),jt(c=>!!c),Gn(c=>{if(QC(c))return EV(r,i,s)?G(new $y):Ts(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,c){return wV(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Ts(i):Ts(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:c,consumedSegments:u,positionalParamSegments:l,remainingSegments:f}=Yy(n,i,s);if(!c)return Ts(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>DV&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Le(y=>this.processSegment(e,r,n,y.concat(f),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=gV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(bt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(bt(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:f,remainingSegments:p,parameters:y}=c,_=new Aa(f,y,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,SV(r),vn(r),r.component??r._loadedComponent??null,r,AV(r)),{segmentGroup:A,slicedSegments:N}=SC(n,f,p,u);if(N.length===0&&A.hasChildren())return this.processChildren(l,u,A).pipe(ee(k=>k===null?null:new Tt(_,k)));if(u.length===0&&N.length===0)return G(new Tt(_,[]));let R=vn(r)===s;return this.processSegment(l,u,A,N,R?X:s,!0).pipe(ee(k=>new Tt(_,k instanceof Tt?[k]:[])))}))):Ts(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):dV(e,n,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,n).pipe(xe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):pV(n))):G({routes:[],injector:e})}};function bV(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function CV(t){let e=t.value.routeConfig;return e&&e.path===""}function JC(t){let e=[],n=new Set;for(let r of t){if(!CV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=JC(r.children);e.push(new Tt(r.value,i))}return e.filter(r=>!n.has(r))}function SV(t){return t.data||{}}function AV(t){return t.resolve||{}}function RV(t,e,n,r,i,s){return Le(o=>TV(t,e,n,r,o.extractedUrl,i,s).pipe(ee(({state:c,tree:u})=>me(F({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function NV(t,e){return Le(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of XC(u))o.add(l);let c=0;return Ee(o).pipe(Rr(u=>s.has(u)?MV(u,r,t,e):(u.data=Gy(u,u.parent,t).resolve,G(void 0))),xe(()=>c++),Mi(1),Le(u=>c===o.size?G(n):gt))})}function XC(t){let e=t.children.map(n=>XC(n)).flat();return[t,...e]}function MV(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!HC(i)&&(s[Ma]=i.title),xV(s,t,e,r).pipe(ee(o=>(t._resolvedData=o,t.data=Gy(t,t.parent,n).resolve,null)))}function xV(t,e,n,r){let i=Iy(t);if(i.length===0)return G({});let s={};return Ee(i).pipe(Le(o=>PV(t[o],e,n,r).pipe(jt(),xe(c=>{s[o]=c}))),Mi(1),th(s),Gn(o=>QC(o)?gt:Ai(o)))}function PV(t,e,n,r){let i=xa(e)??r,s=Ms(t,i),o=s.resolve?s.resolve(e,n):Zn(i,()=>s(e,n));return vr(o)}function yy(t){return bt(e=>{let n=t(e);return n?Ee(n).pipe(ee(()=>e)):G(e)})}var ZC=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===X);return i}getResolvedTitleForRoute(r){return r.data[Ma]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>x(OV),providedIn:"root"});let t=e;return t})(),OV=(()=>{let e=class e extends ZC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(se(RT))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Jy=new K("",{providedIn:"root",factory:()=>({})}),Xy=new K(""),kV=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(ep)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return G(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=vr(r.loadComponent()).pipe(ee(e0),xe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ni(()=>{this.componentLoaders.delete(r)})),s=new Di(i,()=>new it).pipe(Ti());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return G({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=FV(i,this.compiler,r,this.onLoadEndListener).pipe(Ni(()=>{this.childrenLoaders.delete(i)})),c=new Di(o,()=>new it).pipe(Ti());return this.childrenLoaders.set(i,c),c}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function FV(t,e,n,r){return vr(t.loadChildren()).pipe(ee(e0),Le(i=>i instanceof po||Array.isArray(i)?G(i):Ee(e.compileModuleAsync(i))),ee(i=>{r&&r(t);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(n).injector,o=s.get(Xy,[],{optional:!0,self:!0}).flat()),{routes:o.map(Qy),injector:s}}))}function LV(t){return t&&typeof t=="object"&&"default"in t}function e0(t){return LV(t)?t.default:t}var Zy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>x(VV),providedIn:"root"});let t=e;return t})(),VV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),UV=new K("");var jV=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new it,this.transitionAbortSubject=new it,this.configLoader=x(kV),this.environmentInjector=x(At),this.urlSerializer=x(zy),this.rootContexts=x(od),this.location=x(Mo),this.inputBindingEnabled=x(Ky,{optional:!0})!==null,this.titleStrategy=x(ZC),this.options=x(Jy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(Zy),this.createViewTransition=x(UV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Ay(s)),i=s=>this.events.next(new Ry(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(me(F(F({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ze({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wa,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(o=>o.id!==0),ee(o=>me(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),bt(o=>{let c=!1,u=!1;return G(o).pipe(bt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Dt.SupersededByNewNavigation),gt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?me(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!f&&p!=="reload"){let y="";return this.events.next(new hi(l.id,this.urlSerializer.serialize(l.rawUrl),y,Ty.IgnoredSameUrlNavigation)),l.resolve(null),gt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return G(l).pipe(bt(y=>{let _=this.transitions?.getValue();return this.events.next(new Da(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),_!==this.transitions?.getValue()?gt:Promise.resolve(y)}),RV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),xe(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=me(F({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let _=new ed(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(_)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:y,extractedUrl:_,source:A,restoredState:N,extras:R}=l,k=new Da(y,this.urlSerializer.serialize(_),A,N);this.events.next(k);let B=$C(this.rootComponentType).snapshot;return this.currentTransition=o=me(F({},l),{targetSnapshot:B,urlAfterRedirects:_,extras:me(F({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,G(o)}else{let y="";return this.events.next(new hi(l.id,this.urlSerializer.serialize(l.extractedUrl),y,Ty.IgnoredByUrlHandlingStrategy)),l.resolve(null),gt}}),xe(l=>{let f=new Dy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),ee(l=>(this.currentTransition=o=me(F({},l),{guards:WL(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),rV(this.environmentInjector,l=>this.events.next(l)),xe(l=>{if(o.guardsResult=l.guardsResult,As(l.guardsResult))throw GC(this.urlSerializer,l.guardsResult);let f=new by(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),mt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Dt.GuardRejected),!1)),yy(l=>{if(l.guards.canActivateChecks.length)return G(l).pipe(xe(f=>{let p=new Cy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),bt(f=>{let p=!1;return G(f).pipe(NV(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",Dt.NoDataFromResolver)}}))}),xe(f=>{let p=new Sy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),yy(l=>{let f=p=>{let y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe(xe(_=>{p.component=_}),ee(()=>{})));for(let _ of p.children)y.push(...f(_));return y};return Cc(f(l.targetSnapshot.root)).pipe(Wn(null),Dn(1))}),yy(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:l,targetSnapshot:f}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,f.root);return p?Ee(p).pipe(ee(()=>o)):G(o)}),ee(l=>{let f=UL(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=me(F({},l),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),xe(()=>{this.events.next(new Ca)}),GL(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Dn(1),xe({next:l=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new di(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{c=!0}}),rh(this.transitionAbortSubject.pipe(xe(l=>{throw l}))),Ni(()=>{!c&&!u&&this.cancelNavigationTransition(o,"",Dt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Gn(l=>{if(u=!0,KC(l))this.events.next(new yr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),$L(l)?this.events.next(new Sa(l.url)):o.resolve(!1);else{this.events.next(new ba(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return gt}))}))}cancelNavigationTransition(r,i,s){let o=new yr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function BV(t){return t!==wa}var $V=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>x(qV),providedIn:"root"});let t=e;return t})(),Hy=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},qV=(()=>{let e=class e extends Hy{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Tf(e)))(s||e)}})(),e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),t0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>x(HV),providedIn:"root"});let t=e;return t})(),HV=(()=>{let e=class e extends t0{constructor(){super(...arguments),this.location=x(Mo),this.urlSerializer=x(zy),this.options=x(Jy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(Zy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$C(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Da)this.stateMemento=this.createStateMemento();else if(r instanceof hi)this.rawUrlTree=i.initialUrl;else if(r instanceof ed){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Ca?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof yr&&(r.code===Dt.GuardRejected||r.code===Dt.NoDataFromResolver)?this.restoreHistory(i):r instanceof ba?this.restoreHistory(i,!0):r instanceof di&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,c=F(F({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",c)}else{let o=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Tf(e)))(s||e)}})(),e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ia=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ia||{});function zV(t,e){t.events.pipe(mt(n=>n instanceof di||n instanceof yr||n instanceof ba||n instanceof hi),ee(n=>n instanceof di||n instanceof hi?Ia.COMPLETE:(n instanceof yr?n.code===Dt.Redirect||n.code===Dt.SupersededByNewNavigation:!1)?Ia.REDIRECTING:Ia.FAILED),mt(n=>n!==Ia.REDIRECTING),Dn(1)).subscribe(()=>{e()})}function GV(t){throw t}var WV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},n0=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=x(Nu),this.stateManager=x(t0),this.options=x(Jy,{optional:!0})||{},this.pendingTasks=x(bo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(jV),this.urlSerializer=x(zy),this.location=x(Mo),this.urlHandlingStrategy=x(Zy),this._events=new it,this.errorHandler=this.options.errorHandler||GV,this.navigated=!1,this.routeReuseStrategy=x($V),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(Xy,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(Ky,{optional:!0}),this.eventsSubscription=new Me,this.isNgZoneEnabled=x(ve)instanceof ve&&ve.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof yr&&i.code!==Dt.Redirect&&i.code!==Dt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof di)this.navigated=!0;else if(i instanceof Sa){let c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||BV(s.source)};this.scheduleNavigation(c,wa,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}YV(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let l=F({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Qy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:u,preserveFragment:l}=i,f=l?this.currentUrlTree.fragment:c,p=null;switch(u){case"merge":p=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let y;try{let _=s?s.snapshot:this.routerState.snapshot.root;y=VC(_)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),y=this.currentUrlTree.root}return UC(y,r,p,f??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=As(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,wa,null,i)}navigate(r,i={skipLocationChange:!1}){return QV(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=F({},WV):i===!1?s=F({},KV):s=i,As(r))return TC(this.currentUrlTree,r,s);let o=this.parseUrl(r);return TC(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,c){if(this.disposed)return Promise.resolve(!1);let u,l,f;c?(u=c.resolve,l=c.reject,f=c.promise):f=new Promise((y,_)=>{u=y,l=_});let p=this.pendingTasks.add();return zV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function QV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new q(4008,!1)}function YV(t){return!(t instanceof Ca)&&!(t instanceof Sa)}var JV=new K("");function r0(t,...e){return Kt([{provide:Xy,multi:!0,useValue:t},[],{provide:Rs,useFactory:XV,deps:[n0]},{provide:Gi,multi:!0,useFactory:ZV},e.map(n=>n.\u0275providers)])}function XV(t){return t.routerState.root}function ZV(){let t=x(Jt);return e=>{let n=t.get(rr);if(e!==n.components[0])return;let r=t.get(n0),i=t.get(eU);t.get(tU)===1&&r.initialNavigation(),t.get(nU,null,te.Optional)?.setUpPreloading(),t.get(JV,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var eU=new K("",{factory:()=>new it}),tU=new K("",{providedIn:"root",factory:()=>1});var nU=new K("");var i0=[];var rU={apiKey:"AIzaSyAhSHFAtmf4vBJ1mCs4qQboAmX0I8EPopY",authDomain:"nr-angular-todos.firebaseapp.com",projectId:"nr-angular-todos",storageBucket:"nr-angular-todos.appspot.com",messagingSenderId:"598180679398",appId:"1:598180679398:web:120077c7612a647fa13527"},s0={providers:[r0(i0),NT(),[iD(()=>sD(rU)),yC(()=>wC())]]};var Ir=function(t){return t.all="all",t.active="active",t.completed="completed",t}(Ir||{});var In=(()=>{let e=class e{changeFilter(r){this.filterSig.set(r)}addTodo(r,i){let s={text:r,isCompleted:!1,id:i};this.todosSig.update(o=>[...o,s])}changeTodo(r,i){this.todosSig.update(s=>s.map(o=>o.id===r?me(F({},o),{text:i}):o))}removeTodo(r){this.todosSig.update(i=>i.filter(s=>s.id!==r))}toggleTodo(r){this.todosSig.update(i=>i.map(s=>s.id===r?me(F({},s),{isCompleted:!s.isCompleted}):s))}toggleAll(r){this.todosSig.update(i=>i.map(s=>me(F({},s),{isCompleted:r})))}constructor(){this.todosSig=Wf([]),this.filterSig=Wf(Ir.all)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _r=(()=>{let e=class e{getTodos(){return vC(this.todosCollection,{idField:"id"})}addTodo(r){let i={text:r,isCompleted:!1},s=IC(this.todosCollection,i).then(o=>o.id);return Ee(s)}removeTodo(r){let i=fy(this.firestore,"todos/"+r),s=_C(i);return Ee(s)}updateTodo(r,i){let s=fy(this.firestore,"todos/"+r),o=EC(s,i);return Ee(o)}constructor(){this.firestore=x(ci),this.todosCollection=ay(this.firestore,"todos")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var o0=(()=>{let e=class e{constructor(){this.todosService=x(In),this.todosFirebaseService=x(_r),this.text=""}changeText(r){let i=r.target;this.text=i.value}addTodo(){this.todosFirebaseService.addTodo(this.text).subscribe(r=>{this.todosService.addTodo(this.text,r),this.text=""})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=dt({type:e,selectors:[["app-header"]],standalone:!0,features:[ht],decls:4,vars:1,consts:[[1,"header"],["placeholder","What needs to be done?","autoFocus","",1,"new-todo",3,"keyup","keyup.enter","value"]],template:function(i,s){i&1&&(be(0,"header",0)(1,"h1"),vt(2,"todos"),De(),be(3,"input",1),Ze("keyup",function(c){return s.changeText(c)})("keyup.enter",function(){return s.addTodo()}),De()()),i&2&&(Xe(3),Be("value",s.text))},encapsulation:2});let t=e;return t})();var iU=t=>({hidden:t}),ev=t=>({selected:t}),a0=(()=>{let e=class e{constructor(){this.todosService=x(In),this.filterSig=this.todosService.filterSig,this.filterEnum=Ir,this.activeCount=ir(()=>this.todosService.todosSig().filter(r=>!r.isCompleted).length),this.noTodosClass=ir(()=>this.todosService.todosSig().length===0),this.itemLeftText=ir(()=>`item${this.activeCount()!==1?"s":""} left`)}changeFilter(r,i){r.preventDefault(),this.todosService.changeFilter(i),console.log("after change Filter: ",this.todosService.filterSig)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=dt({type:e,selectors:[["app-footer"]],standalone:!0,features:[ht],decls:15,vars:14,consts:[[1,"footer",3,"ngClass"],[1,"todo-count"],[1,"filters"],["href","/",3,"click","ngClass"],[1,"hint"]],template:function(i,s){i&1&&(be(0,"footer",0)(1,"span",1)(2,"strong"),vt(3),De(),vt(4),De(),be(5,"ul",2)(6,"li")(7,"a",3),Ze("click",function(c){return s.changeFilter(c,s.filterEnum.all)}),vt(8,"All"),De(),be(9,"a",3),Ze("click",function(c){return s.changeFilter(c,s.filterEnum.active)}),vt(10,"Active"),De(),be(11,"a",3),Ze("click",function(c){return s.changeFilter(c,s.filterEnum.completed)}),vt(12,"Completed"),De()()(),be(13,"span",4),vt(14,"Double-click to Edit"),De()()),i&2&&(Be("ngClass",qr(6,iU,s.noTodosClass())),Xe(3),Ao(s.activeCount()),Xe(),Ru(" ",s.itemLeftText()," "),Xe(3),Be("ngClass",qr(8,ev,s.filterSig()===s.filterEnum.all)),Xe(2),Be("ngClass",qr(10,ev,s.filterSig()===s.filterEnum.active)),Xe(2),Be("ngClass",qr(12,ev,s.filterSig()===s.filterEnum.completed)))},dependencies:[zr,Ki],encapsulation:2});let t=e;return t})();var sU=["textInput"],oU=(t,e)=>({editing:t,completed:e});function aU(t,e){if(t&1){let n=Au();Qf(0),be(1,"input",7,0),Ze("keyup",function(i){wo(n);let s=$r();return Eo(s.changeText(i))})("keyup.enter",function(){wo(n);let i=$r();return Eo(i.changeTodo())}),De(),Yf()}if(t&2){let n=$r();Xe(),Be("value",n.editingText)}}var c0=(()=>{let e=class e{constructor(){this.setEditingId=new at,this.todosService=x(In),this.todosFirebaseService=x(_r),this.editingText=""}ngOnInit(){this.editingText=this.todo.text}ngOnChanges(r){r.isEditing.currentValue&&setTimeout(()=>{this.textInput?.nativeElement.focus()},0)}changeText(r){let i=r.target.value;this.editingText=i}changeTodo(){let r={text:this.editingText,isCompleted:this.todo.isCompleted};this.todosFirebaseService.updateTodo(this.todo.id,r).subscribe(()=>{this.todosService.changeTodo(this.todo.id,this.editingText)}),this.setEditingId.emit(null)}setTodoInEditMode(){this.setEditingId.emit(this.todo.id)}removeTodo(){this.todosFirebaseService.removeTodo(this.todo.id).subscribe(()=>{this.todosService.removeTodo(this.todo.id)})}toggleTodo(){let r={text:this.todo.text,isCompleted:!this.todo.isCompleted};this.todosFirebaseService.updateTodo(this.todo.id,r).subscribe(()=>{this.todosService.toggleTodo(this.todo.id)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=dt({type:e,selectors:[["app-todo"]],viewQuery:function(i,s){if(i&1&&jE(sU,5),i&2){let o;Jf(o=Xf())&&(s.textInput=o.first)}},inputs:{todo:"todo",isEditing:"isEditing"},outputs:{setEditingId:"setEditingId"},standalone:!0,features:[Hi,ht],decls:7,vars:7,consts:[["textInput",""],[3,"ngClass"],[1,"view"],["type","checkbox",1,"toggle",3,"change","checked"],[3,"dblclick"],[1,"destroy",3,"click"],[4,"ngIf"],[1,"edit",3,"keyup","keyup.enter","value"]],template:function(i,s){i&1&&(be(0,"li",1)(1,"div",2)(2,"input",3),Ze("change",function(){return s.toggleTodo()}),De(),be(3,"label",4),Ze("dblclick",function(){return s.setTodoInEditMode()}),vt(4),De(),be(5,"button",5),Ze("click",function(){return s.removeTodo()}),De()(),So(6,aU,3,1,"ng-container",6),De()),i&2&&(Be("ngClass",$E(4,oU,s.isEditing,s.todo.isCompleted)),Xe(2),Be("checked",s.todo.isCompleted),Xe(2),Ao(s.todo.text),Xe(2),Be("ngIf",s.isEditing))},dependencies:[zr,Ki,uT],encapsulation:2});let t=e;return t})();var cU=t=>({hidden:t});function uU(t,e){if(t&1){let n=Au();be(0,"app-todo",5),Ze("setEditingId",function(i){wo(n);let s=$r();return Eo(s.setEditingId(i))}),De()}if(t&2){let n=e.$implicit,r=$r();Be("todo",n)("isEditing",r.editingId===n.id)}}var u0=(()=>{let e=class e{constructor(){this.todosService=x(In),this.todosFirebaseService=x(_r),this.editingId=null,this.visibleTodos=ir(()=>{let r=this.todosService.todosSig(),i=this.todosService.filterSig();return i===Ir.active?r.filter(s=>!s.isCompleted):i===Ir.completed?r.filter(s=>s.isCompleted):r}),this.noTodosClass=ir(()=>this.todosService.todosSig().length===0),this.isAllTodosSelected=ir(()=>this.todosService.todosSig().every(r=>r.isCompleted))}toggleAllTodos(r){let i=r.target,s=this.todosService.todosSig().map(o=>this.todosFirebaseService.updateTodo(o.id,{text:o.text,isCompleted:i.checked}));eh(s).subscribe(()=>{this.todosService.toggleAll(i.checked)})}setEditingId(r){this.editingId=r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=dt({type:e,selectors:[["app-main"]],standalone:!0,features:[ht],decls:6,vars:5,consts:[[1,"main",3,"ngClass"],["type","checkbox","id","toggle-all",1,"toggle-all",3,"change","checked"],["for","toggle-all"],[1,"todo-list"],[3,"todo","isEditing","setEditingId",4,"ngFor","ngForOf"],[3,"setEditingId","todo","isEditing"]],template:function(i,s){i&1&&(be(0,"section",0)(1,"input",1),Ze("change",function(c){return s.toggleAllTodos(c)}),De(),be(2,"label",2),vt(3,"Mark All As Completed"),De(),be(4,"ul",3),So(5,uU,1,2,"app-todo",4),De()()),i&2&&(Be("ngClass",qr(3,cU,s.noTodosClass())),Xe(),Be("checked",s.isAllTodosSelected()),Xe(4),Be("ngForOf",s.visibleTodos()))},dependencies:[zr,Ki,cT,c0],encapsulation:2});let t=e;return t})();var l0=(()=>{let e=class e{constructor(){this.todosService=x(In),this.todosFirebaseService=x(_r)}ngOnInit(){this.todosFirebaseService.getTodos().subscribe(r=>{this.todosService.todosSig.set(r)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=dt({type:e,selectors:[["app-todos"]],standalone:!0,features:[ht],decls:4,vars:0,consts:[[1,"todoapp"]],template:function(i,s){i&1&&(be(0,"div",0),Br(1,"app-header")(2,"app-main")(3,"app-footer"),De())},dependencies:[o0,a0,u0]});let t=e;return t})();var d0=(()=>{let e=class e{constructor(){this.title="angular-todos"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=dt({type:e,selectors:[["app-root"]],standalone:!0,features:[ht],decls:1,vars:0,template:function(i,s){i&1&&Br(0,"app-todos")},dependencies:[l0]});let t=e;return t})();AT(d0,s0).catch(t=>console.error(t));
